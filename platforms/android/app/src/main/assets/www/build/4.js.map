{"version":3,"sources":["../../src/pages/dashboard/dashboard.module.ts","../../node_modules/promise-timeout/index.js","../../src/pages/dashboard/dashboard.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACO;AACJ;AAC0B;AAWtE;IAAA;IAAkC,CAAC;IAAtB,mBAAmB;QAT/B,+DAAQ,CAAC;YACN,YAAY,EAAE;gBACV,iEAAa;aAChB;YACD,OAAO,EAAE;gBACL,sEAAe,CAAC,QAAQ,CAAC,iEAAa,CAAC;gBACvC,uFAAgB;aACnB;SACJ,CAAC;OACW,mBAAmB,CAAG;IAAD,0BAAC;CAAA;AAAH;;;;;;;;;ACdhC;AACa;;AAEb;AACA;AACA;AACA;AACA;;AAEA;AACA,6BAA6B,mBAAmB;AAChD;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChD0C;AAE8B;AACR;AACpB;AACH;AACa;AACd;AAOxC;IAKI,uBAAmB,OAAsB,EACtB,SAAoB,EACnB,MAAc,EACd,OAAgB,EAChB,UAAsB;QAJvB,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAW;QACnB,WAAM,GAAN,MAAM,CAAQ;QACd,YAAO,GAAP,OAAO,CAAS;QAChB,eAAU,GAAV,UAAU,CAAY;QAC9B,IAAI,CAAC,aAAa,GAAG,QAAQ,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;IACnE,CAAC;IAEK,gCAAQ,GAAd;;;;;;wBACI;;;;2BAIG;wBACH,SAAI;wBAAY,qBAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC;;wBALjD;;;;2BAIG;wBACH,GAAK,OAAO,GAAG,CAAC,UAAiC,MAAK,MAAM,CAAC;6BAEzD,CAAC,IAAI,CAAC,UAAU,CAAC,eAAe,EAAE,EAAlC,wBAAkC;;;;wBAG9B,qBAAM,gEAAO,CAAC,IAAI,CAAC,UAAU,CAAC,kBAAkB,EAAE,CAAC,KAAK,CAAC,aAAG;gCACxD,OAAO,CAAC,KAAK,CAAC,wBAAwB,EAAE,GAAG,CAAC;4BAChD,CAAC,CAAC,EAAE,IAAI,CAAC;;wBAFT,SAES,CAAC;;;;wBAEV,OAAO,CAAC,GAAG,CAAC,6BAA6B,GAAG,GAAC,CAAC,OAAO,CAAC,CAAC;wBACvD,4BAA4B;wBAC5B,IAAI,CAAC,UAAU,CAAC,kBAAkB,EAAE,CAAC,IAAI,CAAC,UAAC,QAAQ;4BAC/C,EAAE,CAAC,CAAC,QAAQ,IAAI,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;4BAClC,CAAC;wBACL,CAAC,EAAE,aAAG;4BACF,OAAO,CAAC,KAAK,CAAC,wBAAwB,EAAE,GAAG,CAAC;wBAChD,CAAC,CAAC,CAAC;;;;;;KAKd;IAED,wCAAgB,GAAhB;QACI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;IACtC,CAAC;IACD,oCAAY,GAAZ;QACI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;IAClC,CAAC;IAED,iCAAS,GAAT,UAAU,KAAa,EAAE,QAAgB;QAAhB,2CAAgB;QACtC,EAAE,EAAC,QAAQ,CAAC,EAAC;YACT,IAAI,CAAC,MAAM,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC;QAC1C,CAAC;QACD,EAAE,EAAC,KAAK,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,EAAC;YAC5B,MAAM,CAAC;QACX,CAAC;QACD,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IACrC,CAAC;IAED,wCAAgB,GAAhB;QACI,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC;QACxC,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,CAAC,CAAC;YAC7B,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;QAC9C,CAAC;IACL,CAAC;IACD,uCAAe,GAAf;QACI,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;IAC9C,CAAC;IAnEQ,aAAa;QAJzB,gEAAS,CAAC;YACP,QAAQ,EAAE,gBAAgB;WACG;SAChC,CAAC;mGAM2C;YACX,gEAAS;YACX,+DAAM;YACL,yEAAO;YACJ,UAAU;OATjC,aAAa,CAoEzB;IAAD,CAAC;AAAA;SApEY,aAAa,e","file":"4.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { DashboardPage } from './dashboard';\nimport { ComponentsModule } from '../../components/components.module';\n\n@NgModule({\n    declarations: [\n        DashboardPage,\n    ],\n    imports: [\n        IonicPageModule.forChild(DashboardPage),\n        ComponentsModule\n    ],\n})\nexport class DashboardPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/dashboard/dashboard.module.ts","// Copyright (c) 2015-2017 David M. Lee, II\n'use strict';\n\n/**\n * Local reference to TimeoutError\n * @private\n */\nvar TimeoutError;\n\n/**\n * Rejects a promise with a {@link TimeoutError} if it does not settle within\n * the specified timeout.\n *\n * @param {Promise} promise The promise.\n * @param {number} timeoutMillis Number of milliseconds to wait on settling.\n * @returns {Promise} Either resolves/rejects with `promise`, or rejects with\n *                   `TimeoutError`, whichever settles first.\n */\nvar timeout = module.exports.timeout = function(promise, timeoutMillis) {\n  var error = new TimeoutError(),\n      timeout;\n\n  return Promise.race([\n    promise,\n    new Promise(function(resolve, reject) {\n      timeout = setTimeout(function() {\n        reject(error);\n      }, timeoutMillis);\n    }),\n  ]).then(function(v) {\n    clearTimeout(timeout);\n    return v;\n  }, function(err) {\n    clearTimeout(timeout);\n    throw err;\n  });\n};\n\n/**\n * Exception indicating that the timeout expired.\n */\nTimeoutError = module.exports.TimeoutError = function() {\n  Error.call(this)\n  this.stack = Error().stack\n  this.message = 'Timeout';\n};\n\nTimeoutError.prototype = Object.create(Error.prototype);\nTimeoutError.prototype.name = \"TimeoutError\";\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/promise-timeout/index.js\n// module id = 1137\n// module chunks = 3 4","import { Component } from '@angular/core';\nimport { IonicPage} from 'ionic-angular';\nimport { NavController } from 'ionic-angular/navigation/nav-controller';\nimport { NavParams } from 'ionic-angular/navigation/nav-params';\nimport {Helper} from \"../../classes/Helper\";\nimport { Storage } from \"@ionic/storage\";\nimport {GpsService} from \"../../services/gps-service\";\nimport {timeout} from 'promise-timeout';\n\n@IonicPage()\n@Component({\n    selector: 'page-dashboard',\n    templateUrl: 'dashboard.html',\n})\nexport class DashboardPage {\n\n    devMode: boolean;\n    tabBarElement: any;\n\n    constructor(public navCtrl: NavController,\n                public navParams: NavParams,\n                private helper: Helper,\n                private storage: Storage,\n                private gpsService: GpsService) {\n                this.tabBarElement = document.querySelector('.tabbar');\n    }\n\n    async ngOnInit(){\n        /**\n         * The first time the app is opened it will ask for geolocation to prevent the map and list to show data\n         * from the default one (Frankfurt) for a few seconds\n         * The devmode variable is fetched due to not being able to do it trhough the helper service because of the delayed response.\n         */\n        this.devMode = (await this.storage.get('devMode') === 'true')\n\n        if (!this.gpsService.getLastPosition()) {\n            // try to get position\n            try {\n                await timeout(this.gpsService.getCurrentPosition().catch(err => {\n                    console.error(\"Error loading GPS data\", err)\n                }), 2000);\n            } catch (e) {\n                console.log(\"could not obtain position: \" + e.message);\n                // make position check async\n                this.gpsService.getCurrentPosition().then((position) => {\n                    if (position && position.coords) {\n                    }\n                }, err => {\n                    console.error(\"Error loading GPS data\", err)\n                });\n            }\n        }\n        //await this.gpsService.isLocationOn();\n\n    }\n\n    pushSettingsPage() {\n        this.navCtrl.push('SettingsPage');\n    }\n    pushInfoPage() {\n        this.navCtrl.push('InfoPage');\n    }\n\n    switchTab(index: number, addRoute = false){\n       if(addRoute){\n           this.helper.setActivateAddRoute(true);\n       }\n       if(index == 3 && !this.devMode){\n           return;\n       }\n       this.navCtrl.parent.select(index);\n    }\n\n    ionViewWillEnter(){\n        this.devMode = this.helper.getDevMode();\n        if (this.tabBarElement != null) {\n            this.tabBarElement.style.display = 'none';\n        }\n    }\n    ionViewDidLeave() {\n        this.tabBarElement.style.display = 'flex';\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/dashboard/dashboard.ts"],"sourceRoot":""}