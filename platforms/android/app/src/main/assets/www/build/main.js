webpackJsonp([11],{104:function(e,n,t){"use strict";t.d(n,"a",function(){return p});var l=t(0),i=t(85),o=t(28),r=t(138),u=(t.n(r),t(294)),a=t(227),s=t(37),c=t(108),d=this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})},f=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},p=function(){function e(){this.narrativeStrings=[],this.matchingStrings={a_alert_welcome:"welcome",a_alert_welcome_msg:"welcomeMessage",a_alert_congrats_msg:"ending",a_did_you_know:"aboutObject",a_alert_right_answer_title:"wellDone",a_alert_right_answer_title_low:"notPerfect",a_alert_right_answer_1:"firstGo",a_alert_false_answer_title:"wrongAnswer",a_alert_false_answer_1:"tryAgain",a_alert_false_answer_2:"takeHint",a_skipTask_confirm:"skipTask",a_alert_congrats:"congratulations",good_luck_next_time:"goodLuck"},this.boundingBoxLatLng=null,this.viewBoundingBoxLatLng=null,this.centerLatLng=null,this.distance=null}return e.prototype.getTasks=function(){return d(this,void 0,void 0,function(){var e,n,t=this;return f(this,function(l){switch(l.label){case 0:return this.tasks?[2,this.tasks]:this.task2Routes?(this.task2Routes.sort(function(e,n){return e.id-n.id}),e=this,[4,Promise.all(this.task2Routes.map(function(e,n){return d(t,void 0,void 0,function(){var t;return f(this,function(l){switch(l.label){case 0:return[4,e.getTaskWithSubtasks()];case 1:return t=l.sent(),t.position=n+1,[2,Promise.resolve(t)]}})})}))]):[3,2];case 1:return e.tasks=l.sent(),[3,5];case 2:return n=this,[4,s.a.INSTANCE.findRouteById(this.id)];case 3:return[4,l.sent().getTasks()];case 4:n.tasks=l.sent(),l.label=5;case 5:return[2,this.tasks]}})})},e.prototype.getTaskCount=function(){return d(this,void 0,void 0,function(){return f(this,function(e){switch(e.label){case 0:return this.tasks?[2,this.tasks.length]:this.task2Routes?[2,this.task2Routes.length]:[3,1];case 1:return[4,s.a.INSTANCE.findRouteById(this.id)];case 2:return[4,e.sent().getTaskCount()];case 3:e.sent(),e.label=4;case 4:return[2]}})})},e.prototype.getScoreForUser=function(e){var n=this.scores.filter(function(n){return n.userId==e.id}),t=n.length>0?n[0]:new u.a;return t.userId=e.id,t.route=this,t},e.prototype.getImageURL=function(){return this.image},e.prototype.calcBoundingBoxAndCenter=function(){var e=JSON.parse(this.boundingBox),n=JSON.parse(this.center);if(e){var t=e[0],l=e[1],i=l[0]-.0015,o=t[0]+.0015,u=t[1]-.0015,a=l[1]+.0015;this.viewBoundingBoxLatLng=new r.LatLngBounds([t[0],l[1]],[l[0],t[1]]),this.boundingBoxLatLng=new r.LatLngBounds([[o,a],[i,u]]),this.centerLatLng=new r.LatLng(n[0],n[1])}},e.prototype.getAssistiveEquipment=function(e){var n="";if(this.tasks)for(var t=0;t<this.tasks.length;t++)for(var l=this.tasks[t].getAssistiveEquipment(),i=0;i<l.length;i++){var o=e.instant(l[i]);-1==n.indexOf(o)&&(""!=n&&(n+=", "),n+=o)}return n},e.prototype.getSettingValue=function(e){if(this.isSettingAvailable(e)){var n=this.getAttributes();return"true"===n[e]||"1"===n[e]}return null},e.prototype.getSettingStringValue=function(e,n){var t=this.getSettingValue(e);return null!==t?n.instant(t?"a_settings_active":"a_settings_inactive"):""},e.prototype.isSettingAvailable=function(e){var n=this.getAttributes();return n.sampleSolution||(n.sampleSolution="true"),n.hints||(n.hints="true"),n.answerValidation||(n.answerValidation="true"),n.answerFeedback||(n.answerFeedback="true"),this.attr=JSON.stringify(n),n.hasOwnProperty(e)},e.prototype.getBoundingBoxLatLng=function(){return this.boundingBoxLatLng||this.calcBoundingBoxAndCenter(),this.boundingBoxLatLng},e.prototype.getViewBoundingBoxLatLng=function(){return this.viewBoundingBoxLatLng||this.calcBoundingBoxAndCenter(),this.viewBoundingBoxLatLng},e.prototype.getCenterLatLng=function(){return this.centerLatLng||this.calcBoundingBoxAndCenter(),this.centerLatLng},e.prototype.getDistance=function(){return c.a.INSTANCE.getLastPosition()&&null==this.distance&&(this.distance=o.b.INSTANCE.getDistanceToCenterByLatLng(this.getCenterLatLng())),this.distance},e.prototype.getAttributes=function(){return this.attr?o.b.safeJsonDecode(this.attr):{}},e.prototype.getNarrativeName=function(){var e=this.getAttributes().narrativeName;return e?e.toLowerCase():""},e.prototype.getTilesMap=function(e){if(this.getAttributes().tilesUrl)return this.getAttributes().tilesUrl;switch(e){case"pirates":return"https://{s}.api.mapbox.com/styles/v1/tempgeocent/cj2qe6qid003a2rmrquvqgbcx/tiles/256/{z}/{x}/{y}@2x?access_token=pk.eyJ1IjoidGVtcGdlb2NlbnQiLCJhIjoiY2l1YTNmenEyMDAwdDJ6cWZxbG55Yjg4OSJ9.QRTz4Pi3096MtXKc_QgpWQ";default:return o.b.mapquestUrl}},e.prototype.getTilesServerSubdomains=function(e){if(this.getAttributes().tilesSubdomains)return this.getAttributes().tilesSubdomains;switch(e){case"pirates":return["a","b"];default:return o.b.subDomains}},e.prototype.isGamificationDisabled=function(){return!!this.getAttributes().gamification&&"false"===this.getAttributes().gamification},e.prototype.isSampleSolutionEnabled=function(){return!this.getAttributes().sampleSolution||"true"===this.getAttributes().sampleSolution},e.prototype.isHintsEnabled=function(){return!this.getAttributes().hints||"true"===this.getAttributes().hints},e.prototype.isAnswerValidationEnabled=function(){return!this.getAttributes().answerValidation||"true"===this.getAttributes().answerValidation},e.prototype.isAnswerFeedbackEnabled=function(){return!this.getAttributes().answerFeedback||"true"===this.getAttributes().answerFeedback},e.prototype.isNarrativeEnabled=function(){return!!this.getAttributes().narrativeName},e.prototype.setNarrativeStrings=function(){var e=this.getAttributes().narrativeStrings;null!=e&&(this.narrativeStrings=JSON.parse(e))},e.prototype.hasNarrativeString=function(e){null!=this.narrativeStrings&&0!=this.narrativeStrings.length||this.setNarrativeStrings();return!!this.narrativeStrings[this.matchingStrings[e]]},e.prototype.getNarrativeString=function(e){null!=this.narrativeStrings&&0!=this.narrativeStrings.length||this.setNarrativeStrings();var n=this.narrativeStrings[this.matchingStrings[e]];return n&&"a_alert_welcome_msg"===e&&(n=n.replace("###TITLE###",this.title)),n||e},e.prototype.isSubtaskRequired=function(){return"true"===this.getAttributes().useSubtasks},Object(l.__decorate)([Object(i.h)({name:"_id"}),Object(l.__metadata)("design:type",Number)],e.prototype,"id",void 0),Object(l.__decorate)([Object(i.a)({name:"user_id"}),Object(l.__metadata)("design:type",Number)],e.prototype,"userId",void 0),Object(l.__decorate)([Object(i.a)({length:1}),Object(l.__metadata)("design:type",String)],e.prototype,"public",void 0),Object(l.__decorate)([Object(i.a)(),Object(l.__metadata)("design:type",String)],e.prototype,"title",void 0),Object(l.__decorate)([Object(i.a)({name:"country_code"}),Object(l.__metadata)("design:type",String)],e.prototype,"countryCode",void 0),Object(l.__decorate)([Object(i.a)(),Object(l.__metadata)("design:type",String)],e.prototype,"city",void 0),Object(l.__decorate)([Object(i.a)(),Object(l.__metadata)("design:type",String)],e.prototype,"image",void 0),Object(l.__decorate)([Object(i.a)({length:64}),Object(l.__metadata)("design:type",String)],e.prototype,"code",void 0),Object(l.__decorate)([Object(i.a)({length:64}),Object(l.__metadata)("design:type",String)],e.prototype,"grade",void 0),Object(l.__decorate)([Object(i.a)(),Object(l.__metadata)("design:type",String)],e.prototype,"tags",void 0),Object(l.__decorate)([Object(i.a)(),Object(l.__metadata)("design:type",String)],e.prototype,"length",void 0),Object(l.__decorate)([Object(i.a)({length:64}),Object(l.__metadata)("design:type",String)],e.prototype,"duration",void 0),Object(l.__decorate)([Object(i.a)({name:"bounding_box"}),Object(l.__metadata)("design:type",String)],e.prototype,"boundingBox",void 0),Object(l.__decorate)([Object(i.a)(),Object(l.__metadata)("design:type",String)],e.prototype,"center",void 0),Object(l.__decorate)([Object(i.a)(),Object(l.__metadata)("design:type",String)],e.prototype,"description",void 0),Object(l.__decorate)([Object(i.a)({name:"create_date"}),Object(l.__metadata)("design:type",String)],e.prototype,"createDate",void 0),Object(l.__decorate)([Object(i.a)(),Object(l.__metadata)("design:type",String)],e.prototype,"timestamp",void 0),Object(l.__decorate)([Object(i.a)(),Object(l.__metadata)("design:type",String)],e.prototype,"attr",void 0),Object(l.__decorate)([Object(i.a)({name:"map_version"}),Object(l.__metadata)("design:type",String)],e.prototype,"mapVersion",void 0),Object(l.__decorate)([Object(i.a)({name:"map_filename"}),Object(l.__metadata)("design:type",String)],e.prototype,"mapFileName",void 0),Object(l.__decorate)([Object(i.a)({name:"map_date"}),Object(l.__metadata)("design:type",String)],e.prototype,"mapDate",void 0),Object(l.__decorate)([Object(i.g)(function(e){return a.a},function(e){return e.route},{eager:!0}),Object(l.__metadata)("design:type",Array)],e.prototype,"task2Routes",void 0),Object(l.__decorate)([Object(i.a)({name:"downloaded"}),Object(l.__metadata)("design:type",Boolean)],e.prototype,"downloaded",void 0),Object(l.__decorate)([Object(i.a)({name:"downloadedDate"}),Object(l.__metadata)("design:type",String)],e.prototype,"downloadedDate",void 0),Object(l.__decorate)([Object(i.a)({name:"completedDate"}),Object(l.__metadata)("design:type",String)],e.prototype,"completedDate",void 0),Object(l.__decorate)([Object(i.a)({name:"unlocked"}),Object(l.__metadata)("design:type",Boolean)],e.prototype,"unlocked",void 0),Object(l.__decorate)([Object(i.a)({name:"completed"}),Object(l.__metadata)("design:type",Boolean)],e.prototype,"completed",void 0),Object(l.__decorate)([Object(i.g)(function(e){return u.a},function(e){return e.route},{eager:!0}),Object(l.__metadata)("design:type",Array)],e.prototype,"scores",void 0),e=Object(l.__decorate)([Object(i.b)("mcm_route")],e)}()},107:function(e,n,t){"use strict";t.d(n,"a",function(){return l});var l=function(){function e(e,n){this.config=e,this.http=n}return Object.defineProperty(e.prototype,"rootUrl",{get:function(){return this._rootUrl||this.config.rootUrl},set:function(e){this._rootUrl=e},enumerable:!0,configurable:!0}),e}()},108:function(e,n,t){"use strict";t.d(n,"a",function(){return s});var l=t(0),i=(t(217),t(17),t(218)),o=t(19),r=t(84),u=(t.n(r),t(219),this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})}),a=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},s=function(){function e(e,t,l,i,o){var r=this;this.diagnostic=e,this.alertCtrl=t,this.platform=l,this.locationAcc=i,this.geolocation=o,this.subject=new c(1),n.INSTANCE=this,this.subject.emptyCallback=function(){r.geolocationSubscription&&(r.geolocationSubscription.unsubscribe(),r.geolocationSubscription=null,console.log("unsubscribing from geolocation.watchPosition()"))}}return n=e,e.prototype.isLocationOn=function(){return u(this,void 0,void 0,function(){var e=this;return a(this,function(n){switch(n.label){case 0:return[4,this.platform.ready()];case 1:return n.sent(),console.log("platform: "+this.platform.platforms()),this.platform.is("android")&&!0===Object(o.i)(i.a.getPluginRef(),null,i.a.getPluginName())&&this.diagnostic.isLocationEnabled().then(function(n){return u(e,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return console.log("LOCATION##: ",n),n?[3,2]:[4,this.turnLocationOn()];case 1:e.sent(),e.label=2;case 2:return[2]}})})}),[2]}})})},e.prototype.locationAlert=function(){return u(this,void 0,void 0,function(){var e=this;return a(this,function(n){return this.alertCtrl.create({title:"Location Off",message:"Do you want to turn on your device location?",buttons:[{text:"NO",handler:function(){console.log("Disagree clicked")}},{text:"YES",handler:function(){e.turnLocationOn()}}]}).present(),[2]})})},e.prototype.turnLocationOn=function(){return u(this,void 0,void 0,function(){var e=this;return a(this,function(n){return this.locationAcc.canRequest().then(function(n){n&&e.locationAcc.request(e.locationAcc.REQUEST_PRIORITY_HIGH_ACCURACY).then(function(e){console.log("Device Location is now turned ON")},function(e){console.log("Device Location is still OFF ")})}),[2]})})},e.prototype.watchPosition=function(e){var n=this;return this.geolocationSubscription||(console.log("subscribing to geolocation.watchPosition()"),e||(e={enableHighAccuracy:!0}),this.geolocationSubscription=this.geolocation.watchPosition(e).subscribe(function(e){n.subject.next(e),e&&e.coords&&(console.debug("watchPosition: "+e.coords.latitude+", "+e.coords.longitude),n.lastPosition=e)})),this.subject},e.prototype.getCurrentPosition=function(e){return u(this,void 0,void 0,function(){var n,t;return a(this,function(l){switch(l.label){case 0:e||(e={enableHighAccuracy:!0}),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.geolocation.getCurrentPosition(e)];case 2:return n=l.sent(),this.subject.next(n),n&&n.coords&&(console.debug("getCurrentPosition: "+n.coords.latitude+", "+n.coords.longitude),this.lastPosition=n),[2,n];case 3:return t=l.sent(),console.log("gps-service.ts: getCurrentPosition() caught exception",t),[2,null];case 4:return[2]}})})},e.prototype.getLastPosition=function(){return this.lastPosition},e;var n}(),c=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Object(l.__extends)(n,e),n.prototype._subscribe=function(n){var t=this,l=e.prototype._subscribe.call(this,n),i=l.unsubscribe;return l.unsubscribe=function(){i.apply(l),!t.hasObservers()&&t.emptyCallback&&t.emptyCallback()},l},n.prototype.hasObservers=function(){return this.observers.length>0},n}(r.ReplaySubject)},109:function(e,n,t){"use strict";t.d(n,"a",function(){return u});t(0),t(43),t(17);var l=t(270),i=t(19),o=(t(64),this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})}),r=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},u=function(){function e(e,n,t,l){this.translateService=e,this.platform=n,this.globalization=t,this.storage=l,this.isInitialized=!1,this.initializeListeners=[],this.availableLanguages=["en","de","it","fr","es","pt","sk","tr","zh","el","id"]}return n=e,e.prototype.getAvailableLanguages=function(){return this.availableLanguages},e.prototype.initialize=function(){return o(this,void 0,void 0,function(){var e=this;return r(this,function(t){return this.isInitialized?[2,Promise.resolve()]:this.initializeListeners.length>0?[2,new Promise(function(n){e.initializeListeners.push(n)})]:[2,new Promise(function(t){return o(e,void 0,void 0,function(){var e,o,u,a=this;return r(this,function(r){switch(r.label){case 0:return e="en",this.translateService.setDefaultLang(e),this.initializeListeners.push(t),[4,this.platform.ready()];case 1:return r.sent(),[4,this.storage.get(n.STORAGE_KEY)];case 2:if((o=r.sent())||!0!==Object(i.i)(l.a.getPluginRef(),null,l.a.getPluginName()))return[3,6];r.label=3;case 3:return r.trys.push([3,5,,6]),[4,this.globalization.getPreferredLanguage()];case 4:return(u=r.sent())&&u.value&&((o=u.value).indexOf("-")>-1&&(o=o.split("-")[0]),o.indexOf("_")>-1&&(o=o.split("_")[0]),o=o.toLowerCase(),-1==this.availableLanguages.indexOf(o)&&(o=null)),[3,6];case 5:return r.sent(),[3,6];case 6:return o||(o=e),[4,this.translateService.use(o)];case 7:return r.sent(),setTimeout(function(){a.isInitialized=!0,a.initializeListeners.map(function(e){e()}),a.initializeListeners=null},100),[2]}})})})]})})},e.prototype.getLanguage=function(){return o(this,void 0,void 0,function(){return r(this,function(e){return[2,this.translateService.currentLang]})})},e.prototype.setLanguage=function(e){return o(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return this.translateService.use(e),[4,this.storage.set(n.STORAGE_KEY,e)];case 1:return t.sent(),[2]}})})},e.STORAGE_KEY="LanguageService.lang",e;var n}()},136:function(e,n,t){"use strict";t.d(n,"a",function(){return a});var l=t(0),i=t(44),o=t(107),r=(t(75),t(46)),u=(t.n(r),t(59)),a=(t.n(u),function(e){function n(n,t){return e.call(this,n,t)||this}return Object(l.__extends)(n,e),n.prototype.createSessionResponse=function(e){var n=new i.h,t=new i.g,l=new i.i("POST",this.rootUrl+"/session",e,{headers:t,params:n,responseType:"json"});return this.http.request(l).pipe(Object(u.filter)(function(e){return e instanceof i.j}),Object(r.map)(function(e){var n=null;return n=e.body,e.clone({body:n})}))},n.prototype.createSession=function(e){return this.createSessionResponse(e).pipe(Object(r.map)(function(e){return e.body}))},n.prototype.updateSessionResponse=function(e){var n=new i.h,t=new i.g,l=new i.i("PUT",this.rootUrl+"/session/"+e.sessionCode,e.sessionUpdateRequest,{headers:t,params:n,responseType:"json"});return this.http.request(l).pipe(Object(u.filter)(function(e){return e instanceof i.j}),Object(r.map)(function(e){var n=null;return n=e.body,e.clone({body:n})}))},n.prototype.updateSession=function(e){return this.updateSessionResponse(e).pipe(Object(r.map)(function(e){return e.body}))},n.prototype.deleteSessionResponse=function(e){var n=new i.h,t=new i.g,l=new i.i("DELETE",this.rootUrl+"/session/"+e,null,{headers:t,params:n,responseType:"text"});return this.http.request(l).pipe(Object(u.filter)(function(e){return e instanceof i.j}),Object(r.map)(function(e){return e.clone({body:null})}))},n.prototype.deleteSession=function(e){return this.deleteSessionResponse(e).pipe(Object(r.map)(function(e){return e.body}))},n.prototype.joinSessionResponse=function(e){var n=new i.h,t=new i.g,l=new i.i("POST",this.rootUrl+"/session/join/"+e.sessionCode,e.request,{headers:t,params:n,responseType:"json"});return this.http.request(l).pipe(Object(u.filter)(function(e){return e instanceof i.j}),Object(r.map)(function(e){var n=null;return n=e.body,e.clone({body:n})}))},n.prototype.joinSession=function(e){return this.joinSessionResponse(e).pipe(Object(r.map)(function(e){return e.body}))},n.prototype.getSessionResponse=function(e){var n=new i.h,t=new i.g,l=new i.i("GET",this.rootUrl+"/session/"+e,null,{headers:t,params:n,responseType:"json"});return this.http.request(l).pipe(Object(u.filter)(function(e){return e instanceof i.j}),Object(r.map)(function(e){var n=null;return n=e.body,e.clone({body:n})}))},n.prototype.getSession=function(e){return this.getSessionResponse(e).pipe(Object(r.map)(function(e){return e.body}))},n.prototype.getSessionByCodeResponse=function(e){var n=new i.h,t=new i.g,l=new i.i("GET",this.rootUrl+"/session/code/"+e,null,{headers:t,params:n,responseType:"json"});return this.http.request(l).pipe(Object(u.filter)(function(e){return e instanceof i.j}),Object(r.map)(function(e){var n=null;return n=e.body,e.clone({body:n})}))},n.prototype.getSessionByCode=function(e){return this.getSessionByCodeResponse(e).pipe(Object(r.map)(function(e){return e.body}))},n.prototype.getSessionUsersResponse=function(e){var n=new i.h,t=new i.g,l=new i.i("GET",this.rootUrl+"/session/"+e+"/users",null,{headers:t,params:n,responseType:"json"});return this.http.request(l).pipe(Object(u.filter)(function(e){return e instanceof i.j}),Object(r.map)(function(e){var n=null;return n=e.body,e.clone({body:n})}))},n.prototype.getSessionUsers=function(e){return this.getSessionUsersResponse(e).pipe(Object(r.map)(function(e){return e.body}))},n.prototype.getSessionAdminResponse=function(e){var n=new i.h,t=new i.g,l=new i.i("GET",this.rootUrl+"/session/"+e.sessionCode+"/user/"+e.userToken+"/admin",null,{headers:t,params:n,responseType:"json"});return this.http.request(l).pipe(Object(u.filter)(function(e){return e instanceof i.j}),Object(r.map)(function(e){var n=null;return n=e.body,e.clone({body:n})}))},n.prototype.getSessionAdmin=function(e){return this.getSessionAdminResponse(e).pipe(Object(r.map)(function(e){return e.body}))},n}(o.a))},139:function(e,n,t){"use strict";t.d(n,"a",function(){return c});t(0);var l=t(380),i=(t.n(l),t(239)),o=(t.n(i),t(375)),r=(t(28),t(374)),u=t(37),a=this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})},s=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},c=function(){function e(e,n,t){this.ormService=e,this.helper=n,this.imageService=t}return e.prototype.checkForUpdates=function(){return a(this,void 0,void 0,function(){var e,n,t,l,u,a,c,d,f,p,h,m,g,v,b,y,_,w,T,R;return s(this,function(s){switch(s.label){case 0:return e=r.a.getInstance(),[4,e.ready()];case 1:return s.sent(),n=e.getDB(),[4,this.helper.invokeApi("getVersionsV2")];case 2:return(t=s.sent())?(console.log("WAITING FOR offlineVersions"),[4,e.getTableVersions()]):[2];case 3:for(l=s.sent(),console.log("OFFLINE versions",l),u=new i.Dictionary,a=0;a<t.length;a++)u.setValue((c=t[a]).option,c.value);return d="UPDATE "+o.a.DATABASE_TABLE_STATE+" SET "+o.a.DB_STATE.fields[2]+" = ? WHERE "+o.a.DB_STATE.fields[1]+" = ?",Number(l.getValue("version_route"))<Number(u.getValue("version_route"))?[4,this.ormService.getDownloadedRoutes()]:[3,18];case 4:return f=s.sent(),[4,this.ormService.getUnlockedRoutes()];case 5:return p=s.sent(),[4,this.ormService.getCompletedRoutes()];case 6:return h=s.sent(),m=this.insertJSONinSQLiteDB,[4,this.helper.invokeApi("getRoutes")];case 7:return[4,m.apply(this,[s.sent(),o.a.DB_ROUTE])];case 8:return s.sent(),[4,n.executeSql(d,[u.getValue("version_route"),"version_route"])];case 9:s.sent(),g=[],v={},b=0,y=f.concat(p).concat(h),s.label=10;case 10:return b<y.length?(_=y[b],v[_.id]?[3,14]:[4,this.ormService.findRouteById(_.id)]):[3,15];case 11:return(w=s.sent())?(w.downloaded=_.downloaded,w.downloadedDate=_.downloadedDate,w.completedDate=_.completedDate,w.unlocked=_.unlocked,w.completed=_.completed,v[_.id]=!0,w.downloaded&&Number(w.mapVersion)>Number(_.mapVersion)?[4,this.imageService.downloadAndUnzip(w,function(){},function(){})]:[3,13]):[3,14];case 12:s.sent(),s.label=13;case 13:g.push(w),s.label=14;case 14:return b++,[3,10];case 15:return[4,this.ormService.getRouteRepository()];case 16:return T=s.sent(),[4,T.save(g)];case 17:s.sent(),console.log("UPDATED VERSION!","version_route"),s.label=18;case 18:return Number(l.getValue("version_rel_route_task"))<Number(u.getValue("version_rel_route_task"))?(R=this.insertJSONinSQLiteDB,[4,this.helper.invokeApi("getRelations")]):[3,22];case 19:return[4,R.apply(this,[s.sent(),o.a.DB_RELROUTETASK])];case 20:return s.sent(),console.log("UPDATING version_rel_route_task VERSION!",u.getValue("version_rel_route_task")),[4,n.executeSql(d,[u.getValue("version_rel_route_task"),"version_rel_route_task"])];case 21:s.sent(),console.log("UPDATED VERSION!","version_rel_route_task"),s.label=22;case 22:return[2]}})})},e.prototype.insertJSONinSQLiteDB=function(e,n){return a(this,void 0,void 0,function(){var t,l,i,u;return s(this,function(a){switch(a.label){case 0:return t="INSERT INTO "+n.getTableName()+" "+n.getFieldsInScopes()+" VALUES "+n.getFieldsPlaceholders()+";",l="REPLACE INTO "+n.getTableName()+" "+n.getFieldsInScopes()+" VALUES "+n.getFieldsPlaceholders()+";",i=r.a.getInstance(),u=i.getDB(),n.getTableName()===o.a.DATABASE_TABLE_TASK?[3,2]:[4,u.executeSql("DELETE FROM "+n.getTableName(),null)];case 1:a.sent(),a.label=2;case 2:return[4,u.transaction(function(i){for(var r=n===o.a.DB_TASK?e.tasks.length:e.length,u=n===o.a.DB_TASK?e.subtasks.length:0,a=0;a<r;a++){for(var s=n===o.a.DB_TASK?e.tasks[a]:e[a],c=[],d=1;d<=n.fieldsCount;d++)"INTEGER"===n.fieldsType[d-1]?c.push(Number(s[n.fields[d-1]])):"VARCHAR"===n.fieldsType[d-1]||"TEXT"===n.fieldsType[d-1]||"TIMESTAMP"===n.fieldsType[d-1]?c.push(s[n.fields[d-1]]):console.warn("Caution: Datatype not Integer, Varchar or Text!");n.getTableName()!==o.a.DATABASE_TABLE_TASK?i.executeSql(t,c):i.executeSql(l,c)}for(a=0;a<u;a++){for(s=e.subtasks[a],c=[],d=1;d<=n.fieldsCount;d++)"INTEGER"===n.fieldsType[d-1]?c.push("_id"===n.fields[d-1]?Number(s.task_id+s[n.fields[d-1]]):s[n.fields[d-1]]?Number(s[n.fields[d-1]]):0):"VARCHAR"===n.fieldsType[d-1]||"TEXT"===n.fieldsType[d-1]||"TIMESTAMP"===n.fieldsType[d-1]?c.push(s[n.fields[d-1]]?s[n.fields[d-1]]:""):console.warn("Caution: Datatype not Integer, Varchar or Text!");n.getTableName()!==o.a.DATABASE_TABLE_TASK?i.executeSql(t,c):i.executeSql(l,c)}}).catch(function(e){console.error("Transaction Error: "+e.toString())})];case 3:return a.sent(),[2]}})})},e.prototype.downloadRouteTasksData=function(e,n){return a(this,void 0,void 0,function(){var t,l,i,r;return s(this,function(a){switch(a.label){case 0:return t=0,l="&route_id="+e.id+"&user_id="+t+"&lang_code="+n,i=this.insertJSONinSQLiteDB,[4,this.helper.invokeApi("downloadTrailV2",l)];case 1:return[4,i.apply(this,[a.sent(),o.a.DB_TASK])];case 2:return a.sent(),r=e,[4,u.a.INSTANCE.findRouteById(e.id)];case 3:return[4,a.sent().getTasks()];case 4:return r.tasks=a.sent(),[2]}})})},e.prototype.updateRouteTasksData=function(e,n){return a(this,void 0,void 0,function(){var t,l,i;return s(this,function(r){switch(r.label){case 0:return this.helper.isOnline?(t=0,l="&route_id="+e.id+"&user_id="+t+"&lang_code="+n,i=this.insertJSONinSQLiteDB,[4,this.helper.invokeApi("updateTrailV2",l)]):[3,3];case 1:return[4,i.apply(this,[r.sent(),o.a.DB_TASK])];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e}()},140:function(e,n,t){"use strict";t.d(n,"a",function(){return l}),t.d(n,"b",function(){return u});t(0),t(17),t(186),t(114);var l,i=t(149),o=(t(187),t(43),t(64),this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})}),r=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r};!function(e){e[e.hint=1]="hint",e[e.error=2]="error",e[e.solved=3]="solved",e[e.sampleSolution=4]="sampleSolution",e[e.solvedLow=5]="solvedLow",e[e.saved=6]="saved",e[e.subtask=7]="subtask",e[e.calculation=8]="calculation"}(l||(l={}));var u=function(){function e(e,n,t,l,i,u,a,s,c,d,f){var p=this;this.splashScreen=t,this.storage=f,this.rootPage="HomePage",this.activeNarrative="default";e.ready().then(function(){return o(p,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,l.initialize()];case 1:return n.sent(),[4,this.setRootPage()];case 2:return n.sent(),e.is("cordova")&&(e.is("tablet")?d.lock(d.ORIENTATIONS.LANDSCAPE):d.lock(d.ORIENTATIONS.PORTRAIT)),[2]}})})}),e.registerBackButtonAction(function(){return o(p,void 0,void 0,function(){return r(this,function(n){return a.getActiveNavs()[0].canGoBack()||s.create({title:c.instant("a_alert_confirm_close"),buttons:[{text:c.instant("no"),role:"cancel"},{text:c.instant("yes"),handler:function(){e.exitApp()}}]}).present(),[2]})})}),n.backgroundColorByHexString("#035f87");var h="en"==window.navigator.language.substring(0,2)?".":",";this.keysTab=["1","2","3","C","4","5","6","","7","8","9","","-","0",h,"✔"],u.subscribe("narrativeChange",function(e){p.activeNarrative=e})}return e.prototype.ngOnInit=function(){i.a.hide()},e.prototype.keyClick=function(e){console.log("Event emitter - key: ",e)},e.prototype.isFirstStart=function(){return o(this,void 0,void 0,function(){var e;return r(this,function(n){switch(n.label){case 0:return[4,this.storage.get("OnboardingHasBeenShown")];case 1:return(e=n.sent())||this.storage.set("OnboardingHasBeenShown",!0),[2,!e]}})})},e.prototype.setRootPage=function(){return o(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return[4,this.isFirstStart()];case 1:return this.rootPage=e.sent()?"OnboardingPage":"HomePage",this.splashScreen.hide(),[2]}})})},e}()},141:function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(17);var l=this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})},i=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},o=function(){function e(e,n,t,l,i,o){this.navCtrl=e,this.navParams=n,this.viewCtrl=t,this.modalService=l,this.modalCtrl=i,this.deepLinker=o,this.showBackButton=!1,this.transparent=!1,this.isOpeningRoute=!1,this.currentpage=this.viewCtrl.name}return e.prototype.retriveTitle=function(){return this.navParams&&this.navParams.data.headerTitle?this.navParams.data.headerTitle:"InfoPage"==this.currentpage?"a_about_mcm_title":"SettingsPage"==this.currentpage?"a_action_settings":"ModalCmp"==this.currentpage?"":this.currentpage},e.prototype.ngOnInit=function(){this.showBackButton=this.navCtrl.canGoBack(),"ModalCmp"==this.currentpage&&(this.transparent=!0)},e.prototype.goToDashboard=function(){var e=this;this.navCtrl.setRoot("DashboardPage").then(function(){e.navCtrl.popToRoot()})},e.prototype.goBack=function(){var e=this;if(console.log("Header going back"),this.viewCtrl.instance.goBack)return this.viewCtrl.instance.goBack();if("TasksMap"===this.currentpage){var n=this.navCtrl.getActive().instance;null!=n.sessionInfo?(console.log("go back from active session"),console.log(n.route.id),n.sessionFinished()):this.isOpeningRoute||(this.isOpeningRoute=!0,this.navCtrl.pop({},function(){e.deepLinker.navChange("back")}),this.modalService.showRoute(n.route,this.navCtrl).then(function(){return l(e,void 0,void 0,function(){return i(this,function(e){return this.isOpeningRoute=!1,[2]})})}))}else this.navCtrl.pop({},function(){e.deepLinker.navChange("back")})},e.prototype.closeModal=function(){this.viewCtrl.dismiss(this.modalCtrl)},e}()},149:function(e,n,t){"use strict";t.d(n,"a",function(){return r});var l=t(0),i=t(1),o=t(296),r=(t.n(o),function(){function e(e,t){this.el=e,this.renderer=t,this.colNb=5,this.visible=!0,this.cKClickEmit=new i.EventEmitter,this.deleteEmit=new i.EventEmitter,this.hideEmit=new i.EventEmitter,this.zoom=1,this.rowNb=1,n.m_component=this}return n=e,e.prototype.ngOnInit=function(){this.colNb&&(this.m_main_column_nb=this.colNb),this.keysTab&&(this.m_main_rows=this.range(0,this.keysTab.length-1,this.m_main_column_nb),this.m_main_cols=this.range(0,this.m_main_column_nb-1,1),this.rowNb=Math.floor(this.keysTab.length/this.m_main_column_nb+1)),this.resize()},Object.defineProperty(e,"onCKClick",{get:function(){return this.m_clickObs},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onDeleteClick",{get:function(){return this.m_deleteObs},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onCKShow",{get:function(){return this.m_showObs},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onCKHide",{get:function(){return this.m_hideObs},enumerable:!0,configurable:!0}),e.prototype.cKClick=function(e,t){n.onCKClick.next(t),this.cKClickEmit.emit(t)},e.prototype.deleteClick=function(e){n.onDeleteClick.next(),this.deleteEmit.emit()},e.prototype.hideClick=function(e){n.hide(null),n.onCKHide.next(),this.hideEmit.emit()},e.prototype.onWindowResize=function(e){this.resize()},e.show=function(e){void 0===e&&(e=function(){}),this.m_component&&!this.m_component.visible&&(this.m_component.visible=!0,setTimeout(function(){e(),n.onCKShow.next()},100))},e.hide=function(e){void 0===e&&(e=function(){}),this.m_component&&this.m_component.visible&&(this.m_component.visible=!1,e&&setTimeout(function(){e(),n.onCKHide.next()},100))},e.isVisible=function(){return this.m_component.visible},e.destroy=function(e){void 0===e&&(e=function(e){}),this.m_component?(this.m_component.el.nativeElement.remove(),this.m_component=null,e(!0)):e(!0)},e.prototype.resize=function(){var e=50*this.rowNb+30,n=window.screen.height;this.zoom=e>.4*n?.4*n/e:1},e.prototype.range=function(e,n,t){t=t||1;for(var l=[],i=e;i<=n;i+=t)l.push(i);return l},e.m_component=null,e.m_clickObs=new o.Subject,e.m_deleteObs=new o.Subject,e.m_showObs=new o.Subject,e.m_hideObs=new o.Subject,Object(l.__decorate)([Object(i.HostBinding)("class.visible"),Object(i.Input)(),Object(l.__metadata)("design:type",Boolean)],e.prototype,"visible",void 0),e;var n}())},171:function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(104);var l=this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})},i=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},o=function(){function e(e){this.helper=e}return e.prototype.ngOnChanges=function(){return l(this,void 0,void 0,function(){var e,n;return i(this,function(t){switch(t.label){case 0:if(!this.route||!this.route.scores)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.helper.calculateProgress(this.route)];case 2:return e=t.sent(),this.currentProgress=e.currentProgress,this.total=e.totalTasks,this.progressWidth=100/this.total*this.currentProgress,[3,4];case 3:return n=t.sent(),console.log(n),[3,4];case 4:return[3,6];case 5:this.total&&this.currentProgress&&(this.progressWidth=100/this.total*this.currentProgress),t.label=6;case 6:return[2]}})})},e}()},188:function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0),t(241),t(17),t(141),t(43),t(282),t(619),t(171),t(76),t(283),t(614);var l=function(){return function(){}}()},197:function(e,n,t){"use strict";var l;t(0),t(1),t(17),t(60),t(184),t(97),t(185);!function(e){e[e.Idle=1]="Idle",e[e.Record=2]="Record",e[e.Stop=3]="Stop"}(l||(l={}));var i=t(76),o=t(28);t(55);t.d(n,"a",function(){return a});var r=this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})},u=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},a=function(){function ChatPage(e,n,t,i,o,r,u,a,s,c,d){var f=this;this.file=n,this.media=t,this.platform=i,this.chatService=o,this.events=r,this.changeDetector=u,this.chatAndSessionService=a,this.camera=s,this.photoViewer=c,this.spinnerDialog=d,this.msgList=[],this.editorMsg="",this.editorImg=null,this.showEmojiPicker=!1,this.isScrolledToBottom=!0,this.localPath=null,this.audioFilePath=null,this.fileDirectory=null,this.audioIndex=null,this.canPlayback=!0,this.showTextArea=!0,this.audioPlaying=!1,this.showAudioButtons=!0,this.showPictureButtons=!0,this.startAudioRecord=0,this.startAudioPlaying=0,this.audioDuration=0,this.currentPosition=0,this.recordState=l.Idle,this.chatService.getUserInfo().then(function(e){f.user=e}),this.chatService.getActiveSession().then(function(e){f.sessionUser=e.sessionUser,f.session=e.session,f.sessionInfo=e;var n=f.chatService.getReceivers()[0];f.toUser={id:n.id,name:n.team_name,token:n.token}})}return ChatPage.prototype.ionViewWillLeave=function(){return r(this,void 0,void 0,function(){var e;return u(this,function(n){return this.events.unsubscribe("chat:received"),this.scrollEndSubscription&&(this.scrollEndSubscription.unsubscribe(),this.scrollEndSubscription=null),this.chatService.setUserSeesNewMessages(!1),null!=this.sessionInfo&&(e=JSON.stringify({}),this.chatAndSessionService.addUserEvent("event_trail_chat_close",e,"0")),[2]})})},ChatPage.prototype.ionViewDidEnter=function(){var e=this;this.getMsg(),this.events.subscribe("chat:received",function(n){e.pushNewMsg(n)}),this.scrollEndSubscription=this.content.ionScrollEnd.subscribe(function(n){if(n&&n.scrollElement){var t=n.scrollElement.children[0].scrollHeight-n.scrollHeight-n.scrollTop<0;e.isScrolledToBottom!=t&&(console.debug("isScrolledToBottom: "+t),e.chatService.setUserSeesNewMessages(t)),e.isScrolledToBottom=t}}),this.chatService.setUserSeesNewMessages(!0),this.chatAndSessionService.setNewMsgNumber(0)},ChatPage.prototype.onFocus=function(){this.showEmojiPicker=!1,this.content.resize()},ChatPage.prototype.switchEmojiPicker=function(){this.showEmojiPicker=!this.showEmojiPicker,this.showEmojiPicker?this.setTextareaScroll():this.focus(),this.content.resize(),this.scrollToBottom()},ChatPage.prototype.getMsg=function(){var e=this,n=[];this.chatService.getReceivers().forEach(function(t){n.push(e.chatService.getMsgList(e.sessionInfo,t.token).toPromise().then(function(n){e.msgList=n,e.scrollToBottom()}))}),Promise.all(n).then(function(){console.debug("received all messages!")})},ChatPage.prototype.sendMsg=function(){return r(this,void 0,void 0,function(){var e,n,t,i,o,a,s,c=this;return u(this,function(d){switch(d.label){case 0:return this.setInputWrapButtons(!0),""!=this.editorMsg.trim()||this.editorImg||this.recordState==l.Stop?this.editorMsg&&this.editorImg||this.editorMsg&&this.recordState==l.Stop||this.editorImg&&this.recordState==l.Stop?[2]:(e=(new Date).getTimezoneOffset(),n={messageId:null,userId:this.user.token,userName:this.user.name,userAvatar:this.user.avatar,toUserId:this.toUser.token,time:Date.now()-6e4*e,message:this.editorMsg,media:[],status:"pending"},this.editorMsg="",this.editorImg?(this.localPath=null,t=new Blob([this.editorImg],{type:"image/jpeg"}),(i=new FormData).append("media",t,"image.jpeg"),[4,this.chatAndSessionService.postMedia(i,this.sessionInfo)]):[3,2]):[2];case 1:return o=d.sent(),this.editorImg=null,o?(n.media.push(o),s=JSON.stringify({message:o}),this.chatAndSessionService.addUserEvent("event_trail_chat_msg_send",s,"0"),[3,5]):(console.log("ERROR: unable to send media"),[2]);case 2:return this.recordState!=l.Stop?[3,4]:(this.canPlayback||this.pauseAudio(),this.recordState=l.Idle,a="aac",[4,this.file.readAsArrayBuffer(this.fileDirectory,"audioFile.aac").then(function(e){return r(c,void 0,void 0,function(){var t,l,i,o;return u(this,function(r){switch(r.label){case 0:return t=new Blob([e],{type:"audio/"+a}),(l=new FormData).append("media",t,"audio."+a),l.append("mediaDuration",this.audioDuration.toString()),n.audioDuration=this.audioDuration,this.audioDuration=0,[4,this.chatAndSessionService.postMedia(l,this.sessionInfo)];case 1:return i=r.sent(),this.audio=null,i?(n.media.push(i),o=JSON.stringify({message:i}),this.chatAndSessionService.addUserEvent("event_trail_chat_msg_send",o,"0"),[2]):(console.log("ERROR: unnable to send media"),[2])}})})}).catch(function(e){console.log("ERROR: ",e)})]);case 3:return d.sent(),[3,5];case 4:null!=this.sessionInfo&&(s=JSON.stringify({message:n.message}),this.chatAndSessionService.addUserEvent("event_trail_chat_msg_send",s,"0")),d.label=5;case 5:return this.showEmojiPicker||this.focus(),[4,this.chatService.checkForNewMessages(this.sessionInfo)];case 6:return d.sent(),this.chatService.sendMsg(n,this.sessionInfo).then(function(e){e.forEach(function(e){var n=c.getMsgIndexById(e.messageId);e.messageId&&-1!==n?c.msgList[n].status="success":(e.status="success",c.isScrolledToBottom=!0,c.pushNewMsg(e))})}),[2]}})})},ChatPage.prototype.getImage=function(){return r(this,void 0,void 0,function(){var e,n=this;return u(this,function(t){return this.setInputWrapButtons(!1),e={quality:100,targetHeight:512,targetWidth:512,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE,correctOrientation:!0,sourceType:this.camera.PictureSourceType.PHOTOLIBRARY,allowEdit:!0},this.camera.getPicture(e).then(function(e){return r(n,void 0,void 0,function(){return u(this,function(n){return this.editorImg=e,this.localPath="data:image/jpeg;base64,"+e,[2]})})},function(e){console.log("ERROR#####: ",e),n.setInputWrapButtons(!0)}),[2]})})},ChatPage.prototype.openCamera=function(){var e=this;this.setInputWrapButtons(!1);this.camera.getPicture({quality:100,targetHeight:512,targetWidth:512,correctOrientation:!0,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE}).then(function(n){return r(e,void 0,void 0,function(){return u(this,function(e){return this.editorImg=n,this.localPath="data:image/jpeg;base64,"+n,[2]})})},function(n){console.log("Camera issue:"+n),e.setInputWrapButtons(!0)})},ChatPage.prototype.removeImage=function(){this.localPath=null,this.editorImg=null,this.setInputWrapButtons(!0)},ChatPage.prototype.pushNewMsg=function(e){var n=this.user.token;this.getMsgIndexById(e.messageId)>=0||e.userId!==n&&e.toUserId!==n||(console.log("pushed new message"),this.msgList.push(e),this.changeDetector.detectChanges(),this.isScrolledToBottom&&this.scrollToBottom())},ChatPage.prototype.getMsgIndexById=function(e){return this.msgList.findIndex(function(n){return n.messageId===e})},ChatPage.prototype.scrollToBottom=function(){var e=this;setTimeout(function(){e.content&&e.content.scrollToBottom&&e.content.scrollToBottom()},200)},ChatPage.prototype.focus=function(){this.messageInput&&this.messageInput.nativeElement&&this.messageInput.nativeElement.focus()},ChatPage.prototype.setTextareaScroll=function(){var e=this.messageInput.nativeElement;e.scrollTop=e.scrollHeight},ChatPage.prototype.micButtonClick=function(){switch(this.showTextArea=!1,this.showPictureButtons=!1,this.recordState){case l.Record:this.recordState=l.Stop,this.stopRecording();break;case l.Stop:this.recordState=l.Idle,this.showTextArea=!0,this.showPictureButtons=!0,this.pauseAudio();break;default:this.recordState=l.Record,this.startRecording()}},ChatPage.prototype.updateAudioDuration=function(){var e=(new Date).getTime();this.audioDuration=e-this.startAudioRecord},ChatPage.prototype.updateAudioPosition=function(e){var n=this,t=(new Date).getTime();e?t-this.startAudioPlaying<e.audioDuration?e.currentPosition=t-this.startAudioPlaying:(e.currentPosition=e.audioDuration,setTimeout(function(){n.clearPositionInterval(e)},1e3)):t-this.startAudioPlaying<this.audioDuration?this.currentPosition=t-this.startAudioPlaying:(this.currentPosition=this.audioDuration,setTimeout(function(){n.clearPositionInterval()},1e3))},ChatPage.prototype.startRecording=function(){var e=this;console.log("start recording"),this.pauseAudio(),this.platform.is("android")?this.fileDirectory=this.file.externalDataDirectory:this.platform.is("ios")&&(this.fileDirectory=this.file.documentsDirectory),this.file.createFile(this.fileDirectory,"audioFile.aac",!0).then(function(n){e.audio=e.media.create(e.fileDirectory.replace(/^file:\/\//,"")+"audioFile.aac"),e.startAudioRecord=(new Date).getTime(),e.audio.startRecord(),e.updateAudioDuration(),e.durationInterval=window.setInterval(function(){e.updateAudioDuration()},1e3),e.audioFilePath=n.toInternalURL()}).catch(function(e){console.log("creation file error:",e)}),setTimeout(function(){e.recordState!=l.Idle&&(e.recordState=l.Stop,e.stopRecording())},6e4)},ChatPage.prototype.stopRecording=function(){this.audio.stopRecord(),this.durationInterval&&(clearInterval(this.durationInterval),this.durationInterval=null),this.startAudioRecord=0,this.canPlayback=!0},ChatPage.prototype.playAudio=function(e,n){var t=this;this.audioPlaying&&this.pauseAudio();var l=null;e&&(l=e.media[0]),l?this.audioIndex=n:(this.canPlayback=!1,l=this.audioFilePath),this.audio=this.media.create(l),this.audio.play(),this.startAudioPlaying=(new Date).getTime(),this.positionInterval=window.setInterval(function(){t.updateAudioPosition(e)},10),this.audio.setVolume(.8),this.audio.onStatusUpdate.subscribe(function(l){switch(l){case 2:t.audioPlaying=!0;break;case 3:case 4:isNaN(n)?t.canPlayback=!0:t.audioIndex=null,t.audio.release(),t.audioPlaying=!1,t.clearPositionInterval(e)}})},ChatPage.prototype.clearPositionInterval=function(e){this.positionInterval&&(e?e.currentPosition=0:this.currentPosition=0,clearInterval(this.positionInterval),this.positionInterval=null)},ChatPage.prototype.pauseAudio=function(e){this.clearPositionInterval(e),this.audio&&this.audio.pause()},ChatPage.prototype.isAudio=function(e){return".aac"==e.substring(e.lastIndexOf("."))},ChatPage.prototype.changeButtonsStatus=function(){0==this.editorMsg.length?this.setInputWrapButtons(!0):(this.showAudioButtons=!1,this.showPictureButtons=!1)},ChatPage.prototype.setInputWrapButtons=function(e){this.showTextArea=e,this.showAudioButtons=e,this.showPictureButtons=e},ChatPage.prototype.openInPhotoviewer=function(e){var n=this;o.b.isPluginAvailable(i.a)&&(this.spinnerDialog.show(),setTimeout(function(){n.photoViewer.show(e),setTimeout(function(){n.spinnerDialog.hide()},1e3)},100))},ChatPage}()},227:function(e,n,t){"use strict";t.d(n,"a",function(){return c});var l=t(0),i=t(85),o=t(357),r=t(104),u=t(37),a=this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})},s=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},c=function(){function e(){}return e.prototype.getTaskWithSubtasks=function(){return a(this,void 0,void 0,function(){var e;return s(this,function(n){switch(n.label){case 0:return[4,u.a.INSTANCE.getTaskRepository()];case 1:return e=n.sent(),[4,e.createQueryBuilder("tasks").where({id:this.task.id}).leftJoinAndSelect("tasks.subtasks","subtasks").getOne()];case 2:return[2,n.sent()]}})})},Object(l.__decorate)([Object(i.h)({name:"_id"}),Object(l.__metadata)("design:type",Number)],e.prototype,"id",void 0),Object(l.__decorate)([Object(i.e)(function(e){return r.a},function(e){return e.task2Routes}),Object(i.c)({name:"route_id",referencedColumnName:"id"}),Object(l.__metadata)("design:type","function"==typeof(n=void 0!==r.a&&r.a)&&n||Object)],e.prototype,"route",void 0),Object(l.__decorate)([Object(i.e)(function(e){return o.a},function(e){return e.task2Routes},{eager:!0}),Object(i.c)({name:"task_id",referencedColumnName:"id"}),Object(l.__metadata)("design:type","function"==typeof(t=void 0!==o.a&&o.a)&&t||Object)],e.prototype,"task",void 0),e=Object(l.__decorate)([Object(i.b)("mcm_rel_route_task")],e);var n,t}()},241:function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var l=t(1),i=t(76),o=t(28),r=(t(55),function(){function e(e,n,t){this.imagesService=e,this.photoViewerPlugin=n,this.spinnerDialog=t,this.offline=!0,this.fullWidth=!1,this.photoViewer=!1,this.click=new l.EventEmitter}return e.prototype.ngOnChanges=function(){this.imageUrl=this.offline?this.imagesService.getOfflineURL(this.src):this.imagesService.getOnlineURL(this.src)},e.prototype.onClick=function(e){var n=this;this.click.next(e),this.photoViewer&&o.b.isPluginAvailable(i.a)&&(this.spinnerDialog.show(),setTimeout(function(){n.photoViewerPlugin.show(n.offline?n.imagesService.getOfflineURL(n.src,void 0,void 0,!0):n.imageUrl),setTimeout(function(){n.spinnerDialog.hide()},1e3)},100))},e}())},242:function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0),t(17);var l=function(){function e(e,n){var t=this;this.viewCtrl=e,this.changeDetectorRef=n,this.data=null,this.progress=0,this.data=e.data,this.data.updateView=function(){n.detectChanges(),t.progress=0==t.data.currentProgress?0:Math.round(100/t.data.total*t.data.currentProgress)}}return e.prototype.onCancelClick=function(){this.viewCtrl.data.cancelCallback&&this.viewCtrl.data.cancelCallback()},e}()},243:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return RouteInfo});var __WEBPACK_IMPORTED_MODULE_0_tslib__=__webpack_require__(0),__WEBPACK_IMPORTED_MODULE_1__angular_core__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_2_ionic_angular__=__webpack_require__(17),__WEBPACK_IMPORTED_MODULE_3__services_orm_service__=__webpack_require__(37),__WEBPACK_IMPORTED_MODULE_4_ionic_angular_navigation_view_controller__=__webpack_require__(6),__WEBPACK_IMPORTED_MODULE_5__ngx_translate_core__=__webpack_require__(43),__WEBPACK_IMPORTED_MODULE_6_ionic_angular_navigation_nav_controller__=__webpack_require__(24),__awaiter=this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})},__generator=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},RouteInfo=function(){function RouteInfo(e,n,t,l,i,o){this.navParams=e,this.ormService=n,this.viewCtrl=t,this.alertCtrl=l,this.navCtrl=i,this.translateService=o,this.currentProgress=0}return RouteInfo.prototype.ionViewWillEnter=function(){return __awaiter(this,void 0,void 0,function(){var routeId,_a,_b,_c,score,_d,_e;return __generator(this,function(_f){switch(_f.label){case 0:return routeId=this.navParams.get("routeId"),_a=this,_b=this.viewCtrl.data,[4,this.ormService.findRouteById(routeId)];case 1:return _a.route=_b.route=_f.sent(),_c=this,[4,this.route.getTaskCount()];case 2:return _c.totalTasks=_f.sent(),_e=(_d=this.route).getScoreForUser,[4,this.ormService.getActiveUser()];case 3:return score=_e.apply(_d,[_f.sent()]),this.currentProgress=score.getTasksSolved().length+score.getTasksSolvedLow().length+score.getTasksFailed().length,eval('MathJax.Hub.Queue(["Typeset", MathJax.Hub])'),[2]}})})},RouteInfo.prototype.doDownload=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return this.viewCtrl.data.modalsService.doDownload(e),[2]})})},RouteInfo.prototype.showRoute=function(e){e.downloaded&&this.viewCtrl.dismiss({showRoute:!0,route:e})},RouteInfo.prototype.removeRoute=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.ormService.removeDownloadedRoute(this.route,!0)];case 1:return e.sent(),[2]}})})},RouteInfo;var _a,_b,_c,_d,_e,_f}()},244:function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(17);var l=this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})},i=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},o=function(){function e(e,n,t){this.navCtrl=e,this.navParams=n,this.viewCtrl=t,this.tasks=[]}return e.prototype.showRoute=function(e,n){this.viewCtrl.dismiss({route:e,selectedTask:n})},e.prototype.ionViewWillEnter=function(){return l(this,void 0,void 0,function(){var e;return i(this,function(n){switch(n.label){case 0:return this.route=this.navParams.get("route"),this.score=this.navParams.get("score"),e=this,[4,this.route.getTasks()];case 1:return e.tasks=n.sent(),[2]}})})},e.prototype.cancel=function(){this.viewCtrl.dismiss()},e}()},265:function(e,n,t){"use strict";t.d(n,"a",function(){return a});var l=t(0),i=t(44),o=t(107),r=(t(75),t(46)),u=(t.n(r),t(59)),a=(t.n(u),function(e){function n(n,t){return e.call(this,n,t)||this}return Object(l.__extends)(n,e),n.prototype.updatePositionResponse=function(e){var n=new i.h,t=new i.g,l=new i.i("PUT",this.rootUrl+"/session/"+e.sessionCode+"/user/"+e.userToken+"/position/"+e.latitude+"/"+e.longitude,null,{headers:t,params:n,responseType:"json"});return this.http.request(l).pipe(Object(u.filter)(function(e){return e instanceof i.j}),Object(r.map)(function(e){return e.clone({body:null})}))},n.prototype.updatePosition=function(e){return this.updatePositionResponse(e).pipe(Object(r.map)(function(e){return e.body}))},n.prototype.getSessionUserByTokenResponse=function(e){var n=new i.h,t=new i.g,l=new i.i("GET",this.rootUrl+"/session/"+e.sessionCode+"/user/"+e.userToken,null,{headers:t,params:n,responseType:"json"});return this.http.request(l).pipe(Object(u.filter)(function(e){return e instanceof i.j}),Object(r.map)(function(e){return e.clone({body:null})}))},n.prototype.getSessionUserByToken=function(e){return this.getSessionUserByTokenResponse(e).pipe(Object(r.map)(function(e){return e.body}))},n.prototype.leaveSessionResponse=function(e){var n=new i.h,t=new i.g,l=new i.i("DELETE",this.rootUrl+"/session/"+e.sessionCode+"/user/"+e.userToken,null,{headers:t,params:n,responseType:"json"});return this.http.request(l).pipe(Object(u.filter)(function(e){return e instanceof i.j}),Object(r.map)(function(e){return e.clone({body:null})}))},n.prototype.leaveSession=function(e){return this.leaveSessionResponse(e).pipe(Object(r.map)(function(e){return e.body}))},n}(o.a))},266:function(e,n,t){"use strict";t.d(n,"a",function(){return a});var l=t(0),i=t(44),o=t(107),r=(t(75),t(46)),u=(t.n(r),t(59)),a=(t.n(u),function(e){function n(n,t){return e.call(this,n,t)||this}return Object(l.__extends)(n,e),n.prototype.getMessagesResponse=function(e){var n=new i.h,t=new i.g,l=new i.i("GET",this.rootUrl+"/session/"+e.sessionCode+"/chat/"+e.senderToken+"/"+e.receiverToken,null,{headers:t,params:n,responseType:"json"});return this.http.request(l).pipe(Object(u.filter)(function(e){return e instanceof i.j}),Object(r.map)(function(e){var n=null;return n=e.body,e.clone({body:n})}))},n.prototype.getMessages=function(e){return this.getMessagesResponse(e).pipe(Object(r.map)(function(e){return e.body}))},n.prototype.setMessageReadResponse=function(e){var n=new i.h,t=new i.g,l=new i.i("PUT",this.rootUrl+"/session/"+e.sessionCode+"/chat/"+e.senderToken+"/"+e.receiverToken,null,{headers:t,params:n,responseType:"json"});return this.http.request(l).pipe(Object(u.filter)(function(e){return e instanceof i.j}),Object(r.map)(function(e){var n=null;return n=e.body,e.clone({body:n})}))},n.prototype.setMessageRead=function(e){return this.setMessageReadResponse(e).pipe(Object(r.map)(function(e){return e.body}))},n.prototype.sendMessageToUserResponse=function(e){var n=new i.h,t=new i.g,l=new i.i("POST",this.rootUrl+"/session/"+e.sessionCode+"/chat/"+e.senderToken+"/"+e.receiverToken,e.chatMessage,{headers:t,params:n,responseType:"json"});return this.http.request(l).pipe(Object(u.filter)(function(e){return e instanceof i.j}),Object(r.map)(function(e){var n=null;return n=e.body,e.clone({body:n})}))},n.prototype.sendMessageToUser=function(e){return this.sendMessageToUserResponse(e).pipe(Object(r.map)(function(e){return e.body}))},n.prototype.getNewMessagesResponse=function(e){var n=new i.h,t=new i.g,l=new i.i("GET",this.rootUrl+"/session/"+e.sessionCode+"/chat/"+e.senderToken+"/"+e.receiverToken+"/new",null,{headers:t,params:n,responseType:"json"});return this.http.request(l).pipe(Object(u.filter)(function(e){return e instanceof i.j}),Object(r.map)(function(e){var n=null;return n=e.body,e.clone({body:n})}))},n.prototype.getNewMessages=function(e){return this.getNewMessagesResponse(e).pipe(Object(r.map)(function(e){return e.body}))},n.prototype.sendMessageToUsersResponse=function(e){var n=new i.h,t=new i.g,l=new i.i("POST",this.rootUrl+"/session/"+e.sessionCode+"/chat/"+e.senderToken,e.chatMessage,{headers:t,params:n,responseType:"json"});return this.http.request(l).pipe(Object(u.filter)(function(e){return e instanceof i.j}),Object(r.map)(function(e){var n=null;return n=e.body,e.clone({body:n})}))},n.prototype.postMedia=function(e,n,t){var l=new i.g;l.append("Content-Type","multipart/form-data"),l.append("Accept","application/json");var o=new i.i("POST",this.rootUrl+"/session/"+n+"/media/"+t,e,{headers:l});return this.http.request(o).toPromise().catch(function(e){console.log("ERROR#####: ",e)})},n.prototype.sendMessageToUsers=function(e){return this.sendMessageToUsersResponse(e).pipe(Object(r.map)(function(e){return e.body}))},n}(o.a))},268:function(e,n,t){"use strict";t.d(n,"a",function(){return a});var l=t(0),i=t(44),o=t(107),r=(t(75),t(46)),u=(t.n(r),t(59)),a=(t.n(u),function(e){function n(n,t){return e.call(this,n,t)||this}return Object(l.__extends)(n,e),n.prototype.getEventsResponse=function(e){var n=new i.h,t=new i.g,l=new i.i("GET",this.rootUrl+"/session/"+e+"/event",null,{headers:t,params:n,responseType:"json"});return this.http.request(l).pipe(Object(u.filter)(function(e){return e instanceof i.j}),Object(r.map)(function(e){var n=null;return n=e.body,e.clone({body:n})}))},n.prototype.getEvents=function(e){return this.getEventsResponse(e).pipe(Object(r.map)(function(e){return e.body}))},n.prototype.getUserEventsResponse=function(e){var n=new i.h,t=new i.g,l=new i.i("GET",this.rootUrl+"/session/"+e.sessionCode+"/user/"+e.userToken+"/events",null,{headers:t,params:n,responseType:"json"});return this.http.request(l).pipe(Object(u.filter)(function(e){return e instanceof i.j}),Object(r.map)(function(e){var n=null;return n=e.body,e.clone({body:n})}))},n.prototype.getUserEvents=function(e){return this.getUserEventsResponse(e).pipe(Object(r.map)(function(e){return e.body}))},n.prototype.addEventsResponse=function(e){var n=new i.h,t=new i.g,l=new i.i("POST",this.rootUrl+"/session/"+e.sessionCode+"/user/"+e.userToken+"/events",e.events,{headers:t,params:n,responseType:"json"});return this.http.request(l).pipe(Object(u.filter)(function(e){return e instanceof i.j}),Object(r.map)(function(e){var n=null;return n=e.body,e.clone({body:n})}))},n.prototype.addEvents=function(e){return this.addEventsResponse(e).pipe(Object(r.map)(function(e){return e.body}))},n.prototype.getAuthorEventsResponse=function(e){var n=new i.h,t=new i.g,l=new i.i("GET",this.rootUrl+"/session/"+e.sessionCode+"/user/"+e.userToken+"/authorEvents/"+e.unixTime,null,{headers:t,params:n,responseType:"json"});return this.http.request(l).pipe(Object(u.filter)(function(e){return e instanceof i.j}),Object(r.map)(function(e){var n=null;return n=e.body,e.clone({body:n})}))},n.prototype.getAuthorEvents=function(e){return this.getAuthorEventsResponse(e).pipe(Object(r.map)(function(e){return e.body}))},n}(o.a))},269:function(e,n,t){"use strict";t.d(n,"a",function(){return a});var l=t(0),i=t(44),o=t(107),r=(t(75),t(46)),u=(t.n(r),t(59)),a=(t.n(u),function(e){function n(n,t){return e.call(this,n,t)||this}return Object(l.__extends)(n,e),n.prototype.getLeaderboardResponse=function(e){var n=new i.h,t=new i.g,l=new i.i("GET",this.rootUrl+"/session/"+e.sessionCode+"/user/"+e.userToken+"/leaderboard",null,{headers:t,params:n,responseType:"json"});return this.http.request(l).pipe(Object(u.filter)(function(e){return e instanceof i.j}),Object(r.map)(function(e){var n=null;return n=e.body,e.clone({body:n})}))},n.prototype.getLeaderboard=function(e){return this.getLeaderboardResponse(e).pipe(Object(r.map)(function(e){return e.body}))},n}(o.a))},271:function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(17);var l=t(272),i=(t(96),this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})}),o=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},r=function(){function e(e,n,t,l){this.navParams=e,this.modalCtrl=n,this.viewCtrl=t,this.inAppBrowser=l,this.tacCheckbox=!1,this.session=this.navParams.data.session,this.navCtrl=this.navParams.data.navCtrl}return e.prototype.cancel=function(){this.viewCtrl.dismiss()},e.prototype.addJoinSession=function(){return i(this,void 0,void 0,function(){var e;return o(this,function(n){return e=this.modalCtrl.create(l.a,{session:this.session,navCtrl:this.navCtrl}),this.cancel(),e.present(),[2]})})},e.prototype.openTermsAndConditions=function(){this.inAppBrowser.create("https://mathcitymap.eu/de/datenschutzerklaerung/","_blank")},e}()},272:function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(17);var l=this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})},i=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},o=function(){function e(e,n,t,l,i){this.viewCtrl=e,this.navParams=n,this.ormService=t,this.modalsService=l,this.sessionService=i,this.teamMemberArray=[],this.codeInput=!1,this.session=n.data.session,this.navCtrl=n.data.navCtrl}return e.prototype.ionViewDidEnter=function(){var e=this;setTimeout(function(){e.input.setFocus()},150)},e.prototype.cancel=function(){this.viewCtrl.dismiss()},e.prototype.start=function(){return l(this,void 0,void 0,function(){var e;return i(this,function(n){switch(n.label){case 0:return null!=this.teamMemberNames&&""!=this.teamMemberNames&&(this.teamMemberArray.push(this.teamMemberNames),this.teamMemberNames=""),[4,this.ormService.findRouteById(this.session.trail_id)];case 1:e=n.sent(),n.label=2;case 2:return n.trys.push([2,5,,6]),[4,this.sessionService.setActiveSession(this.session,this.teamName,this.teamMemberArray)];case 3:return n.sent(),this.cancel(),[4,this.ormService.unlockRoute(e)];case 4:return n.sent(),this.modalsService.showRoute(e,this.navCtrl),[3,6];case 5:return n.sent(),this.cancel(),this.modalsService.showDialog("a_session_not_available_yet","a_session_not_available_yet_text","a_g_ok",function(){}),[3,6];case 6:return[2]}})})},e.prototype.checkInputField=function(){return this.codeInput=""!=this.teamName&&null!=this.teamName&&(""!=this.teamMemberNames&&null!=this.teamMemberNames||0!=this.teamMemberArray.length),this.codeInput},e.prototype.addTeamMemberName=function(e){""!=this.teamMemberNames&&null!=this.teamMemberNames&&(this.teamMemberArray.push(e),this.teamMemberNames="")},e.prototype.removeTeamMemberName=function(e){this.teamMemberArray.splice(e,1)},e}()},278:function(e,n,t){"use strict";function l(e){return r["ɵvid"](0,[(e()(),r["ɵeld"](0,null,null,4,"button",[["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var l=!0;if("click"===n){l=!1!==e.component.goBack()&&l}return l},u.b,u.a)),r["ɵdid"](1097728,[[1,4]],0,a.a,[[8,""],s.a,r.ElementRef,r.Renderer],null,null),(e()(),r["ɵted"](0,["\n                "])),(e()(),r["ɵeld"](0,null,0,0,"img",[["class","header-icon"],["src","assets/icons/back.svg"]],null,null,null,null,null)),(e()(),r["ɵted"](0,["\n            "]))],null,null)}function i(e){return r["ɵvid"](0,[(e()(),r["ɵeld"](0,null,null,5,"button",[["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var l=!0;if("click"===n){l=!1!==e.component.closeModal()&&l}return l},u.b,u.a)),r["ɵdid"](1097728,[[1,4]],0,a.a,[[8,""],s.a,r.ElementRef,r.Renderer],null,null),(e()(),r["ɵted"](0,["\n                "])),(e()(),r["ɵted"](0,["\n                "])),(e()(),r["ɵeld"](0,null,0,0,"img",[["class","header-icon"],["src","assets/icons/back.svg"]],null,null,null,null,null)),(e()(),r["ɵted"](0,["\n            "]))],null,null)}function o(e){return r["ɵvid"](0,[(e()(),r["ɵeld"](0,null,null,26,"ion-header",[],null,null,null,null,null)),r["ɵdid"](16384,null,0,c.a,[s.a,r.ElementRef,r.Renderer,[2,d.a]],null,null),(e()(),r["ɵted"](null,["\n    "])),(e()(),r["ɵeld"](0,null,null,22,"ion-toolbar",[["class","toolbar"],["hideBackButton",""]],[[1,"transparent",0],[2,"statusbar-padding",null]],null,null,f.b,f.a)),r["ɵdid"](49152,null,0,p.a,[s.a,r.ElementRef,r.Renderer],null,null),(e()(),r["ɵted"](3,["\n        "])),(e()(),r["ɵeld"](0,null,0,9,"ion-buttons",[["left",""]],null,null,null,null,null)),r["ɵdid"](16384,null,1,h.a,[s.a,r.ElementRef,r.Renderer,[2,p.a],[2,m.a]],null,null),r["ɵqud"](603979776,1,{_buttons:1}),(e()(),r["ɵted"](null,["\n            "])),(e()(),r["ɵand"](16777216,null,null,1,null,l)),r["ɵdid"](16384,null,0,g.k,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),r["ɵted"](null,["\n            "])),(e()(),r["ɵand"](16777216,null,null,1,null,i)),r["ɵdid"](16384,null,0,g.k,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),r["ɵted"](null,["\n        "])),(e()(),r["ɵted"](3,["\n        "])),(e()(),r["ɵeld"](0,null,3,3,"ion-title",[],null,null,null,v.b,v.a)),r["ɵdid"](49152,null,0,b.a,[s.a,r.ElementRef,r.Renderer,[2,p.a],[2,m.a]],null,null),(e()(),r["ɵted"](0,["",""])),r["ɵpid"](131072,y.a,[_.a,r.ChangeDetectorRef]),(e()(),r["ɵted"](3,["\n        "])),(e()(),r["ɵeld"](0,null,2,2,"ion-buttons",[["end",""]],null,null,null,null,null)),r["ɵdid"](16384,null,1,h.a,[s.a,r.ElementRef,r.Renderer,[2,p.a],[2,m.a]],null,null),r["ɵqud"](603979776,2,{_buttons:1}),(e()(),r["ɵted"](3,["\n    "])),(e()(),r["ɵted"](null,["\n"])),(e()(),r["ɵted"](null,["\n"]))],function(e,n){var t=n.component;e(n,11,0,t.showBackButton&&"ModalCmp"!=t.currentpage);e(n,14,0,"ModalCmp"==t.currentpage)},function(e,n){var t=n.component;e(n,3,0,!!t.transparent||null,r["ɵnov"](n,4)._sbPadding);e(n,19,0,r["ɵunv"](n,19,0,r["ɵnov"](n,20).transform(t.retriveTitle())))})}t.d(n,"a",function(){return w}),n.b=o;var r=t(1),u=t(25),a=t(18),s=t(4),c=t(195),d=t(6),f=t(618),p=t(80),h=t(196),m=t(79),g=t(12),v=t(916),b=t(177),y=t(38),_=t(22),w=r["ɵcrt"]({encapsulation:2,styles:[],data:{}})},279:function(e,n,t){"use strict";t.d(n,"a",function(){return HomePage});t(0),t(17),t(114);var l=this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})},i=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},HomePage=function(){function HomePage(n,t,l,i,o){this.navCtrl=n,this.platform=t,this.splashScreen=l,this.languageService=i,this.helper=o,this.tab1Root="DashboardPage",this.tab2Root="RoutesListPage",this.tab3Root="PortalPage",e.nav=n}return e=HomePage,HomePage.prototype.ionViewWillEnter=function(){return l(this,void 0,void 0,function(){var e=this;return i(this,function(n){return this.platform.ready().then(function(){e.languageService.initialize().then(function(){console.log("Platform is ready!"),e.splashScreen.hide()})}),[2]})})},HomePage;var e}()},28:function(e,n,t){"use strict";t.d(n,"c",function(){return c}),t.d(n,"a",function(){return l}),t.d(n,"b",function(){return d});t(0);var l,i=t(138),o=(t.n(i),t(19)),r=t(164),u=(t(220),t(17),t(64),t(97),t(616)),a=(t.n(u),this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})}),s=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},c=function(){function e(e,n,t){this.pZoomLevel=e,this.pX=n,this.pY=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this.pX},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.pY},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomLevel",{get:function(){return this.pZoomLevel},enumerable:!0,configurable:!0}),e}();!function(e){e[e.FAST=1]="FAST",e[e.SLOW=2]="SLOW",e[e.BAD=3]="BAD",e[e.NONE=4]="NONE"}(l||(l={}));var d=function(){function e(e,t,l,i,o,r,u,a){this.http=e,this.gpsService=t,this.network=l,this.httpClient=i,this.platform=o,this.ormService=r,this.storage=u,this.file=a,this.isOnline=!1,this.devModeEnabled=!1,this.activateAddRouteModal=!1,n.INSTANCE=this,this.init()}return n=e,e.prototype.init=function(){return a(this,void 0,void 0,function(){var e,t=this;return s(this,function(l){switch(l.label){case 0:return e=this,[4,this.storage.get("devMode")];case 1:return e.devModeEnabled="true"===l.sent(),[4,this.platform.ready()];case 2:return l.sent(),this.isOnline=navigator.onLine,console.info("Connection status: "+this.isOnline),n.windowWidth=this.platform.width(),n.windowHeight=this.platform.height(),this.network.onDisconnect().subscribe(function(){console.info("Network disconnected!"),t.isOnline=!1}),this.network.onConnect().subscribe(function(){console.info("Network connected!"),t.isOnline=!0}),[2]}})})},e.prototype.getDistanceToCenterByLatLng=function(e){return e?this.getDistanceToCenter(e.lat,e.lng):0},e.prototype.getDistanceToCenter=function(e,n){var t=-1,l=this.gpsService.getLastPosition();if(l&&l.coords){var i=new Number(l.coords.latitude).valueOf(),o=new Number(l.coords.longitude).valueOf(),r=Math.PI/180,u=i*r,a=e*r,s=(e-i)*r,c=(n-o)*r,d=Math.sin(s/2)*Math.sin(s/2)+Math.cos(u)*Math.cos(a)*Math.sin(c/2)*Math.sin(c/2),f=2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d));t=Math.round(6371e3*f)}return t},e.safeJsonDecode=function(e){return JSON.parse(e.replace(/(?:\r\n|\r|\n)/g,"\\n"))},e.getAngle=function(e,n){return 180*Math.atan2(n.latitude-e.latitude,e.longitude-n.longitude)/Math.PI+270},e.isPluginAvailable=function(e){return!!Object(o.i)(e.getPluginRef(),null,e.getPluginName())},e.prototype.invokeApi=function(e,t,l){var i=this;if(void 0===l&&(l=30),!this.isOnline)return console.warn("No internet!"),new Promise(function(e){return e()});var o=new r.d({"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}),u=new r.g({headers:o}),a="pass="+encodeURI(n.REQUEST_PASS)+"&action="+encodeURI(e);return t&&(a+=t),new Promise(function(t,o){var r=setTimeout(function(){r=null,console.log("server query "+e+" timed out"),o("timeout")},1e3*l);i.http.post(n.API_URL,a,u).toPromise().then(function(e){if(r){clearTimeout(r),console.log("API response: ",e.text().substr(0,255));var n=e.text();if(n&&n.length>0){var l=e.json();t(l)}else o("no response from server")}}).catch(function(e){r&&(clearTimeout(r),console.error("API error(status): ",e.status),console.error("API error: ",JSON.stringify(e)),o(JSON.stringify(e)))})})},e.prototype.checkConnection=function(){return a(this,void 0,void 0,function(){var e,n;return s(this,function(t){switch(t.label){case 0:if(!this.isOnline)return[2,l.NONE];t.label=1;case 1:return t.trys.push([1,3,,4]),e=new Date,[4,this.invokeApi("getVersionsV2",null,2)];case 2:return t.sent(),n=new Date,n.getTime()-e.getTime()<1e3?[2,l.FAST]:[2,l.SLOW];case 3:return t.sent(),[2,l.BAD];case 4:return[2]}})})},e.prototype.setDevMode=function(e){return a(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,this.storage.set("devMode",e)];case 1:return n.sent(),this.devModeEnabled="true"===e,[2]}})})},e.prototype.getDevMode=function(){return this.devModeEnabled},e.prototype.setActivateAddRoute=function(e){this.activateAddRouteModal=e},e.prototype.getActivateAddRoute=function(){return this.activateAddRouteModal},e.prototype.calculateProgress=function(e){return a(this,void 0,void 0,function(){var n,t,l,i,o;return s(this,function(r){switch(r.label){case 0:return[4,e.getTaskCount()];case 1:return n=r.sent(),i=(l=e).getScoreForUser,[4,this.ormService.getActiveUser()];case 2:return t=i.apply(l,[r.sent()]),o=0,o=e.isAnswerFeedbackEnabled()?t.getTasksSolved().length+t.getTasksSolvedLow().length+t.getTasksFailed().length:t.getTasksSaved().length,[2,{totalTasks:n,currentProgress:o}]}})})},e.calculateZoom=function(e){var n=i.GeometryUtil.length([e.getSouthWest(),e.getSouthEast()]),t=i.GeometryUtil.length([e.getNorthWest(),e.getSouthWest()]),l=n/1e3*(t/1e3);return console.log("####Area = ",n/1e3,t/1e3,l),l<=.4?{min_zoom:16,max_zoom:20}:l<=1.5?{min_zoom:16,max_zoom:19}:{min_zoom:15,max_zoom:18}},e.MCM_PASS_TASK="mathcitymap.showTask",e.MCM_PARENT_ROUTELIST="mathcitymap.parentRouteList",e.MCM_ROUTELIST_PUBLIC="mathcitymap.parentRouteListPublic",e.MCM_OSM_LASTCENTER="mathcitymap.lastKnownCenterPoint",e.MCM_OSM_LASTZOOM="mathcitymap.lastZoom",e.MCM_OSM_GUIDESTATE="mathcitymap.osmGuideState",e.MCM_OSM_ONLINE="mathcitymap.osmOnlineMap",e.NEAREST_DEFINTION=1e4,e.DISTANCE_TASK_DISPLAY=50,e.DISTANCE_TASKS_MULTIPLE=15,e.ENABLE_DISTANCE_CHECK=!1,e.routeImageUpdate=0,e.gamification=0,e.max_score=100,e.max_score_mc=75,e.max_score_l=99,e.min_score_l=40,e.min_score_cap=10,e.first_try_bonus=10,e.first_start_bonus=10,e.distance_bonus=15,e.p_second_try=5,e.p_third_try=10,e.studie=!1,e.updated_once=!1,e.min_zoom=15,e.max_zoom=19,e.WEBSERVER_URL="https://mathcitymap.eu/",e.API_URL="https://mathcitymap.eu/db_query_post.php",e.REQUEST_PASS="evilknivel2k16",e.REPLACE_TASK_IMAGE_PATH="mcm_images/tasks/",e.REPLACE_ROUTE_IMAGE_PATH="mcm_images/routes/",e.mapCode="mapbox.streets",e.accessToken="pk.eyJ1IjoiaWd1cmphbm93IiwiYSI6ImNpdmIyNnk1eTAwNzgyenBwajhnc2tub3cifQ.dhXaJJHqLj0_thsU2qTxww",e.mapquestUrl="https://{s}.tiles.mapbox.com/v4/"+n.mapCode+"/{z}/{x}/{y}@2x.png?&tilesize=256&access_token="+n.accessToken,e.subDomains=["a","b","c","d"],e.phone_id="",e.phone_name="",e.testLocation=null,e.myAzimuth=0,e.REQUEST_LOCATION=199,e.windowWidth=0,e.windowHeight=0,e.searchResults=999,e;var n}()},280:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return MCMIconModal});var __WEBPACK_IMPORTED_MODULE_0_tslib__=__webpack_require__(0),__WEBPACK_IMPORTED_MODULE_1__angular_core__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_2_ionic_angular_navigation_nav_params__=__webpack_require__(13),__WEBPACK_IMPORTED_MODULE_3__app_app_component__=__webpack_require__(140),__WEBPACK_IMPORTED_MODULE_4_ionic_angular_navigation_view_controller__=__webpack_require__(6),__WEBPACK_IMPORTED_MODULE_5_ionic_angular__=__webpack_require__(17),__WEBPACK_IMPORTED_MODULE_6__services_images_service__=__webpack_require__(41),MCMIconModal=function(){function MCMIconModal(e,n,t,l){if(this.viewCtrl=n,this.imagesService=l,this.gamificationEnabled=!1,this.narrativeEnabled=!1,this.windowWith=t.width(),this.videoWith=this.windowWith-80,this.videoHeight=.7476923077*this.videoWith,e.data.modalType){if(this.modalType=e.data.modalType,this.buttons=e.data.buttons,e.data.title)this.title="hide"===e.data.title?void 0:e.data.title;else switch(this.modalType){case __WEBPACK_IMPORTED_MODULE_3__app_app_component__.a.hint:this.title="a_btn_hint1";break;case __WEBPACK_IMPORTED_MODULE_3__app_app_component__.a.error:this.title="a_alert_false_answer_title";break;case __WEBPACK_IMPORTED_MODULE_3__app_app_component__.a.solved:this.title="a_alert_right_answer_title";break;case __WEBPACK_IMPORTED_MODULE_3__app_app_component__.a.solvedLow:this.title="a_alert_right_answer_title_low"}if(this.taskDescription=e.data.taskDescription,this.message=e.data.message,this.messages=e.data.messages,this.imageUrl=e.data.imageUrl,this.type=e.data.type,"video"==this.type&&this.message){var i=this.message.split("v=");2==i.length&&(this.videoId=i[1])}}else console.warn("Please provide the modalType!");if(e.data.param&&(this.param=e.data.param),e.data.solution){var o=e.data.solution,r=["L","K","J","H"];this.param||(this.param={});for(var u=0;u<o.length;u++){this.param[r[u]]=e.data.solution[u]}}if(e.data.gamificationEnabled&&(this.gamificationEnabled=e.data.gamificationEnabled),e.data.narrativeEnabled&&(this.narrativeEnabled=e.data.narrativeEnabled),e.data.narrative)switch(this.narrative=e.data.narrative,this.narrative){case"pirates":this.iconPath="pirates/";break;default:this.iconPath=""}else this.iconPath="";if(e.data.score&&(this.score=e.data.score),this.linkyOptions={replaceFn:function(e){return console.log("href = ",e.getAnchorHref()),console.log("text = ",e.getAnchorText()),'<a href="'+e.getAnchorHref()+'">'+e.getAnchorText()+"</a>"}},this.narrativeEnabled)for(var a in this.param)this.title=this.title.replace("###"+a+"###",this.param[a]),this.message=this.message.replace("###"+a+"###",this.param[a])}return MCMIconModal.prototype.ionViewDidEnter=function(){eval('MathJax.Hub.Queue(["Typeset", MathJax.Hub])')},MCMIconModal.prototype.dismiss=function(e){e?this.viewCtrl.dismiss({showMap:!0}):this.viewCtrl.dismiss()},MCMIconModal;var _a,_b,_c,_d}()},282:function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0);var l=function(){function e(){}return e.prototype.transform=function(e,n){return e>0&&e<1e3?e+" "+n:e>1e3?Math.round(e/100)/10+" km":e<=0?"0 "+n:void 0},e}()},283:function(e,n,t){"use strict";t.d(n,"a",function(){return u});var l=t(0),i=t(1),o=t(12),r=t(659),u=(t.n(r),function(){function e(e,n,t,l,i){this.renderer=n,this.ngZone=t,this.platformId=l,this.imagesService=i,this.rootElement=e.nativeElement}return e.prototype.init=function(){var e=this;this.registerIntersectionObserver(),this.observeDOMChanges(this.rootElement,function(){e.getAllImagesToLazyLoad(e.rootElement).forEach(function(n){return e.intersectionObserver.observe(n)})})},e.prototype.ngOnInit=function(){var e=this;this.isBrowser()&&this.ngZone.runOutsideAngular(function(){return e.init()})},e.prototype.ngOnDestroy=function(){this.intersectionObserver&&this.intersectionObserver.disconnect()},e.prototype.isBrowser=function(){return Object(o.t)(this.platformId)},e.prototype.registerIntersectionObserver=function(){var e=this;return this.intersectionObserver=new IntersectionObserver(function(n){return n.forEach(function(n){return e.onIntersectionChange(n)})},this.intersectionObserverConfig instanceof Object?this.intersectionObserverConfig:void 0),this.intersectionObserver},e.prototype.observeDOMChanges=function(e,n){var t=new MutationObserver(function(e){return n(e)});return t.observe(e,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),n(),t},e.prototype.getAllImagesToLazyLoad=function(e){return Array.from(e.querySelectorAll("img[data-src], [data-srcset], [data-background-src], img[data-async-src], [data-async-background-src]"))},e.prototype.onIntersectionChange=function(e){e.isIntersecting&&this.onImageAppearsInViewport(e.target)},e.prototype.onImageAppearsInViewport=function(e){var n=this;e.dataset.asyncSrc&&(this.imagesService.getAsyncImageURL(e.dataset.asyncSrc,this.imageSize).then(function(t){n.renderer.setAttribute(e,"src",t)}),this.renderer.removeAttribute(e,"data-async-src")),e.dataset.src&&(this.renderer.setAttribute(e,"src",e.dataset.src),this.renderer.removeAttribute(e,"data-src")),e.dataset.srcset&&(this.renderer.setAttribute(e,"srcset",e.dataset.srcset),this.renderer.removeAttribute(e,"data-srcset")),e.dataset.asyncBackgroundSrc&&(this.imagesService.getAsyncImageURL(e.dataset.asyncBackgroundSrc,this.imageSize).then(function(t){n.renderer.setStyle(e,"background-image","url("+t+")")}),this.renderer.removeAttribute(e,"data-async-background-src")),e.dataset.backgroundSrc&&(this.renderer.setStyle(e,"background-image","url("+e.dataset.backgroundSrc+")"),this.renderer.removeAttribute(e,"data-background-src")),this.intersectionObserver&&this.intersectionObserver.unobserve(e)},e=Object(l.__decorate)([Object(l.__param)(3,Object(i.Inject)(i.PLATFORM_ID))],e)}())},294:function(e,n,t){"use strict";var l=t(0),i=t(85),o=t(104),r=function(){function e(){this.saved=!1,this.solved=!1,this.solvedLow=!1,this.skipped=!1,this.failed=!1,this.hint1=!1,this.hint2=!1,this.hint3=!1,this.tries=0,this.newTries=0,this.answer="",this.answerMultipleChoice=[],this.timeFirstOpen=0,this.timeSolved=0,this.score=0,this.penalty=0}return e.prototype.getTaskDetailAsJSON=function(){return JSON.stringify({taskId:+this.taskId,saved:this.saved,solved:this.solved,solvedLow:this.solvedLow,skipped:this.skipped,failed:this.failed,hint1:this.hint1,hint2:this.hint2,hint3:this.hint3,tries:+this.tries,newTries:+this.newTries,answer:this.answer,answerMultipleChoice:this.answerMultipleChoice,timeFirstOpen:+this.timeFirstOpen,timeSolved:+this.timeSolved,score:+this.score,penalty:this.penalty})},e.getTaskStateAsJSONArray=function(e){var n=[];return e.forEach(function(e){n.push(e.getTaskDetailAsJSON())}),JSON.stringify(n)},e.prototype.getAllTaskState=function(e){for(var n=JSON.parse(e),t=[],l=0;l<n.length;l++)t.push(this.getTaskStateByTask(n[l]));return t},e.prototype.findDetailsForTask=function(n,t){for(var l=JSON.parse(t),i=0;i<l.length;i++){var o=this.getTaskStateByTask(l[i]);if(o.taskId==n)return o}var r=new e;return r.taskId=n,r},e.prototype.getTaskStateByTask=function(n){var t=JSON.parse(n),l=new e;return l.taskId=t.taskId,l.saved=t.saved,l.solved=t.solved,l.solvedLow=t.solvedLow,l.skipped=t.skipped,l.failed=t.failed,l.hint1=t.hint1,l.hint2=t.hint2,l.hint3=t.hint3,l.tries=t.tries,l.newTries=t.newTries,l.answer=t.answer,l.answerMultipleChoice=t.answerMultipleChoice,l.timeFirstOpen=t.timeFirstOpen,l.timeSolved=t.timeSolved,l.score=t.score,l.penalty=t.penalty,l},e}();t.d(n,"a",function(){return u});var u=function(){function e(){this.tasksSolved="[]",this.tasksSolvedLow="[]",this.tasksFailed="[]",this.tasksSaved="[]",this.taskDetails="[]"}return e.prototype.setTasksSolved=function(e){this.tasksSolved=JSON.stringify(e)},e.prototype.addSolvedTask=function(e){var n=this.getTasksSolved();-1==n.indexOf(e)&&n.push(e),this.setTasksSolved(n)},e.prototype.getTasksSolved=function(){var e=[];return JSON.parse(this.tasksSolved).forEach(function(n){e.push(+n)}),e},e.prototype.setTasksFailed=function(e){this.tasksFailed=JSON.stringify(e)},e.prototype.addFailedTask=function(e){var n=this.getTasksFailed();-1==n.indexOf(e)&&n.push(e),this.setTasksFailed(n)},e.prototype.getTasksFailed=function(){var e=[];return JSON.parse(this.tasksFailed).forEach(function(n){e.push(+n)}),e},e.prototype.setTasksSolvedLow=function(e){this.tasksSolvedLow=JSON.stringify(e)},e.prototype.addSolvedTaskLow=function(e){var n=this.getTasksSolvedLow();-1==n.indexOf(e)&&n.push(e),this.setTasksSolvedLow(n)},e.prototype.getTasksSolvedLow=function(){var e=[];return JSON.parse(this.tasksSolvedLow).forEach(function(n){e.push(+n)}),e},e.prototype.setTasksSaved=function(e){this.tasksSaved=JSON.stringify(e)},e.prototype.addSavedTask=function(e){var n=this.getTasksSaved();-1==n.indexOf(e)&&n.push(e),this.setTasksSaved(n)},e.prototype.getTasksSaved=function(){var e=[];return JSON.parse(this.tasksSaved).forEach(function(n){e.push(+n)}),e},e.prototype.getTaskState=function(){return(new r).getAllTaskState(this.taskDetails)},e.prototype.getTaskStateForTask=function(e){return(new r).findDetailsForTask(e,this.taskDetails)},e.prototype.addTaskStateForTask=function(e,n){for(var t=0;t<e.length;t++){if(n.taskId==e[t].taskId)return e[t]=n,this.setTaskState(e),e}return e.push(n),this.setTaskState(e),e},e.prototype.setTaskState=function(e){this.taskDetails=r.getTaskStateAsJSONArray(e)},Object(l.__decorate)([Object(i.h)({name:"_id"}),Object(l.__metadata)("design:type",Number)],e.prototype,"id",void 0),Object(l.__decorate)([Object(i.a)({name:"user_id"}),Object(l.__metadata)("design:type",Number)],e.prototype,"userId",void 0),Object(l.__decorate)([Object(i.e)(function(e){return o.a},function(e){return e.scores}),Object(i.c)({name:"route_id",referencedColumnName:"id"}),Object(l.__metadata)("design:type","function"==typeof(n=void 0!==o.a&&o.a)&&n||Object)],e.prototype,"route",void 0),Object(l.__decorate)([Object(i.a)(),Object(l.__metadata)("design:type",Number)],e.prototype,"score",void 0),Object(l.__decorate)([Object(i.a)({name:"tasks_solved"}),Object(l.__metadata)("design:type",String)],e.prototype,"tasksSolved",void 0),Object(l.__decorate)([Object(i.a)({name:"tasks_solved_low"}),Object(l.__metadata)("design:type",String)],e.prototype,"tasksSolvedLow",void 0),Object(l.__decorate)([Object(i.a)({name:"tasks_failed"}),Object(l.__metadata)("design:type",String)],e.prototype,"tasksFailed",void 0),Object(l.__decorate)([Object(i.a)({name:"tasks_saved"}),Object(l.__metadata)("design:type",String)],e.prototype,"tasksSaved",void 0),Object(l.__decorate)([Object(i.a)({name:"task_details"}),Object(l.__metadata)("design:type",String)],e.prototype,"taskDetails",void 0),Object(l.__decorate)([Object(i.a)(),Object(l.__metadata)("design:type",Number)],e.prototype,"time",void 0),Object(l.__decorate)([Object(i.a)(),Object(l.__metadata)("design:type",Number)],e.prototype,"distance",void 0),e=Object(l.__decorate)([Object(i.b)("mcm_score")],e);var n}()},295:function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0),t(17),t(43);var l=function(){return function(){}}()},297:function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var l=t(271),i=(t(136),t(17),this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})}),o=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},r=function(){function e(e,n,t,l,i){this.ormService=e,this.modalCtrl=n,this.viewCtrl=t,this.sessionService=l,this.navParams=i,this.code="",this.codeInput=!1,this.navCtrl=i.data.navCtrl}return n=e,e.prototype.ionViewDidEnter=function(){var e=this;setTimeout(function(){e.input.setFocus()},150)},e.prototype.cancel=function(){this.viewCtrl.dismiss()},e.prototype.checkInputField=function(){return this.codeInput=this.code.length>=4},e.prototype.addTrailOrSessionByCode=function(){return i(this,void 0,void 0,function(){var e,n,t;return o(this,function(i){switch(i.label){case 0:return[4,this.ormService.findRouteByCode(this.code)];case 1:if(e=i.sent())return[3,6];n=void 0,i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this.sessionService.getSessionByCode(this.code).toPromise()];case 3:return n=i.sent(),[3,5];case 4:return i.sent(),[3,5];case 5:return n?(t=this.modalCtrl.create(l.a,{session:n,navCtrl:this.navCtrl}),this.cancel(),t.present()):this.showError=!0,[3,8];case 6:return[4,this.ormService.unlockRoute(e)];case 7:i.sent(),this.viewCtrl.dismiss(e),i.label=8;case 8:return[2]}})})},e.show=function(e,t,l,r){return i(this,void 0,void 0,function(){return o(this,function(i){return[2,new Promise(function(i){var o=t.create(n,{navCtrl:e});o.onDidDismiss(function(n){n&&r.showDialog(null,l.instant("a_private_route_added",{T:n.title}),l.instant("a_g_ok"),function(){r.presentRouteInfoModal(n,e)}),i(n)}),o.present()})]})})},e;var n}()},298:function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0);var l=function(){return function(e){this.buttons=e.data.buttons,this.narrative=e.data.narrative,this.title=e.data.title,this.message=e.data.message}}()},299:function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(17);var l=t(279),i=function(){function e(e,n,t,l){var i=this;this.viewCtrl=e,this.navCtrl=n,this.appCtrl=t,this.navParams=l,this.session=l.data.session,this.score=l.data.score,this.tasks=l.data.tasks,this.numberOfSolvedTasks=0;var o=this.score.getTasksSolved(),r=this.score.getTasksSolvedLow(),u=this.score.getTasksSaved();if(this.tasks.map(function(e){(u.indexOf(e.id)>=0||o.indexOf(e.id)>=0||r.indexOf(e.id)>=0)&&i.numberOfSolvedTasks++}),l.data.narrative)switch(this.narrative=l.data.narrative,this.narrative){case"pirates":this.iconPath="pirates/";break;default:this.iconPath=""}else this.iconPath=""}return e.prototype.cancel=function(){this.viewCtrl.dismiss()},e.prototype.backToStart=function(){this.appCtrl.getRootNav().popToRoot(l.a),this.cancel()},e}()},300:function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(17);var l=t(279),i=function(){function e(e,n,t,l){var i=this;this.viewCtrl=e,this.navCtrl=n,this.appCtrl=t,this.navParams=l,this.score=l.data.score,this.tasks=l.data.tasks,this.callback=l.data.callback,this.numberOfSolvedTasks=0;var o=this.score.getTasksSolved(),r=this.score.getTasksSolvedLow(),u=this.score.getTasksSaved();if(this.tasks.map(function(e){(u.indexOf(e.id)>=0||o.indexOf(e.id)>=0||r.indexOf(e.id)>=0)&&i.numberOfSolvedTasks++}),l.data.narrative)switch(this.narrative=l.data.narrative,this.narrative){case"pirates":this.iconPath="pirates/";break;default:this.iconPath=""}else this.iconPath=""}return e.prototype.cancel=function(){this.viewCtrl.dismiss()},e.prototype.backToStart=function(){this.appCtrl.getRootNav().popToRoot(l.a),this.cancel()},e}()},314:function(e,n){function t(e){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+e+"'.")})}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=314},343:function(e,n,t){function l(e){var n=i[e];return n?t.e(n[1]).then(function(){return t(n[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}var i={"../pages/chat/chat.module.ngfactory":[923,10],"../pages/dashboard/dashboard.module.ngfactory":[922,4],"../pages/home/home.module.ngfactory":[924,9],"../pages/home/tabs/RoutesList/RoutesList.module.ngfactory":[925,3],"../pages/home/tabs/RoutesMap/RoutesMap.module.ngfactory":[926,2],"../pages/home/tabs/TasksMap/TasksMap.module.ngfactory":[927,1],"../pages/info/info.module.ngfactory":[928,8],"../pages/onboarding/onboarding.module.ngfactory":[929,7],"../pages/portal/portal.module.ngfactory":[930,6],"../pages/settings/settings.module.ngfactory":[931,5],"../pages/task-detail/task-detail.module.ngfactory":[932,0]};l.keys=function(){return Object.keys(i)},l.id=343,e.exports=l},357:function(e,n,t){"use strict";t.d(n,"a",function(){return s});var l=t(0),i=t(85),o=t(104),r=t(28),u=t(227),a=t(41),s=function(){function e(){}return n=e,e.prototype.getImageURL=function(e){return void 0===e&&(e=!1),a.a.INSTANCE.getOfflineURL(this.image,void 0,void 0,e)},e.prototype.getSingleQuotedImageURL=function(){return"'"+this.getImageURL()+"'"},e.prototype.getImagesForDownload=function(){var e=[];this.image&&e.push(this.image);var n=this.getSolutionSampleImgSrc();if(""!=n&&e.push(n),this.subtasks)for(var t=0,l=this.subtasks;t<l.length;t++){e=e.concat(l[t].getImagesForDownload())}return e.concat(this.getHints().filter(function(e){return"image"==e.type&&e.value&&e.value.trim()}).map(function(e){return e.value.trim()}))},e.prototype.getSolutionOptionList=function(){if("multiple_choice"==this.solutionType){var e=[],n=r.b.safeJsonDecode(this.solution);return n[0].forEach(function(n){e.push({userChecked:!1,rightAnswer:!1,value:n})}),n[1].forEach(function(n){e[n].rightAnswer=!0}),console.log(e),e}return r.b.safeJsonDecode(this.solution)},e.prototype.getSolution=function(){var e=r.b.safeJsonDecode(this.solution);if("vector_values"===this.solutionType||"vector_intervals"===this.solutionType||"set"===this.solutionType||"blanks"===this.solutionType)return e;if("multiple_choice"!=this.solutionType)return e[0];for(var n=this.getSolutionOptionList(),t="",l=0;l<n.length;l++)n[l].rightAnswer&&(""!=t&&(t+=", "),t+=n[l].value);return t},e.prototype.getSolutionList=function(){var e=[];return r.b.safeJsonDecode(this.solution).forEach(function(n){e.push(+n)}),e},e.prototype.getSolutionGpsValue=function(e){if("gps"==this.solutionType){return r.b.safeJsonDecode(this.solution)[e]}return null},e.prototype.getSolutionSample=function(){if(this.solutionSample){var e=r.b.safeJsonDecode(this.solutionSample);if(e.length>0)return e[0]}return""},e.prototype.getSolutionSampleImgSrc=function(){if(!this.solutionSample)return"";var e=r.b.safeJsonDecode(this.solutionSample);return e.length>0?null!=e[1]?e[1]:"":void 0},e.prototype.getAssistiveEquipment=function(){if(this.assistiveEquipment){var e=r.b.safeJsonDecode(this.assistiveEquipment);return null==e?new Array:e}return new Array},e.prototype.getHint=function(e){var n=this.getHintObject(e);return n||null},e.prototype.hasHintMessage=function(e){var n=this.getHint(e);return n?!!n.value:void 0},e.prototype.getHintObject=function(e){var n;switch(e){case 1:n=this.hint1;break;case 2:n=this.hint2;break;case 3:n=this.hint3}if(n&&n.length>0){var t=r.b.safeJsonDecode(n);if(t.length>=2)return{type:t[0],value:t[1]}}return null},e.prototype.getHints=function(){for(var e=[],n=1;n<=3;n++){var t=this.getHintObject(n);t&&e.push(t)}return e},e.prototype.isAttrObject=function(){if(null==this.attr)return!1;try{JSON.parse(this.attr)}catch(e){return!1}return!0},e.prototype.hasSideFacts=function(){if(!this.isAttrObject())return!1;var e=r.b.safeJsonDecode(this.attr);if(e.hasOwnProperty("side_facts")){var n=e.side_facts;return!!n.hasOwnProperty("text")&&""!=n.text}return!1},e.prototype.getSideFactsText=function(){if(this.hasSideFacts()){return r.b.safeJsonDecode(this.attr).side_facts.text}return""},Object(l.__decorate)([Object(i.h)({name:"_id"}),Object(l.__metadata)("design:type",Number)],e.prototype,"id",void 0),Object(l.__decorate)([Object(i.a)({name:"user_id"}),Object(l.__metadata)("design:type",Number)],e.prototype,"userId",void 0),Object(l.__decorate)([Object(i.a)({length:1}),Object(l.__metadata)("design:type",String)],e.prototype,"public",void 0),Object(l.__decorate)([Object(i.a)(),Object(l.__metadata)("design:type",Number)],e.prototype,"lat",void 0),Object(l.__decorate)([Object(i.a)(),Object(l.__metadata)("design:type",Number)],e.prototype,"lon",void 0),Object(l.__decorate)([Object(i.a)(),Object(l.__metadata)("design:type",String)],e.prototype,"title",void 0),Object(l.__decorate)([Object(i.a)(),Object(l.__metadata)("design:type",String)],e.prototype,"description",void 0),Object(l.__decorate)([Object(i.a)(),Object(l.__metadata)("design:type",String)],e.prototype,"image",void 0),Object(l.__decorate)([Object(i.a)({name:"solution_type"}),Object(l.__metadata)("design:type",String)],e.prototype,"solutionType",void 0),Object(l.__decorate)([Object(i.a)(),Object(l.__metadata)("design:type",String)],e.prototype,"solution",void 0),Object(l.__decorate)([Object(i.a)(),Object(l.__metadata)("design:type",String)],e.prototype,"hint1",void 0),Object(l.__decorate)([Object(i.a)(),Object(l.__metadata)("design:type",String)],e.prototype,"hint2",void 0),Object(l.__decorate)([Object(i.a)(),Object(l.__metadata)("design:type",String)],e.prototype,"hint3",void 0),Object(l.__decorate)([Object(i.a)({name:"assistive_equipment"}),Object(l.__metadata)("design:type",String)],e.prototype,"assistiveEquipment",void 0),Object(l.__decorate)([Object(i.a)(),Object(l.__metadata)("design:type",String)],e.prototype,"author",void 0),Object(l.__decorate)([Object(i.a)(),Object(l.__metadata)("design:type",String)],e.prototype,"mail",void 0),Object(l.__decorate)([Object(i.a)({length:2}),Object(l.__metadata)("design:type",String)],e.prototype,"grade",void 0),Object(l.__decorate)([Object(i.a)(),Object(l.__metadata)("design:type",String)],e.prototype,"tags",void 0),Object(l.__decorate)([Object(i.a)({name:"create_date"}),Object(l.__metadata)("design:type",String)],e.prototype,"createDate",void 0),Object(l.__decorate)([Object(i.a)(),Object(l.__metadata)("design:type",String)],e.prototype,"timestamp",void 0),Object(l.__decorate)([Object(i.a)(),Object(l.__metadata)("design:type",String)],e.prototype,"attr",void 0),Object(l.__decorate)([Object(i.a)({name:"solutionsample"}),Object(l.__metadata)("design:type",String)],e.prototype,"solutionSample",void 0),Object(l.__decorate)([Object(i.a)({name:"lang_code"}),Object(l.__metadata)("design:type",String)],e.prototype,"langCode",void 0),Object(l.__decorate)([Object(i.d)(function(e){return o.a},function(e){return e.tasks}),Object(l.__metadata)("design:type",Array)],e.prototype,"routes",void 0),Object(l.__decorate)([Object(i.g)(function(e){return u.a},function(e){return e.task}),Object(l.__metadata)("design:type",Array)],e.prototype,"task2Routes",void 0),Object(l.__decorate)([Object(i.e)(function(e){return n},function(e){return e.subtasks}),Object(i.c)({name:"task_id"}),Object(l.__metadata)("design:type",e)],e.prototype,"task_id",void 0),Object(l.__decorate)([Object(i.g)(function(e){return n},function(e){return e.task_id}),Object(l.__metadata)("design:type",Array)],e.prototype,"subtasks",void 0),e=n=Object(l.__decorate)([Object(i.b)("mcm_task")],e);var n}()},37:function(e,n,t){"use strict";var l=t(0),i=(t(1),t(19)),o=t(166),r=t(85),u=this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})},a=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},InitialMigration1513274191111=function(){function InitialMigration1513274191111(){}return InitialMigration1513274191111.prototype.up=function(e){return u(this,void 0,void 0,function(){return a(this,function(n){switch(n.label){case 0:return[4,e.query("CREATE TABLE IF NOT EXISTS mcm_state (_id INTEGER PRIMARY KEY AUTOINCREMENT,option VARCHAR (64) NOT NULL,value VARCHAR (256) NOT NULL,timestamp TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP)")];case 1:return n.sent(),[4,e.query("CREATE TABLE IF NOT EXISTS mcm_task (_id INTEGER PRIMARY KEY AUTOINCREMENT,user_id INTEGER NOT NULL,public VARCHAR (1) NOT NULL,lat VARCHAR (64) NOT NULL,lon VARCHAR (64) NOT NULL,title TEXT NOT NULL,description TEXT NOT NULL,image TEXT ,solution_type TEXT NOT NULL,solution TEXT NOT NULL,hint1 TEXT ,hint2 TEXT ,hint3 TEXT ,assistive_equipment TEXT ,author TEXT ,mail TEXT ,grade VARCHAR (2) NOT NULL DEFAULT '13',tags TEXT ,timestamp TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,solutionsample TEXT NOT NULL,attr TEXT ,create_date TIMESTAMP NOT NULL,lang_code VARCHAR (2))")];case 2:return n.sent(),[4,e.query("CREATE TABLE IF NOT EXISTS mcm_route (_id INTEGER PRIMARY KEY AUTOINCREMENT,user_id INTEGER NOT NULL,public VARCHAR (1) NOT NULL,title TEXT NOT NULL,country_code TEXT NOT NULL,city TEXT NOT NULL,image TEXT ,code VARCHAR (64),grade TEXT (64),tags VARCHAR ,duration VARCHAR (64),length VARCHAR (64),bounding_box TEXT ,center TEXT ,timestamp TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,description TEXT ,create_date TIMESTAMP NOT NULL,attr TEXT TEXT)")];case 3:return n.sent(),[4,e.query("CREATE TABLE IF NOT EXISTS mcm_rel_route_task (_id INTEGER PRIMARY KEY AUTOINCREMENT,route_id INTEGER (64) NOT NULL,task_id INTEGER (64) NOT NULL,timestamp TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP)")];case 4:return n.sent(),[4,e.query("CREATE TABLE IF NOT EXISTS mcm_users (_id INTEGER PRIMARY KEY AUTOINCREMENT,name VARCHAR (32) NOT NULL,create_date TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP)")];case 5:return n.sent(),[4,e.query("CREATE TABLE IF NOT EXISTS mcm_score (_id INTEGER PRIMARY KEY AUTOINCREMENT,user_id INTEGER (64) NOT NULL,route_id INTEGER (64) NOT NULL,score INTEGER (64) NOT NULL,tasks_solved TEXT ,tasks_solved_low TEXT ,task_details TEXT ,time INTEGER (64),distance INTEGER (64))")];case 6:return n.sent(),[2]}})})},InitialMigration1513274191111.prototype.down=function(e){return u(this,void 0,void 0,function(){return a(this,function(e){return[2]})})},InitialMigration1513274191111}(),s=this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})},c=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},FailedTaskMigration1515428187000=function(){function FailedTaskMigration1515428187000(){}return FailedTaskMigration1515428187000.prototype.up=function(e){return s(this,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return[4,e.query("ALTER TABLE mcm_score ADD tasks_failed TEXT")];case 1:return n.sent(),[2]}})})},FailedTaskMigration1515428187000.prototype.down=function(e){return s(this,void 0,void 0,function(){return c(this,function(e){return[2]})})},FailedTaskMigration1515428187000}(),d=function(){function e(){}return Object(l.__decorate)([Object(r.h)({name:"_id"}),Object(l.__metadata)("design:type",Number)],e.prototype,"id",void 0),Object(l.__decorate)([Object(r.a)({length:32}),Object(l.__metadata)("design:type",String)],e.prototype,"name",void 0),Object(l.__decorate)([Object(r.a)({name:"create_date"}),Object(l.__metadata)("design:type",String)],e.prototype,"createDate",void 0),e=Object(l.__decorate)([Object(r.b)("mcm_users")],e)}(),f=function(){function e(){}return Object(l.__decorate)([Object(r.h)({name:"_id"}),Object(l.__metadata)("design:type",Number)],e.prototype,"id",void 0),Object(l.__decorate)([Object(r.a)({length:64}),Object(l.__metadata)("design:type",String)],e.prototype,"option",void 0),Object(l.__decorate)([Object(r.a)({length:256}),Object(l.__metadata)("design:type",String)],e.prototype,"value",void 0),Object(l.__decorate)([Object(r.a)(),Object(l.__metadata)("design:type",String)],e.prototype,"timestamp",void 0),e=Object(l.__decorate)([Object(r.b)("mcm_state")],e)}(),p=t(357),h=t(104),m=this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})},g=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},AddImageUrlAndDownloadedFlagMigration1513679923000=function(){function AddImageUrlAndDownloadedFlagMigration1513679923000(){}return AddImageUrlAndDownloadedFlagMigration1513679923000.prototype.up=function(e){return m(this,void 0,void 0,function(){return g(this,function(n){switch(n.label){case 0:return[4,e.query("ALTER TABLE mcm_route ADD COLUMN downloaded INTEGER(1)")];case 1:return n.sent(),[2]}})})},AddImageUrlAndDownloadedFlagMigration1513679923000.prototype.down=function(e){return m(this,void 0,void 0,function(){return g(this,function(e){return[2]})})},AddImageUrlAndDownloadedFlagMigration1513679923000}(),v=t(41),b=t(28),y=function(){function e(){}return e.mod=function(e,n){if(e>0)return e%n;for(var t=e;t<0;)t+=n;return t},e}(),_=t(615),w=t(138),T=this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})},R=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},S=function(){function e(){}return e.getTilesCoverageMinMaxZoom=function(n,t,l){for(var i=new Array,o=t;o<=l;o++){console.debug("Calculating ZOOM: "+o);var r=e.getTilesCoverageZoom(n,o);console.debug("Result.size: "+r.length),i=i.concat(r),console.debug("Result.concat.size: "+i.length)}return i},e.getTilesCoverageZoom=function(n,t){var l=new Array,i=1<<t;console.debug("shift attributes "+i),console.debug("south: "+n.getSouth()+" east: "+n.getEast()),console.debug("north: "+n.getNorth()+" west: "+n.getWest());var o=e.getMapTileFromCoordinates(n.getSouth(),n.getEast(),t),r=e.getMapTileFromCoordinates(n.getNorth(),n.getWest(),t);console.debug("lowerRight "+o+" upperLeft "+r);var u=o.x-r.x+1;u<=0&&(u+=i),console.debug("Width: "+u+" "+typeof u);var a=o.y-r.y+1;a<=0&&(a+=i),console.debug("Height: "+a+" "+typeof a);for(var s=0;s<u;s++)for(var c=0;c<a;c++){var d=y.mod(r.x+s,i),f=y.mod(r.y+c,i);l.push(new b.c(t,d,f))}return console.debug("Result.length = "+l.length),l},e.getMapTileFromCoordinates=function(e,n,t){var l=1<<t,i=Math.floor((1-Math.log(Math.tan(e*Math.PI/180)+1/Math.cos(e*Math.PI/180))/Math.PI)/2*l),o=Math.floor((n+180)/360*l);return console.debug("aLat: "+e+" aLon: "+n+" zoom: "+t+" => x: "+o+" y: "+i),new w.Point(o,i)},e.downloadTiles=function(n,t,l,i){return T(this,void 0,void 0,function(){var o,r,u;return R(this,function(a){switch(a.label){case 0:return o=e.getTilesCoverageMinMaxZoom(n.getBoundingBoxLatLng(),t,l),[4,_.a.initialize()];case 1:a.sent(),r=o.map(function(e){var t=n.getTilesServerSubdomains(n.getNarrativeName())[Math.floor(Math.random()*n.getTilesServerSubdomains(n.getNarrativeName()).length)];return n.getTilesMap(n.getNarrativeName()).replace("{s}",t).replace("{z}",String(e.zoomLevel)).replace("{x}",String(e.x)).replace("{y}",String(e.y))}),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,v.a.INSTANCE.downloadURLs(r,!1,i,!0)];case 3:return a.sent(),[3,5];case 4:throw u=a.sent(),console.debug("remove already added tiles because download failed or was aborted"),u;case 5:return[2]}})})},e.getTileURLs=function(n,t,l){return e.getTilesCoverageMinMaxZoom(n.getBoundingBoxLatLng(),t,l).map(function(e){return n.getTilesMap(n.getNarrativeName()).replace("{s}",b.b.subDomains[0]).replace("{z}",String(e.zoomLevel)).replace("{x}",String(e.x)).replace("{y}",String(e.y))})},e}(),E=t(294),k=t(227),O=(t(55),t(43),t(17),this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})}),A=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},AddUnlockedColumn1516037215000=function(){function AddUnlockedColumn1516037215000(){}return AddUnlockedColumn1516037215000.prototype.up=function(e){return O(this,void 0,void 0,function(){return A(this,function(n){switch(n.label){case 0:return[4,e.query("ALTER TABLE mcm_route ADD COLUMN unlocked INTEGER(1)")];case 1:return n.sent(),[2]}})})},AddUnlockedColumn1516037215000.prototype.down=function(e){return O(this,void 0,void 0,function(){return A(this,function(e){return[2]})})},AddUnlockedColumn1516037215000}(),C=this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})},I=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},AddCompletedColumn1519817905000=function(){function AddCompletedColumn1519817905000(){}return AddCompletedColumn1519817905000.prototype.up=function(e){return C(this,void 0,void 0,function(){return I(this,function(n){switch(n.label){case 0:return[4,e.query("ALTER TABLE mcm_route ADD COLUMN completed INTEGER(1)")];case 1:return n.sent(),[2]}})})},AddCompletedColumn1519817905000.prototype.down=function(e){return C(this,void 0,void 0,function(){return I(this,function(e){return[2]})})},AddCompletedColumn1519817905000}(),N=t(21),j=t(374),L=this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})},D=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},AddVisibleColumn1526306624000=function(){function AddVisibleColumn1526306624000(){}return AddVisibleColumn1526306624000.prototype.up=function(e){return L(this,void 0,void 0,function(){return D(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e.query("ALTER TABLE mcm_task ADD COLUMN `visible` INTEGER(1) NOT NULL DEFAULT 1")];case 1:return n.sent(),[3,3];case 2:return n.sent(),console.log("column 'visible' already exists"),[3,3];case 3:return[2]}})})},AddVisibleColumn1526306624000.prototype.down=function(e){return L(this,void 0,void 0,function(){return D(this,function(e){return[2]})})},AddVisibleColumn1526306624000}(),P=this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})},x=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},AddLangCodeColumn1526306730000=function(){function AddLangCodeColumn1526306730000(){}return AddLangCodeColumn1526306730000.prototype.up=function(e){return P(this,void 0,void 0,function(){return x(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e.query("ALTER TABLE mcm_route ADD COLUMN lang_code VARCHAR(2)")];case 1:return n.sent(),[3,3];case 2:return n.sent(),console.log("column 'lang_code' already exists"),[3,3];case 3:return[2]}})})},AddLangCodeColumn1526306730000.prototype.down=function(e){return P(this,void 0,void 0,function(){return x(this,function(e){return[2]})})},AddLangCodeColumn1526306730000}(),U=this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})},M=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},AddDownloadDateColumn15711518720000=function(){function AddDownloadDateColumn15711518720000(){}return AddDownloadDateColumn15711518720000.prototype.up=function(e){return U(this,void 0,void 0,function(){return M(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e.query("ALTER TABLE mcm_route ADD COLUMN downloadedDate VARCHAR(50)")];case 1:return n.sent(),[3,3];case 2:return n.sent(),console.log("column 'lang_code' already exists"),[3,3];case 3:return[2]}})})},AddDownloadDateColumn15711518720000.prototype.down=function(e){return U(this,void 0,void 0,function(){return M(this,function(e){return[2]})})},AddDownloadDateColumn15711518720000}(),B=this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})},V=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},AddCompletedDateColumn15713974540000=function(){function AddCompletedDateColumn15713974540000(){}return AddCompletedDateColumn15713974540000.prototype.up=function(e){return B(this,void 0,void 0,function(){return V(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e.query("ALTER TABLE mcm_route ADD COLUMN completedDate VARCHAR(50)")];case 1:return n.sent(),[3,3];case 2:return n.sent(),console.log("column 'lang_code' already exists"),[3,3];case 3:return[2]}})})},AddCompletedDateColumn15713974540000.prototype.down=function(e){return B(this,void 0,void 0,function(){return V(this,function(e){return[2]})})},AddCompletedDateColumn15713974540000}(),F=this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})},q=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},AddZipMapFields15783117210000=function(){function AddZipMapFields15783117210000(){}return AddZipMapFields15783117210000.prototype.up=function(e){return F(this,void 0,void 0,function(){return q(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e.query("ALTER TABLE mcm_route ADD COLUMN map_version VARCHAR(50)")];case 1:return n.sent(),[3,3];case 2:return n.sent(),console.log("column 'map_version' already exists"),[3,3];case 3:return n.trys.push([3,5,,6]),[4,e.query("ALTER TABLE mcm_route ADD COLUMN map_filename VARCHAR(50)")];case 4:return n.sent(),[3,6];case 5:return n.sent(),console.log("column 'map_filename' already exists"),[3,6];case 6:return n.trys.push([6,8,,9]),[4,e.query("ALTER TABLE mcm_route ADD COLUMN map_date VARCHAR(50)")];case 7:return n.sent(),[3,9];case 8:return n.sent(),console.log("column 'map_date' already exists"),[3,9];case 9:return[2]}})})},AddZipMapFields15783117210000.prototype.down=function(e){return F(this,void 0,void 0,function(){return q(this,function(e){return[2]})})},AddZipMapFields15783117210000}(),G=(t(64),this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})}),H=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},AddSavedTasks16013795030000=function(){function AddSavedTasks16013795030000(){}return AddSavedTasks16013795030000.prototype.up=function(e){return G(this,void 0,void 0,function(){return H(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e.query("ALTER TABLE mcm_score ADD COLUMN tasks_saved VARCHAR(50)")];case 1:return n.sent(),[3,3];case 2:return n.sent(),console.log("column 'tasks_saved' already exists"),[3,3];case 3:return[2]}})})},AddSavedTasks16013795030000.prototype.down=function(e){return G(this,void 0,void 0,function(){return H(this,function(e){return[2]})})},AddSavedTasks16013795030000}(),z=this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})},K=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},AddSubtasks16026790930000=function(){function AddSubtasks16026790930000(){}return AddSubtasks16026790930000.prototype.up=function(e){return z(this,void 0,void 0,function(){return K(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e.query("ALTER TABLE mcm_task ADD COLUMN task_id INTEGER")];case 1:return n.sent(),[3,3];case 2:return n.sent(),console.log("column 'task_id' already exists"),[3,3];case 3:return[2]}})})},AddSubtasks16026790930000.prototype.down=function(e){return z(this,void 0,void 0,function(){return K(this,function(e){return[2]})})},AddSubtasks16026790930000}();t.d(n,"a",function(){return X});var J=this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})},W=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},X=function(){function e(e,t,l,i,o,r){this.imagesService=e,this.spinner=t,this.translateService=l,this.platform=i,this.storage=o,this.alertCtrl=r,this.eventEmitter=new N.Subject,n.INSTANCE=this}return n=e,e.prototype.getConnection=function(){return J(this,void 0,void 0,function(){var e,n,t,l,u;return W(this,function(a){switch(a.label){case 0:return this.connection?[2,this.connection]:[4,this.platform.ready()];case 1:return a.sent(),[4,j.a.getInstance().ready()];case 2:return a.sent(),e=!0===Object(i.i)(o.a.getPluginRef(),null,o.a.getPluginName()),n=[d,h.a,f,p.a,E.a,k.a],t=[InitialMigration1513274191111,AddImageUrlAndDownloadedFlagMigration1513679923000,FailedTaskMigration1515428187000,AddUnlockedColumn1516037215000,AddCompletedColumn1519817905000,AddVisibleColumn1526306624000,AddLangCodeColumn1526306730000,AddDownloadDateColumn15711518720000,AddCompletedDateColumn15713974540000,AddZipMapFields15783117210000,AddSavedTasks16013795030000,AddSubtasks16026790930000],e?(l=this,[4,Object(r.k)({type:"cordova",location:"default",database:"mcm_db.sqlite3",logging:["error"],logger:"simple-console",synchronize:!1,entities:n,migrationsRun:!0,migrations:t})]):[3,4];case 3:return l.connection=a.sent(),[2,this.connection];case 4:return u=this,[4,Object(r.k)({type:"websql",version:"1.0",description:"MCM DB",size:2097152,database:"mcm",logging:["error"],logger:"simple-console",synchronize:!1,entities:n,migrationsRun:!0,migrations:t})];case 5:return u.connection=a.sent(),[2,this.connection]}})})},e.prototype.getTaskRepository=function(){return J(this,void 0,void 0,function(){var e;return W(this,function(n){switch(n.label){case 0:return[4,this.getConnection()];case 1:return e=n.sent(),[2,e.getRepository(p.a)]}})})},e.prototype.getStateRepository=function(){return J(this,void 0,void 0,function(){var e;return W(this,function(n){switch(n.label){case 0:return[4,this.getConnection()];case 1:return e=n.sent(),[2,e.getRepository(f)]}})})},e.prototype.getScoreRepository=function(){return J(this,void 0,void 0,function(){var e;return W(this,function(n){switch(n.label){case 0:return[4,this.getConnection()];case 1:return e=n.sent(),[2,e.getRepository(E.a)]}})})},e.prototype.getRouteRepository=function(){return J(this,void 0,void 0,function(){var e;return W(this,function(n){switch(n.label){case 0:return[4,this.getConnection()];case 1:return e=n.sent(),[2,e.getRepository(h.a)]}})})},e.prototype.getUserRepository=function(){return J(this,void 0,void 0,function(){var e;return W(this,function(n){switch(n.label){case 0:return[4,this.getConnection()];case 1:return e=n.sent(),[2,e.getRepository(d)]}})})},e.prototype.findRouteById=function(e){return J(this,void 0,void 0,function(){var n;return W(this,function(t){switch(t.label){case 0:return[4,this.getRouteRepository()];case 1:return n=t.sent(),[4,n.findOneById(e)];case 2:return[2,t.sent()]}})})},e.prototype.findRouteByCode=function(e){return J(this,void 0,void 0,function(){var n;return W(this,function(t){switch(t.label){case 0:return[4,this.getRouteRepository()];case 1:return n=t.sent(),[4,n.findOne({where:{code:e}})];case 2:return[2,t.sent()]}})})},e.prototype.findScoreByRoute=function(e){return J(this,void 0,void 0,function(){var n;return W(this,function(t){switch(t.label){case 0:return[4,this.getScoreRepository()];case 1:return n=t.sent(),[4,n.findOne({where:{routeId:e}})];case 2:return[2,t.sent()]}})})},e.prototype.getAllTasks=function(){return J(this,void 0,void 0,function(){var e,n,t;return W(this,function(l){switch(l.label){case 0:return[4,this.getTaskRepository()];case 1:return e=l.sent(),[4,e.find({relations:["routes"]})];case 2:return n=l.sent(),t=[],n.forEach(function(e){-1==t.indexOf(e.solutionType)&&t.push(e.solutionType),"gps"==e.solutionType&&"1"==e.public&&e.routes.forEach(function(n){"1"==n.public&&(console.log(n),console.log(e))})}),[2]}})})},e.prototype.findTaskById=function(e){return J(this,void 0,void 0,function(){var n;return W(this,function(t){switch(t.label){case 0:return[4,this.getTaskRepository()];case 1:return n=t.sent(),[4,n.createQueryBuilder("tasks").where({id:e}).leftJoinAndSelect("tasks.subtasks","subtasks").getOne()];case 2:return[2,t.sent()]}})})},e.prototype.insertOrUpdateTaskState=function(e,t){return J(this,void 0,void 0,function(){var l,i;return W(this,function(o){switch(o.label){case 0:return[4,this.getScoreRepository()];case 1:return l=o.sent(),e.addTaskStateForTask(e.getTaskState(),t),[4,this.getActiveUser()];case 2:return i=o.sent(),e.userId=i.id,[4,l.save(e)];case 3:return o.sent(),this.eventEmitter.next(n.EVENT_ROUTES_CHANGED),[2]}})})},e.prototype.deleteUserScore=function(e){return J(this,void 0,void 0,function(){var n;return W(this,function(t){switch(t.label){case 0:return[4,this.getScoreRepository()];case 1:return n=t.sent(),[4,n.deleteById(e.id)];case 2:return t.sent(),[2]}})})},e.prototype.setNewActiveUser=function(e){return J(this,void 0,void 0,function(){var n,t;return W(this,function(l){switch(l.label){case 0:return[4,this.getUserRepository()];case 1:return n=l.sent(),t=new d,t.name=e,[4,this.setActiveUser(e)];case 2:return l.sent(),[4,n.save(t)];case 3:return l.sent(),[2,t]}})})},e.prototype.setActiveUser=function(e){return J(this,void 0,void 0,function(){var n,t;return W(this,function(l){switch(l.label){case 0:return[4,this.getStateRepository()];case 1:return n=l.sent(),[4,n.findOne({where:{option:"active_user"}})];case 2:return(t=l.sent())||((t=new f).option="active_user"),t.value=e,[4,n.save(t)];case 3:return l.sent(),[2]}})})},e.prototype.getActiveUser=function(){return J(this,void 0,void 0,function(){var e,n,t;return W(this,function(l){switch(l.label){case 0:return[4,this.getStateRepository()];case 1:return e=l.sent(),[4,e.findOne({where:{option:"active_user"}})];case 2:return n=l.sent(),t=null,n&&n.value?[4,this.getUserByName(n.value)]:[3,4];case 3:t=l.sent(),l.label=4;case 4:return[2,t]}})})},e.prototype.checkUsername=function(e){return J(this,void 0,void 0,function(){return W(this,function(n){switch(n.label){case 0:return[4,this.getUserByName(e)];case 1:return n.sent()?[2,!0]:[2,!1]}})})},e.prototype.getUserByName=function(e){return J(this,void 0,void 0,function(){var n;return W(this,function(t){switch(t.label){case 0:return[4,this.getUserRepository()];case 1:return n=t.sent(),[4,n.findOne({where:{name:e}})];case 2:return[2,t.sent()]}})})},e.prototype.getVisibleRoutes=function(e,n,t){return void 0===e&&(e=!0),void 0===n&&(n=null),void 0===t&&(t=!1),J(this,void 0,void 0,function(){var l,i,o=this;return W(this,function(r){switch(r.label){case 0:return e&&this.spinner.show(null,this.translateService.instant("a_toast_routes_loading"),!0),!t&&this.visibleRoutesCache?[2,new Promise(function(t){setTimeout(function(){n&&o.visibleRoutesCache.sort(n),e&&setTimeout(function(){o.spinner.hide()},100),t(o.visibleRoutesCache)},100)})]:[4,this.getRouteRepository()];case 1:return l=r.sent(),[4,l.createQueryBuilder("r").where("r.map_version != 0").andWhere("r.public = 1").orWhere("r.unlocked = 1").getMany()];case 2:return i=r.sent(),n&&i.sort(n),this.visibleRoutesCache?(this.visibleRoutesCache.splice(0,this.visibleRoutesCache.length),i.map(function(e){return o.visibleRoutesCache.push(e)})):this.visibleRoutesCache=i,e&&setTimeout(function(){o.spinner.hide()},100),[2,this.visibleRoutesCache]}})})},e.prototype.getDownloadedRoutes=function(e){return void 0===e&&(e=null),J(this,void 0,void 0,function(){var n,t;return W(this,function(l){switch(l.label){case 0:return[4,this.getRouteRepository()];case 1:return n=l.sent(),[4,n.find({where:{downloaded:"1"}})];case 2:return t=l.sent(),t=t.filter(function(e){return"0"!=e.mapVersion}),e&&t.sort(e),[2,t]}})})},e.prototype.getUnlockedRoutes=function(){return J(this,void 0,void 0,function(){var e,n;return W(this,function(t){switch(t.label){case 0:return[4,this.getRouteRepository()];case 1:return e=t.sent(),[4,e.find({where:{unlocked:"1"}})];case 2:return n=t.sent(),n=n.filter(function(e){return"0"!=e.mapVersion}),[2,n]}})})},e.prototype.getCompletedRoutes=function(){return J(this,void 0,void 0,function(){var e,n;return W(this,function(t){switch(t.label){case 0:return[4,this.getRouteRepository()];case 1:return e=t.sent(),[4,e.find({where:{completed:"1"}})];case 2:return n=t.sent(),n=n.filter(function(e){return"0"!=e.mapVersion}),[2,n]}})})},e.prototype.downloadRoute=function(e,n,t){return J(this,void 0,void 0,function(){var l,i,o,r,u,a,s;return W(this,function(c){switch(c.label){case 0:l=[],c.label=1;case 1:return c.trys.push([1,11,,13]),[4,t.downloadRouteTasksData(e,this.translateService.instant("a_language_code"))];case 2:return c.sent(),n(0,0,"a_rdl_title_map"),e.isNarrativeEnabled()?[3,4]:[4,this.imagesService.downloadAndUnzip(e,function(e){return n(e,100)},function(e){l.push(e)})];case 3:return c.sent(),[3,6];case 4:return i=b.b.calculateZoom(e.getViewBoundingBoxLatLng()),[4,S.downloadTiles(e,i.min_zoom,i.max_zoom,function(e,t,i){return l.push(i),n(e,t)})];case 5:c.sent(),c.label=6;case 6:return r=(o=this.imagesService).downloadURLs,u=this.getDownloadImagesForTasks,[4,e.getTasks()];case 7:return[4,r.apply(o,[u.apply(this,[c.sent()]),!1,function(e,t,i){return l.push(i),n(e,t,"a_rdl_title_img")}])];case 8:return c.sent(),e.downloaded=!0,e.downloadedDate=(new Date).toDateString().split(" ").slice(1).join(" "),[4,this.getRouteRepository()];case 9:return a=c.sent(),[4,a.save(e)];case 10:return c.sent(),this.updateRouteInCache(e),[3,13];case 11:return s=c.sent(),console.log("download failed or was aborted"),s.message&&console.log(s.message),s.http_status&&404===s.http_status&&(this.alertCtrl.create({title:this.translateService.instant("a_missing_map_data_error_msg"),buttons:[{text:this.translateService.instant("a_g_ok"),role:"cancel"}]}).present(),b.b.INSTANCE.invokeApi("downloadTrailFailed","&route_id="+e.id)),console.log(s),[4,this.imagesService.removeDownloadedURLs(l,!1)];case 12:return c.sent(),[3,13];case 13:return[2]}})})},e.prototype.getTileURLs=function(e){var n=b.b.calculateZoom(e.getViewBoundingBoxLatLng());return S.getTileURLs(e,n.min_zoom,n.max_zoom)},e.prototype.getTileURLsAsObject=function(e){for(var n={},t=0,l=this.getTileURLs(e);t<l.length;t++){n[l[t]]=!0}return n},e.prototype.getDownloadImagesForTasks=function(e){var n=[];return e.map(function(e){return e.getImagesForDownload()}).map(function(e){n=n.concat(e)}),n},e.prototype.removeDownloadedRoute=function(e,n){return void 0===n&&(n=!1),J(this,void 0,void 0,function(){var t,l,i,o,r,u,a;return W(this,function(s){switch(s.label){case 0:return[4,this.getActiveUser()];case 1:return t=s.sent(),l=this.deleteUserScore,[4,this.findRouteById(e.id)];case 2:return[4,l.apply(this,[s.sent().getScoreForUser(t)])];case 3:return s.sent(),n?[4,this.imagesService.removeDownloadedURLs(this.getTileURLs(e),!1)]:[3,5];case 4:s.sent(),s.label=5;case 5:return o=(i=this.imagesService).removeDownloadedURLs,r=this.getDownloadImagesForTasks,[4,e.getTasks()];case 6:return o.apply(i,[r.apply(this,[s.sent()]),!1]),[4,this.storage.get("savedMapStateByRoute")];case 7:return u=s.sent(),delete u[e.id],this.storage.set("savedMapStateByRoute",u),e.downloaded=null,e.downloadedDate=null,e.completed=null,e.completedDate=null,[4,this.getRouteRepository()];case 8:return a=s.sent(),[4,a.save(e)];case 9:return s.sent(),this.updateRouteInCache(e),[2,e]}})})},e.prototype.unlockRoute=function(e){return J(this,void 0,void 0,function(){return W(this,function(n){switch(n.label){case 0:return e.unlocked=!0,[4,this.getRouteRepository()];case 1:return n.sent().save(e),this.imagesService.downloadURLs([e.image],!0),this.updateRouteInCache(e),[2]}})})},e.prototype.saveAndFireChangedEvent=function(e){return J(this,void 0,void 0,function(){return W(this,function(t){switch(t.label){case 0:return[4,this.getRouteRepository()];case 1:return[4,t.sent().save(e)];case 2:return t.sent(),this.updateRouteInCache(e),this.eventEmitter.next(n.EVENT_ROUTES_CHANGED),[2]}})})},e.prototype.removeAllDownloadedData=function(){return J(this,void 0,void 0,function(){var e,t,l,i;return W(this,function(o){switch(o.label){case 0:return[4,this.getDownloadedRoutes()];case 1:e=o.sent(),t=0,l=e,o.label=2;case 2:return t<l.length?(i=l[t],[4,this.removeDownloadedRoute(i,!0)]):[3,5];case 3:o.sent(),o.label=4;case 4:return t++,[3,2];case 5:return this.eventEmitter.next(n.EVENT_ROUTES_CHANGED),[2]}})})},e.prototype.updateRouteInCache=function(e){if(this.visibleRoutesCache)for(var t=0;t<this.visibleRoutesCache.length;t++)if(this.visibleRoutesCache[t].id==e.id){this.visibleRoutesCache[t]=e;break}this.eventEmitter.next(n.EVENT_ROUTES_CHANGED)},e.EVENT_ROUTES_CHANGED="EVENT_ROUTES_CHANGED",e;var n}()},374:function(e,n,t){"use strict";t.d(n,"a",function(){return c});var l=t(166),i=t(375),o=t(239),r=(t.n(o),t(19)),u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function l(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(l.prototype=t.prototype,new l)}}(),a=function(e){function n(){return e.call(this,openDatabase("mcm","1.0","MCM DB",2097152))||this}return u(n,e),n.prototype.executeSql=function(e,n){var t=this;return new Promise(function(l,i){t._objectInstance.transaction(function(t){console.debug(e),t.executeSql(e,n,function(e,n){l(n)},function(e,n){i(n)})})})},n}(l.b),s=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return u(n,e),n.prototype.create=function(e){return new Promise(function(e,n){e(new a)})},n}(l.a),c=function(){function e(){this.mSQLite=null,this.mDB=null,this.mReady=!1,this.cache={}}return e.getInstance=function(){return null===this.mInstance&&(this.mInstance=new e),this.mInstance},e.prototype.ready=function(){var e=this;return this.mReady?Promise.resolve():new Promise(function(n,t){e.mSQLite=!0===Object(r.i)(l.a.getPluginRef(),null,l.a.getPluginName())?new l.a:new s,e.mSQLite.create({name:"mcm_db.sqlite3",location:"default"}).then(function(t){e.mDB=t,e.mReady=!0,console.log("Connected to DB"),e.onCreate().then(function(){e.mReady=!0,n()})}).catch(function(e){console.error("Error connecting to DB",JSON.stringify(e)),t(e)})})},e.prototype.onCreate=function(){var e=this,n=i.a.DB_STATE.getCreateStatement(),t=i.a.DB_TASK.getCreateStatement(),l=i.a.DB_ROUTE.getCreateStatement(),o=i.a.DB_RELROUTETASK.getCreateStatement(),r=i.a.DB_USERS.getCreateStatement(),u=i.a.DB_SCORE.getCreateStatement();return new Promise(function(i,a){Promise.all([e.mDB.executeSql(n,null),e.mDB.executeSql(t,null),e.mDB.executeSql(l,null),e.mDB.executeSql(o,null),e.mDB.executeSql(r,null),e.mDB.executeSql(u,null)]).then(function(){i()}).catch(function(e){a(e)})})},e.prototype.initTableVersions=function(){var e=this;return new Promise(function(n,t){var l="INSERT INTO "+i.a.DATABASE_TABLE_STATE+" ("+i.a.DB_STATE.fields[1]+","+i.a.DB_STATE.fields[2]+") VALUES (?,?)";Promise.all([e.mDB.executeSql(l,["version_task","0"]),e.mDB.executeSql(l,["version_route","0"]),e.mDB.executeSql(l,["version_rel_route_task","0"])]).then(function(){n()}).catch(t)})},e.prototype._getTableVersions=function(e){for(var n=new o.Dictionary,t=0;t<e.rows.length;t++){var l=e.rows.item(t);n.setValue(l.option,l.value)}return n},e.prototype.getDB=function(){return this.mDB},e.prototype.getTableVersions=function(){var e=this;return new Promise(function(n,t){var l="SELECT "+i.a.DB_STATE.fields[1]+","+i.a.DB_STATE.fields[2]+" FROM "+i.a.DATABASE_TABLE_STATE;e.mDB.executeSql(l,[]).then(function(i){console.log("TABLE VERSIONS:",i.rows.length),i.rows.length<3?(console.warn("ZERO RESULTS: call initTableVersions"),e.initTableVersions().then(function(){console.log("RECEIVED RESULTS, REPEATING SQL"),e.mDB.executeSql(l,[]).then(function(t){console.log("RECEIVED RESULTS",t.rows.length),n(e._getTableVersions(t))}).catch(t)}).catch(t)):n(e._getTableVersions(i))}).catch(function(e){console.error("DB_Handler.getTableVersions(): Error:",e),t(e)})})},e.prototype.getTrailsImageInfo=function(){var e=this;return new Promise(function(n,t){e.mDB.executeSql("SELECT public,image FROM "+i.a.DATABASE_TABLE_ROUTE+" WHERE public = 1",null).then(function(e){for(var t=null,l=0;l<e.rows.length;l++){var i=[e.rows.item(l).public,e.rows.item(l).image];null===t?t=[i]:t.push(i)}n(t)}).catch(function(e){t(e)})})},e.mInstance=null,e}()},375:function(e,n,t){"use strict";var l=t(239),i=function(){function e(e,n,t,l){this.tableName=e,this.fields=n,this.fieldsType=t,this.attributes=l,this.fieldsCount=n.length}return e.prototype.getCreateStatement=function(){for(var e="CREATE TABLE IF NOT EXISTS "+this.tableName+" (",n=0;n<this.fields.length;n++)e+=this.fields[n]+" "+this.fieldsType[n]+" "+this.attributes[n],n<this.fields.length-1&&(e+=",");return e+")"},e.prototype.getFieldsInScopes=function(){for(var e="(",n=0;n<this.fields.length;n++)e+=n<this.fields.length-1?this.fields[n]+", ":this.fields[n];return e+")"},e.prototype.getFieldsPlaceholders=function(){for(var e="(",n=0;n<this.fields.length;n++)e+=n<this.fields.length-1?"?, ":"?";return e+")"},e.prototype.getTableName=function(){return this.tableName},e}();t.d(n,"a",function(){return o});var o=function(){function e(){}return e.initialize=function(){null===e.MAP_DB&&((e.MAP_DB=new l.Dictionary).setValue(e.DATABASE_TABLE_REL_ROUTE_TASK,e.DB_RELROUTETASK),e.MAP_DB.setValue(e.DATABASE_TABLE_ROUTE,e.DB_ROUTE),e.MAP_DB.setValue(e.DATABASE_TABLE_STATE,e.DB_STATE),e.MAP_DB.setValue(e.DATABASE_TABLE_TASK,e.DB_TASK),e.MAP_DB.setValue(e.DATABASE_TABLE_USERS,e.DB_USERS),e.MAP_DB.setValue(e.DATABASE_TABLE_SCORE,e.DB_SCORE))},e.DATABASE_NAME="mcm_app",e.DATABASE_VERSION=32,e.DATABASE_TABLE_STATE="mcm_state",e.DATABASE_TABLE_TASK="mcm_task",e.DATABASE_TABLE_TASKMETA="mcm_task_meta",e.DATABASE_TABLE_ROUTE="mcm_route",e.DATABASE_TABLE_ROUTEMETA="mcm_route_meta",e.DATABASE_TABLE_REL_ROUTE_TASK="mcm_rel_route_task",e.DATABASE_TABLE_USERS="mcm_users",e.DATABASE_TABLE_SCORE="mcm_score",e.ON_ROUTE_DATA="route_id_data_dl",e.ON_ROUTE_DONE="route_id_done",e.ON_ROUTE_PRIVATE_ACCESS="route_id_private_access",e.ON_TASK_HINT1_TAKEN="task_id_hint1_taken",e.ON_TASK_HINT2_TAKEN="task_id_hint2_taken",e.ON_TASK_HINT3_TAKEN="task_id_hint3_taken",e.ON_TASK_SOLVED="task_id_solved",e.ON_TASK_SOLVED_LOW="task_id_solved_low",e.ON_ACTIVE_USER="active_user",e.ON_GAMIFICATION="gamification",e.DB_STATE=new i(e.DATABASE_TABLE_STATE,["_id","option","value","timestamp"],["INTEGER","VARCHAR","VARCHAR","TIMESTAMP"],["PRIMARY KEY AUTOINCREMENT","(64) NOT NULL","(256) NOT NULL","NOT NULL DEFAULT CURRENT_TIMESTAMP"]),e.DB_TASK=new i(e.DATABASE_TABLE_TASK,["_id","user_id","public","lat","lon","title","description","image","solution_type","solution","hint1","hint2","hint3","assistive_equipment","author","mail","grade","tags","timestamp","solutionsample","attr","create_date","lang_code","visible","task_id"],["INTEGER","INTEGER","VARCHAR","VARCHAR","VARCHAR","TEXT","TEXT","TEXT","TEXT","TEXT","TEXT","TEXT","TEXT","TEXT","TEXT","TEXT","VARCHAR","TEXT","TIMESTAMP","TEXT","TEXT","TIMESTAMP","VARCHAR","INTEGER","INTEGER"],["PRIMARY KEY AUTOINCREMENT","NOT NULL","(1) NOT NULL","(64) NOT NULL","(64) NOT NULL","NOT NULL","NOT NULL","","NOT NULL","NOT NULL","","","","","","","(2) NOT NULL DEFAULT '13'","","NOT NULL DEFAULT CURRENT_TIMESTAMP","NOT NULL","","NOT NULL","(2)","(1) NOT NULL DEFAULT 1",""]),e.DB_ROUTE=new i(e.DATABASE_TABLE_ROUTE,["_id","user_id","public","title","country_code","city","image","code","grade","tags","duration","length","bounding_box","center","timestamp","description","create_date","attr","lang_code","map_version","map_filename","map_date"],["INTEGER","INTEGER","VARCHAR","TEXT","TEXT","TEXT","TEXT","VARCHAR","TEXT","VARCHAR","VARCHAR","VARCHAR","TEXT","TEXT","TIMESTAMP","TEXT","TIMESTAMP","TEXT","VARCHAR","TEXT","TEXT","TEXT"],["PRIMARY KEY AUTOINCREMENT","NOT NULL","(1) NOT NULL","NOT NULL","NOT NULL","NOT NULL","","(64)","(64)","","(64)","(64)","","","NOT NULL DEFAULT CURRENT_TIMESTAMP","","NOT NULL","","(2)","","",""]),e.DB_RELROUTETASK=new i(e.DATABASE_TABLE_REL_ROUTE_TASK,["_id","route_id","task_id","timestamp"],["INTEGER","INTEGER","INTEGER","TIMESTAMP"],["PRIMARY KEY AUTOINCREMENT","(64) NOT NULL","(64) NOT NULL","NOT NULL DEFAULT CURRENT_TIMESTAMP"]),e.DB_USERS=new i(e.DATABASE_TABLE_USERS,["_id","name","create_date"],["INTEGER","VARCHAR","TIMESTAMP"],["PRIMARY KEY AUTOINCREMENT","(32) NOT NULL","NOT NULL DEFAULT CURRENT_TIMESTAMP"]),e.DB_SCORE=new i(e.DATABASE_TABLE_SCORE,["_id","user_id","route_id","score","tasks_solved","tasks_solved_low","task_details","time","distance"],["INTEGER","INTEGER","INTEGER","INTEGER","TEXT","TEXT","TEXT","INTEGER","INTEGER"],["PRIMARY KEY AUTOINCREMENT","(64) NOT NULL","(64) NOT NULL","(64) NOT NULL","","","","(64)","(64)"]),e.MAP_DB=null,e}();o.initialize()},41:function(e,n,t){"use strict";t.d(n,"a",function(){return c});t(0);var l=t(19),i=t(97),o=(t(17),t(228),t(642)),r=t.n(o),u=t(28),a=this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})},s=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},c=function(){function e(e,t,l,i,o,r){this.fileManager=e,this.platform=t,this.transfer=l,this.http=i,this.httpClient=o,this.sanitizer=r,this.isInitialized=!1,this.downloadQueue=null,this.offlineImageUrlCache={},this.offlineThumbnailUrlCache={},this.lazyLoadedImagesCache={},n.INSTANCE=this,this.init()}return n=e,e.prototype.saveThumb=function(e,n,t){console.log("saving thumbnail to "+e),fetch(n).then(function(n){n.blob().then(function(n){t.writeFile(t.dataDirectory,e,n,{replace:!0}).then(function(e){},function(e){return console.error("Write error: "+JSON.stringify(e))}).catch(function(e){return console.error("Write error: "+JSON.stringify(e))})},function(e){return console.error("Blob error: "+JSON.stringify(e))}).catch(function(e){return console.error("Blob error: "+JSON.stringify(e))})}).then(function(e){return console.log(e)})},e.prototype.resizedataURL=function(e,n,t){return new Promise(function(l,i){var o=document.createElement("img");o.onload=function(){var e=document.createElement("canvas"),i=e.getContext("2d");e.width=n,e.height=t,i.drawImage(o,0,0,n,t);var r=e.toDataURL();l(r)},o.src=e})},e.prototype.isFilePluginAvailable=function(){return this.filePluginAvailable},e.prototype.init=function(){return a(this,void 0,void 0,function(){var e;return s(this,function(n){switch(n.label){case 0:return this.isInitialized?[2,this.nativeBaseURL]:[4,this.platform.ready()];case 1:return n.sent(),this.filePluginAvailable=!0===Object(l.i)(i.a.getPluginRef(),null,i.a.getPluginName()),this.filePluginAvailable?(e=this,[4,this.fileManager.resolveDirectoryUrl(this.fileManager.dataDirectory)]):[3,3];case 2:e.dataDirectory=n.sent(),this.nativeBaseURL=this.dataDirectory.nativeURL,n.label=3;case 3:return this.isInitialized=!0,[2,this.nativeBaseURL]}})})},e.prototype.downloadURLs=function(e,n,t,l){return void 0===t&&(t=null),void 0===l&&(l=!1),a(this,void 0,void 0,function(){var i,o,a,c,d,f,p,h,m,g,v,b,y,_=this;return s(this,function(w){switch(w.label){case 0:if(!this.isFilePluginAvailable())return[2];i=null,o=this.transfer.create(),a=this.fileManager.dataDirectory,c=this.fileManager,d=this.resizedataURL,f=this.saveThumb,p=e.length,h=0,m=this,this.downloadQueue=r.a.queue(function(e,l){function r(){if(h++,console.log("download progress: "+h+"/"+p+" - "+e.imgFileName),e.callback&&e.callback(h,p,e.imgFileName),t&&t(h,p,e.imgFileName))return m.downloadQueue.kill(),void i("user canceled download");l()}console.log("Starting download task for "+e.outputName);var s=0===e.imgFileName.indexOf("http")?e.imgFileName:u.b.WEBSERVER_URL+encodeURI(e.imgFileName);setTimeout(function(){o.download(s,a+e.outputName).then(function(){n?c.readAsDataURL(a,e.outputName).then(function(n){d(n,120,120).then(function(n){f(m.getLocalThumbFileName(e.imgFileName),n,c),r()}).catch(function(e){console.error("saveThumb error "+JSON.stringify(e)),r()})},function(e){console.error("readAsDataURL error: "+JSON.stringify(e)),r()}).catch(function(e){console.error("readAsDataURL error: "+JSON.stringify(e)),r()}):r()}).catch(function(n){console.error("Error downloading image "+e.imgFileName),r()})},50)},8),g=new Promise(function(e,n){i=n,_.downloadQueue.drain=e}),v=function(){var n,i,r,u,a;return s(this,function(s){switch(s.label){case 0:return(n=e[y])&&""!==n.trim()&&"null"!==n.toLowerCase()?(i=b.getLocalFileName(n),r=void 0,(u=!l)?(a=null,[4,b.fileManager.getFile(b.dataDirectory,i,{create:!1}).then(function(e){return e},function(e){return null})]):[3,2]):[2,"continue"];case 1:u=a!==(r=s.sent()),s.label=2;case 2:return u?r.file(function(l){l.size<=0?_.downloadQueue.push({fileTransfer:o,imgFileName:n,outputName:i,callback:1==e.length?t:null},function(){console.log("Finished downloading "+i)}):(h++,t&&(console.log("Already downloaded: "+i),t(h,p,n)))},function(l){_.downloadQueue.push({fileTransfer:o,imgFileName:n,outputName:i,callback:1==e.length?t:null},function(){console.log("Finished downloading "+i)})}):(console.log("Adding to download queue: "+i),b.downloadQueue.push({fileTransfer:o,imgFileName:n,outputName:i,callback:1==e.length?t:null},function(){console.log("Finished downloading "+i)})),[2]}})},b=this,y=0,w.label=1;case 1:return y<e.length?[5,v()]:[3,4];case 2:w.sent(),w.label=3;case 3:return y++,[3,1];case 4:return 0===this.downloadQueue.length()?[2]:[2,g]}})})},e.prototype.getLocalFileName=function(e,n){if(void 0===n&&(n=!1),0===e.indexOf("http")){var t=(e=e.substring(e.indexOf("/",9)+1)).indexOf("?");t>0&&(e=e.substring(0,t))}return n?"tiles/"+e.replace("v4/mapbox.streets/",""):e.replace(/\/| |@/g,"_")},e.prototype.getLocalThumbFileName=function(e){return"thumb_"+this.getLocalFileName(e)},e.prototype.getOfflineURL=function(e,n,t,l){return void 0===n&&(n=!1),void 0===t&&(t=!1),void 0===l&&(l=!1),n?this.fixUrlForWebview(this.offlineThumbnailUrlCache[e]?this.offlineThumbnailUrlCache[e]:this.offlineThumbnailUrlCache[e]=this.nativeBaseURL?this.nativeBaseURL+this.getLocalThumbFileName(e):this.getOnlineURL(e)):l?this.offlineImageUrlCache[e]?this.offlineImageUrlCache[e]:this.offlineImageUrlCache[e]=this.nativeBaseURL?this.nativeBaseURL+this.getLocalFileName(e,t):this.getOnlineURL(e):this.fixUrlForWebview(this.offlineImageUrlCache[e]?this.offlineImageUrlCache[e]:this.offlineImageUrlCache[e]=this.nativeBaseURL?this.nativeBaseURL+this.getLocalFileName(e,t):this.getOnlineURL(e))},e.prototype.getOnlineURL=function(e){return 0!==e.indexOf("http")?u.b.WEBSERVER_URL+e:e},e.prototype.fixUrlForWebview=function(e){if(!this.platform.is("cordova"))return e;var n=window.Ionic.WebView.convertFileSrc(e);return n.includes("mcm_images_tasks")&&(n=this.sanitizer.bypassSecurityTrustUrl(n)),n},e.prototype.removeDownloadedURLs=function(e,n){return void 0===n&&(n=!0),a(this,void 0,void 0,function(){var t,l,i;return s(this,function(o){if(!this.dataDirectory)return[2];for(t=function(){var t=e[i];if(""===t.trim()||"null"===t.toLowerCase())return"continue";var o=l.getLocalFileName(t);l.fileManager.getFile(l.dataDirectory,o,{create:!1}).then(function(e){e.remove(function(){return console.log("deleted file "+o)},function(){return console.log("could not delete file "+o)})},function(){return console.log("could not delete file "+o)}),n&&(o=l.getLocalThumbFileName(t),l.fileManager.getFile(l.dataDirectory,o,{create:!1}).then(function(e){e.remove(function(){return console.log("deleted file "+o)},function(){return console.log("could not delete file "+o)})},function(){return console.log("could not delete file "+o)}))},l=this,i=0;i<e.length;i++)t();return[2]})})},e.prototype.getAsyncImageURL=function(e,n){return a(this,void 0,void 0,function(){var t,l=this;return s(this,function(i){switch(i.label){case 0:return n&&(t=e.lastIndexOf("/"),e=e.substring(0,t)+"/"+n+e.substring(t)),this.lazyLoadedImagesCache[e]?[2,this.lazyLoadedImagesCache[e]]:this.dataDirectory?[4,new Promise(function(n){l.downloadURLs([e],!1,function(t,l,i){return i==e&&n(),!1},!1)})]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2,this.lazyLoadedImagesCache[e]=this.getOfflineURL(e)]}})})},e.prototype.downloadAndUnzip=function(e,n,t){return a(this,void 0,void 0,function(){var t,l,i,o;return s(this,function(r){switch(r.label){case 0:return window.JJzip?(t=u.b.WEBSERVER_URL+"mcm_maps/"+e.mapFileName,l=this.transfer.create(),i=this.fileManager.dataDirectory,o=i+e.mapFileName,[4,new Promise(function(e,r){l.onProgress(function(e){e.loaded&&e.total&&e.loaded<e.total&&e.total>0&&n(Math.round(e.loaded/e.total*100))&&(r("download was canceled"),l.abort())}),l.download(t,o).then(function(n){window.JJzip.unzip(o,{target:i+"/tiles"},function(n){console.log("victory"),console.log("victory "+JSON.stringify(n)),e()},function(e){console.log("no victory :((("),console.log(e)})},r).catch(function(e){console.log("ERROR DOWNLOADING: ",e)})})]):[2];case 1:return r.sent(),[2]}})})},e;var n}()},53:function(e,n,t){"use strict";t.d(n,"a",function(){return s});t(0),t(37);var l=t(242),i=t(243),o=t(244),r=(t(17),t(43),t(55),t(28)),u=this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})},a=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},s=function(){function e(e,n,t,l,i,o,r,u){this.modalCtrl=e,this.ormService=n,this.alertCtrl=t,this.deepLinker=l,this.translateService=i,this.spinner=o,this.dbUpdater=r,this.helper=u}return e.prototype.doDownload=function(e){return u(this,void 0,void 0,function(){var n,t,i;return a(this,function(o){switch(o.label){case 0:return[4,this.showNoInternetModalIfOffline()];case 1:return o.sent()?(console.log("doDownload "+JSON.stringify(e.id)),n=!1,t={total:0,currentProgress:0,cancelCallback:function(){console.log("cancel has been clicked"),n=!0},titleKey:"a_rdl_title_map"},(i=this.modalCtrl.create(l.a,t,{showBackdrop:!0,enableBackdropDismiss:!1})).present(),[4,this.ormService.downloadRoute(e,function(e,l,i){return t.total=l,t.currentProgress=e,i&&(t.titleKey=i),t.updateView&&t.updateView(),n},this.dbUpdater)]):[2];case 2:return o.sent(),i.dismiss(),[2,!n]}})})},e.prototype.showRoute=function(e,n,t,l){return void 0===t&&(t=!1),void 0===l&&(l=null),u(this,void 0,void 0,function(){return a(this,function(l){switch(l.label){case 0:return e.downloaded?[4,this.dbUpdater.updateRouteTasksData(e,this.translateService.instant("a_language_code"))]:[3,2];case 1:if(l.sent(),t)return this.navigateToRoute(e,n,null),[2];l.label=2;case 2:return[4,this.presentRouteInfoModal(e,n)];case 3:return l.sent(),[2]}})})},e.prototype.showDialog=function(e,n,t,l,i,o,r){return void 0===r&&(r="default"),u(this,void 0,void 0,function(){var u,s;return a(this,function(a){return t=t||"a_g_ok",u=[{text:this.translateService.instant(t),handler:l}],i&&o&&u.push({text:this.translateService.instant(i),handler:o}),(s=this.alertCtrl.create({title:e?this.translateService.instant(e):null,message:n?this.translateService.instant(n):null,buttons:u,cssClass:r})).present(),[2,s]})})},e.prototype.showYesNoDialog=function(e,n,t,l){var i=this;return t=t||"yes",l=l||"no",new Promise(function(o,r){i.showDialog(e,n,t,function(){return o(!0)},l,function(){return o(!1)})})},e.prototype.navigateToRoute=function(e,n,t){var l=this;void 0===t&&(t=null),this.spinner.show(null,null,!1),setTimeout(function(){n.parent&&n.parent.parent?n.parent.parent.push("TasksMap",{routeId:e.id,headerTitle:e.title,selectedTask:t},{},function(){l.deepLinker.navChange("forward")}):null==n.parent&&n.push("TasksMap",{routeId:e.id,headerTitle:e.title,selectedTask:t},{},function(){l.deepLinker.navChange("forward")})},10)},e.prototype.presentRouteInfoModal=function(e,n){var t=this,l=this;return new Promise(function(o){var r={routeId:e.id,modalsService:t,route:null},u=t.modalCtrl.create(i.a,r);u.onDidDismiss(function(e){e&&e.showRoute?(l.showRoute(e.route,n,!0),o(e.route)):o(r.route)}),u.present()})},e.prototype.presentTaskListModal=function(e,n,t,l,i,r){return void 0===l&&(l="default"),u(this,void 0,void 0,function(){var u,s,c,d,f,p=this;return a(this,function(a){switch(a.label){case 0:return c=(s=this.modalCtrl).create,d=[o.a],f={route:e,score:n,state:t},[4,e.getTasks()];case 1:return(u=c.apply(s,d.concat([(f.tasks=a.sent(),f.modalsService=this,f),{cssClass:l}]))).onDidDismiss(function(e){e&&null!=e.route&&null!=i&&!r?p.navigateToRoute(e.route,i,e.selectedTask):e&&null!=e.selectedTask&&null!=i&&r&&r(e.selectedTask)}),u.present(),[2,u]}})})},e.prototype.showNoInternetModalIfOffline=function(){return u(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return this.helper.isOnline?[4,this.helper.checkConnection()]:[3,5];case 1:return e.sent()!=r.a.FAST?[3,2]:[2,!0];case 2:return[4,this.showYesNoDialog("a_slow_connection_title","a_slow_connection","a_alert_continue","a_alert_cancel")];case 3:return[2,e.sent()];case 4:return[3,7];case 5:return[4,this.showDialog(null,"a_toast_need_internet_for_update")];case 6:return e.sent(),[2,!1];case 7:return[2]}})})},e}()},60:function(e,n,t){"use strict";t(0),t(1),t(17);var l=t(296),i=(t(64),t(136),t(84)),o=(t(108),t(265),t(266),t(267)),r=(t(43),t(19)),u=(t(268),function(){return function(){}}()),a=function(){return function(){}}(),s=(t(269),t(3)),c=t(105);t.d(n,"a",function(){return p});var d=this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})},f=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},p=function(){function e(e,t,o,r,u,a,s,c,d,f,p,h){this.events=e,this.storage=t,this.sessionService=o,this.sessionUserService=r,this.sessionChatService=u,this.sessionEventService=a,this.gpsService=s,this.localNotifications=c,this.translate=d,this.toast=f,this.leaderBoardService=p,this.platform=h,this.subject=new i.ReplaySubject(1),this.timerBackground=l.Observable.interval(1e3*n.CHAT_PULL_INTERVAL_IN_SECS).timeInterval(),this.timerUserSeesMessages=l.Observable.interval(1e3*n.CHAT_PULL_INTERVAL_USER_SEES_MESSAGES_IN_SECS).timeInterval(),this.sendEventsTimer=l.Observable.interval(1e3*n.EVENTS_POST_INTERVAL_IN_SECS),this.getLeaderboardTimer=l.Observable.interval(1e3*n.EVENTS_POST_INTERVAL_IN_SECS),this.getAuthorEventsTimer=l.Observable.interval(1e3*n.CHAT_PULL_INTERVAL_IN_SECS),this.pushPositionTimer=l.Observable.interval(1e3*n.POSITION_PUSH_INTERVAL_IN_SECS),this.lastPositionPush=0,this.coordinatesList=[],this.receivers=[],this.alreadySeenMessages={},this.pastLocalNotifications=[],this.leaderBoard={leaderboard:[]},this.newMsgNumber=0}return n=e,e.prototype.updateSession=function(e){return d(this,void 0,void 0,function(){return f(this,function(t){switch(t.label){case 0:return[4,this.storage.set(n.STORAGE_KEY_SESSION,e)];case 1:return t.sent(),[2]}})})},e.prototype.init=function(){return d(this,void 0,void 0,function(){return f(this,function(e){switch(e.label){case 0:return console.log("Init chatservice"),[4,this.getActiveSession()];case 1:return e.sent(),this.subscribeForAndSendEvents(this.transientActiveSession),!0===Object(r.i)(o.b.pluginRef,null,o.b.pluginName)&&this.localNotifications.on("click").subscribe(function(e){console.log("local notification has been pressed"),console.log(e)}),[2]}})})},e.prototype.exit=function(){return d(this,void 0,void 0,function(){return f(this,function(e){return this.subscribeForAndSendEvents(null),[2]})})},e.prototype.getChatMessage=function(e,n){e.time=this.formatTime(e.time);var t=(new Date).getTimezoneOffset(),l={messageId:e.messageId,userId:e.senderId,userName:e.username,userAvatar:"./assets/to-user.jpg",toUserId:e.receiverId,time:Date.parse(e.time)-6e4*t,message:e.message,status:e.status,media:e.media};return l.media.length>0&&".aac"==l.media[0].substring(l.media[0].lastIndexOf("."))&&(l.audioDuration=e.mediaDuration),l},e.prototype.formatTime=function(e){if(this.platform.is("ios")){var n=e,t=n.substring(0,10).split("-"),l=n.substr(11);return t[1]+"/"+t[2]+"/"+t[0]+" "+l}return e},e.prototype.getMsgList=function(e,n){var t=this;return this.sessionChatService.getMessages({sessionCode:e.session.code,senderToken:e.sessionUser.token,receiverToken:n}).map(function(n){var l=[];return n.messages.forEach(function(n){l.push(t.getChatMessage(n,e.sessionUser))}),l})},e.prototype.getNewMsgs=function(e,n){var t=this;return this.sessionChatService.getNewMessages({sessionCode:e.session.code,senderToken:e.sessionUser.token,receiverToken:n}).map(function(n){t.newMsgNumber+=n.length;var l=[];return n.forEach(function(n){l.push(t.getChatMessage(n,e.sessionUser))}),l})},e.prototype.sendMsg=function(e,n){var t=this,l=[];return console.log("Sending chat message: ",e),this.receivers.forEach(function(i){l.push(t.sessionChatService.sendMessageToUser({receiverToken:i.token,senderToken:n.sessionUser.token,sessionCode:n.session.code,chatMessage:e}).toPromise().then(function(e){return t.getChatMessage(e,n.sessionUser)}))}),Promise.all(l).then(function(e){return console.info("New Chat Messages were send: [".concat(e.length.toString(),"]")),e})},e.prototype.postMedia=function(e,n){return d(this,void 0,void 0,function(){var t,l;return f(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.sessionChatService.postMedia(e,n.session.code,n.sessionUser.token)];case 1:return t=i.sent(),[2,this.sessionService.rootUrl.replace("index.php","")+t.body];case 2:return l=i.sent(),console.log("ERROR sending media to chat: ",l),[2,null];case 3:return[2]}})})},e.prototype.getUserInfo=function(){return d(this,void 0,void 0,function(){var e,n;return f(this,function(t){switch(t.label){case 0:return[4,this.getActiveSession()];case 1:return null!=(e=t.sent())?(n={id:e.sessionUser.id,name:e.sessionUser.team_name,token:e.sessionUser.token,avatar:"./assets/user.jpg"},[2,new Promise(function(e){return e(n)})]):[2]}})})},e.prototype.setActiveSession=function(e,t,l){return d(this,void 0,void 0,function(){var i,o;return f(this,function(r){switch(r.label){case 0:return console.log("Joining session."),[4,this.sessionService.joinSession({sessionCode:e.code,request:{teamName:t,teamMembers:l}}).toPromise()];case 1:return(i=r.sent())?(console.log("Successfully joined. Storing active session"),o={session:e,sessionUser:i,started:!1,authorEvents_lastPull:s().unix()},[4,this.storage.set(n.STORAGE_KEY_SESSION,o)]):[3,3];case 2:return r.sent(),this.transientActiveSession=o,console.log("Session stored"),[3,4];case 3:console.log("Error joining session."),r.label=4;case 4:return[2]}})})},e.prototype.getActiveSession=function(){return d(this,void 0,void 0,function(){var e,t,l;return f(this,function(i){switch(i.label){case 0:return console.log("Getting Active session."),e=this,[4,this.storage.get(n.STORAGE_KEY_SESSION)];case 1:return e.transientActiveSession=i.sent(),console.log(this.transientActiveSession),this.transientActiveSession&&(console.log("Found active session. Checking if still active."),t=s().unix(),console.log("Current time: "+t),l=s(this.transientActiveSession.session.ends_at).unix(),console.log("End time: "+l),t>l?(console.log("Session ended. Exit session."),this.exitActiveSession()):console.log("Session running.")),[2,this.transientActiveSession]}})})},e.prototype.getSessionInfo=function(){return this.transientActiveSession},e.prototype.exitActiveSession=function(){return d(this,void 0,void 0,function(){return f(this,function(e){switch(e.label){case 0:return[4,this.sendUserEvents()];case 1:return e.sent(),[4,this.storage.remove(n.STORAGE_KEY_SESSION)];case 2:return e.sent(),this.subscribeForAndSendEvents(null),null==this.transientActiveSession?[3,4]:[4,this.sessionUserService.leaveSession({userToken:this.transientActiveSession.sessionUser.token,sessionCode:this.transientActiveSession.session.code}).toPromise()];case 3:e.sent(),e.label=4;case 4:return this.receivers=[],this.alreadySeenMessages={},this.pastLocalNotifications=[],this.leaderBoard={leaderboard:[]},this.newMsgNumber=0,this.transientActiveSession=null,[2]}})})},e.prototype.getSubject=function(){return this.subject},e.prototype.subscribeForAndSendEvents=function(e){return d(this,void 0,void 0,function(){var t=this;return f(this,function(l){switch(l.label){case 0:return this.subject.next(e),e?(this.positionSubscription&&this.positionSubscription.unsubscribe(),this.positionSubscription=this.pushPositionTimer.subscribe(function(l){return d(t,void 0,void 0,function(){var t,l,i,o;return f(this,function(r){switch(r.label){case 0:if(t=this.gpsService.getLastPosition(),this.coordinatesList.push(t&&t.coords?t.coords:{accuracy:0,altitude:null,altitudeAccuracy:null,heading:null,latitude:n.DEFAULT_LAT,longitude:n.DEFAULT_LON,speed:null}),!(this.coordinatesList.length>=15))return[3,4];console.log("calculate sums"),l=0,i=0,Object(c.forEach)(this.coordinatesList,function(e){l+=e.latitude,i+=e.longitude}),l/=this.coordinatesList.length,i/=this.coordinatesList.length,console.log(l+", "+i),this.coordinatesList=[],r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.sessionUserService.updatePosition({sessionCode:e.session.code,userToken:e.sessionUser.token,latitude:l,longitude:i}).toPromise()];case 2:return r.sent(),[3,4];case 3:return o=r.sent(),console.error("ChatAndSessionService: Could not push position",o),[3,4];case 4:return[2]}})})}),this.sendEventsSubscription&&this.sendEventsSubscription.unsubscribe(),this.sendEventsSubscription=this.sendEventsTimer.subscribe(function(e){console.log("tick tock"),t.sendUserEvents()}),this.getLeaderboardSubscription&&this.getLeaderboardSubscription.unsubscribe(),this.getLeaderboardSubscription=this.getLeaderboardTimer.subscribe(function(e){t.fetchLeaderboard()}),this.getAuthorEventsSubscription&&this.getAuthorEventsSubscription.unsubscribe(),this.getAuthorEventsSubscription=this.getAuthorEventsTimer.subscribe(function(e){t.fetchAuthorEvents()}),this.determineDefaultReceivers(e).then(function(e){t.receivers=e}),this.refreshChatSubscription(e),[4,this.localNotifications.hasPermission()]):[3,4];case 1:return l.sent()?[3,3]:[4,this.localNotifications.requestPermission()];case 2:l.sent(),l.label=3;case 3:return[3,5];case 4:this.receivers=[],this.positionSubscription&&(this.positionSubscription.unsubscribe(),this.positionSubscription=null),this.chatSubscription&&(this.chatSubscription.unsubscribe(),this.chatSubscription=null),this.sendEventsSubscription&&(this.sendEventsSubscription.unsubscribe(),this.sendEventsSubscription=null),this.getLeaderboardSubscription&&(this.getLeaderboardSubscription.unsubscribe(),this.getLeaderboardSubscription=null),this.getAuthorEventsSubscription&&(this.getAuthorEventsSubscription.unsubscribe(),this.getAuthorEventsSubscription=null),l.label=5;case 5:return[2]}})})},e.prototype.refreshChatSubscription=function(e){var n=this;console.debug("refreshChatSubscription()"),this.chatSubscription&&this.chatSubscription.unsubscribe(),this.chatSubscription=this.getRelevantTimer().subscribe(function(t){n.checkForNewMessages(e)})},e.prototype.getRelevantTimer=function(){return this.userSeesNewMessages?this.timerUserSeesMessages:this.timerBackground},e.prototype.checkForNewMessages=function(e){return d(this,void 0,void 0,function(){var n=this;return f(this,function(t){return console.log("check for new msgs ..."),this.receivers.forEach(function(t){return d(n,void 0,void 0,function(){var n=this;return f(this,function(l){switch(l.label){case 0:return[4,this.getNewMsgs(e,t.token).toPromise()];case 1:return l.sent().forEach(function(e){n.events.publish("chat:received",e);if(!n.alreadySeenMessages[e.messageId]&&(n.alreadySeenMessages[e.messageId]=!0,!n.userSeesNewMessages)){console.info("scheduling notfication for "+e.userName+": "+e.message);var t=void 0;n.pastLocalNotifications.push(t={id:n.pastLocalNotifications.length+1,title:e.userName,text:e.message,silent:!1,actions:[{id:"reply",type:o.a.INPUT,title:n.translate.instant("a_chat_reply"),emptyText:n.translate.instant("a_chat_type_message"),submitTitle:n.translate.instant("a_chat_reply"),foreground:!0,launch:!0}]}),n.localNotifications.schedule(t),n.toast.create({message:e.userName+": "+e.message,duration:3e3,position:"bottom"}).present()}}),[2]}})})}),[2]})})},e.prototype.determineDefaultReceivers=function(e){return d(this,void 0,void 0,function(){var n,t,l;return f(this,function(i){switch(i.label){case 0:return n=[],!e.sessionUser.wp_user_id||e.sessionUser.wp_user_id<=0?[4,this.sessionService.getSessionAdmin({sessionCode:e.session.code,userToken:e.sessionUser.token}).toPromise().then(function(e){return e})]:[3,2];case 1:return t=i.sent(),n.push(t),[3,4];case 2:return[4,this.sessionService.getSessionUsers(e.session.code).toPromise().then(function(e){return e.users})];case 3:(l=i.sent()).filter(function(n){return!(n.id===e.sessionUser.id)}),n=l,i.label=4;case 4:return[2,Promise.all(n)]}})})},e.prototype.getReceivers=function(){return this.receivers},e.prototype.setUserSeesNewMessages=function(e){var n=e!=this.userSeesNewMessages&&this.transientActiveSession;this.userSeesNewMessages=e,n&&this.refreshChatSubscription(this.transientActiveSession)},e.prototype.sendUserEvents=function(){return d(this,void 0,void 0,function(){var e,t,l,i;return f(this,function(o){switch(o.label){case 0:return e=this.transientActiveSession,console.log("send user events"),e?n.USER_EVENTS.length>0?((t=this.gpsService.getLastPosition())&&t.coords&&(console.log(t.coords),n.USER_EVENTS.forEach(function(e){e.lat=t.coords.latitude.toString(),e.lon=t.coords.longitude.toString()})),l=new u,l.events=n.USER_EVENTS,i={events:l,sessionCode:e.session.code,userToken:e.sessionUser.token},[4,this.sessionEventService.addEvents(i).toPromise()]):[3,2]:[3,2];case 1:o.sent(),console.log(n.USER_EVENTS),n.USER_EVENTS=[],o.label=2;case 2:return[2]}})})},e.prototype.addUserEvent=function(e,t,l){var i=new a;i.title=e,i.details=t,i.task_id=l,i.lat=""+n.DEFAULT_LAT,i.lon=""+n.DEFAULT_LON,n.USER_EVENTS.push(i)},e.prototype.fetchLeaderboard=function(){return d(this,void 0,void 0,function(){var e,n,t;return f(this,function(l){switch(l.label){case 0:return(e=this.transientActiveSession)&&e.session.has_leaderboard?(n=new(function(){return function(){}}()),n.sessionCode=e.session.code,n.userToken=e.sessionUser.token,[4,this.leaderBoardService.getLeaderboard(n).toPromise()]):[3,2];case 1:t=l.sent(),console.log(t),this.leaderBoard=t,l.label=2;case 2:return[2]}})})},e.prototype.fetchAuthorEvents=function(){return d(this,void 0,void 0,function(){var e,n,t;return f(this,function(l){switch(l.label){case 0:return(e=this.transientActiveSession)?(n=new(function(){return function(){}}()),n.sessionCode=e.session.code,n.userToken=e.sessionUser.token,n.unixTime=e.authorEvents_lastPull.toString(),[4,this.sessionEventService.getAuthorEvents(n).toPromise()]):[3,3];case 1:return t=l.sent(),console.log(t),e.authorEvents_lastPull=s().unix(),this.transientActiveSession=e,[4,this.updateSession(e)];case 2:l.sent(),this.parseAuthorEvents(t),l.label=3;case 3:return[2]}})})},e.prototype.parseAuthorEvents=function(e){var n=this;e.events.forEach(function(e){var t=this;if("event_author_kick_user"===e.title)try{var l=JSON.parse(e.details);n.events.publish("user:kicked",l.userToken==n.transientActiveSession.sessionUser.token?"self":"other")}catch(e){console.log("Could not parse details of author event.")}else if("event_author_update_session"===e.title)n.sessionService.getSessionByCode(n.transientActiveSession.session.code).toPromise().then(function(e){return d(t,void 0,void 0,function(){return f(this,function(t){switch(t.label){case 0:return n.transientActiveSession.session=e,[4,n.updateSession(n.transientActiveSession)];case 1:return t.sent(),n.events.publish("session:updated",n.transientActiveSession),[2]}})})});else if("event_author_assign_task"===e.title)try{(l=JSON.parse(e.details)).userToken==n.transientActiveSession.sessionUser.token&&(n.transientActiveSession.sessionUser.assigned_task_id=l.assigned_task_id,n.updateSession(n.transientActiveSession),n.events.publish("user:assigned_task",l.assigned_task_id))}catch(e){console.log(e)}})},e.prototype.getLeaderboard=function(){return this.leaderBoard.leaderboard},e.prototype.getNewMsgNumber=function(){return this.newMsgNumber},e.prototype.setNewMsgNumber=function(e){this.newMsgNumber=e},e.POSITION_PUSH_INTERVAL_IN_SECS=1,e.CHAT_PULL_INTERVAL_IN_SECS=15,e.EVENTS_POST_INTERVAL_IN_SECS=10,e.CHAT_PULL_INTERVAL_USER_SEES_MESSAGES_IN_SECS=2,e.STORAGE_KEY_SESSION="ChatAndSessionService.activeSession",e.USER_EVENTS=[],e.DEFAULT_LAT=999,e.DEFAULT_LON=999,e;var n}()},601:function(e,n,t){"use strict";function l(e){return u["ɵvid"](0,[(e()(),u["ɵeld"](0,null,null,1,"span",[],null,null,null,null,null)),(e()(),u["ɵted"](null,[""," / ",""]))],null,function(e,n){var t=n.component;e(n,1,0,t.currentProgress,t.total)})}function i(e){return u["ɵvid"](0,[(e()(),u["ɵeld"](0,null,null,2,"span",[["class","audio"]],null,null,null,null,null)),(e()(),u["ɵted"](null,[""," "])),u["ɵppd"](2)],null,function(e,n){var t=n.component;e(n,1,0,u["ɵunv"](n,1,0,e(n,2,0,u["ɵnov"](n.parent,0),t.total-t.currentProgress+900,"mm:ss")))})}function o(e){return u["ɵvid"](0,[(e()(),u["ɵeld"](0,null,null,2,"span",[["class","audio"]],null,null,null,null,null)),(e()(),u["ɵted"](null,[""," "])),u["ɵppd"](2)],null,function(e,n){var t=n.component;e(n,1,0,u["ɵunv"](n,1,0,e(n,2,0,u["ɵnov"](n.parent,0),t.total,"mm:ss")))})}function r(e){return u["ɵvid"](0,[u["ɵpid"](0,a.d,[u.LOCALE_ID]),(e()(),u["ɵand"](16777216,null,null,1,null,l)),u["ɵdid"](16384,null,0,a.k,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),u["ɵted"](null,["\n"])),(e()(),u["ɵeld"](0,null,null,5,"div",[["class","container progress-vertical route"]],null,null,null,null,null)),(e()(),u["ɵted"](null,["\n    "])),(e()(),u["ɵeld"](0,null,null,2,"div",[["class","bar"]],null,null,null,null,null)),u["ɵdid"](278528,null,0,a.n,[u.KeyValueDiffers,u.ElementRef,u.Renderer],{ngStyle:[0,"ngStyle"]},null),u["ɵpod"]({width:0}),(e()(),u["ɵted"](null,["\n"])),(e()(),u["ɵted"](null,["\n"])),(e()(),u["ɵted"](null,["\n"])),(e()(),u["ɵand"](16777216,null,null,1,null,i)),u["ɵdid"](16384,null,0,a.k,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),u["ɵted"](null,["\n"])),(e()(),u["ɵand"](16777216,null,null,1,null,o)),u["ɵdid"](16384,null,0,a.k,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),u["ɵted"](null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,!t.isAudio);e(n,7,0,e(n,8,0,100/t.total*t.currentProgress+"%"));e(n,13,0,t.isAudio&&t.isAudioPlaying);e(n,16,0,t.isAudio&&!t.isAudioPlaying)},null)}t.d(n,"a",function(){return s}),n.b=r;var u=t(1),a=t(12),s=u["ɵcrt"]({encapsulation:2,styles:[],data:{}})},614:function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var l=t(1),i=(t(104),t(43),this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})}),o=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},r=function(){function e(e,n,t,i,o){this.modalsService=e,this.ormService=n,this.helper=t,this.dbUpdater=i,this.translateService=o,this.downloadRoute=new l.EventEmitter,this.removeRoute=new l.EventEmitter,this.currentProgress=0,this.total=0,this.completedRadius=339.292}return e.prototype.ngOnChanges=function(){return i(this,void 0,void 0,function(){var e,n;return o(this,function(t){switch(t.label){case 0:return this.route&&this.route.downloaded?(e=this,[4,this.route.getTaskCount()]):[3,3];case 1:return e.total=t.sent(),this.route.scores?[4,this.helper.calculateProgress(this.route)]:[3,3];case 2:n=t.sent(),this.currentProgress=n.currentProgress,this.completedRadius=this.calculatePercentage(),t.label=3;case 3:return[2]}})})},e.prototype.calculatePercentage=function(){return 2*Math.PI*54*(1-1/this.total*this.currentProgress)},e.prototype.doDownload=function(e,n){return i(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return e.stopPropagation(),[4,this.modalsService.doDownload(n)];case 1:return t.sent()&&this.downloadRoute.emit({route:n}),[2]}})})},e.prototype.deleteRoute=function(e,n){return i(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return e.stopPropagation(),[4,this.ormService.removeDownloadedRoute(n,!0)];case 1:return t.sent()&&this.removeRoute.emit(),[2]}})})},e}()},615:function(e,n,t){"use strict";t.d(n,"a",function(){return a});var l,i=t(64),o=t(41),r=this&&this.__awaiter||function(e,n,t,l){return new(t||(t=Promise))(function(i,o){function r(e){try{a(l.next(e))}catch(e){o(e)}}function u(e){try{a(l.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new t(function(n){n(e.value)}).then(r,u)}a((l=l.apply(e,n||[])).next())})},u=this&&this.__generator||function(e,n){function t(t){return function(r){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,i&&(o=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(e,u)}catch(e){t=[6,e],i=0}finally{l=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,r])}}var l,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},a={storage:null,initialize:function(){return this.storage=l||(l=new i.b({name:"mapboxTilesStorage"})),this.storage.ready()},getItem:function(e){return Promise.resolve(null)},saveTiles:function(e,n){var t={};return e.map(function(e){return t[e.url]=e.key}),o.a.INSTANCE.downloadURLs(e.map(function(e){return e.url}),!1,function(e,t,l){return n(e,t)},!0)},clear:function(){return this.storage.clear()},_saveTile:function(e){return r(this,void 0,void 0,function(){var n;return u(this,function(t){switch(t.label){case 0:return[4,this.storage.get(e)];case 1:return(n=t.sent())?n++:n=1,[4,this.storage.set(e,n)];case 2:return t.sent(),[2]}})})},removeItems:function(e){return r(this,void 0,void 0,function(){var n,t,l,i=this;return u(this,function(r){for(n=[],t=0,l=e;t<l.length;t++)n.push(this.storage.get(l[t]));return Promise.all(n).then(function(n){for(var t=[],l=0;l<n.length;l++){var r=n[l],u=e[l];r>1?i.storage.set(u,r-1):1===r&&(i.storage.remove(u),t.push(u))}o.a.INSTANCE.removeDownloadedURLs(t,!1)}),[2]})})}}},619:function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var l=t(28),i=function(){function e(){}return e.prototype.transform=function(e,n,t){if(!t)return e;var i=(e||[]).filter(function(e){return n.split(",").some(function(n){return e.hasOwnProperty(n)&&new RegExp(t,"gi").test(e[n])})});return l.b.searchResults=i.length,console.log("searchResults",l.b.searchResults),i},e}()},620:function(e,n,t){"use strict";function l(e){return S["ɵvid"](0,[(e()(),S["ɵeld"](0,null,null,1,"ion-spinner",[["name","dots"]],[[2,"spinner-paused",null]],null,null,E.b,E.a)),S["ɵdid"](114688,null,0,k.a,[O.a,S.ElementRef,S.Renderer],{name:[0,"name"]},null)],function(e,n){e(n,1,0,"dots")},function(e,n){e(n,0,0,S["ɵnov"](n,1)._paused)})}function i(e){return S["ɵvid"](0,[(e()(),S["ɵeld"](0,null,null,1,"p",[["class","line-breaker "]],null,null,null,null,null)),(e()(),S["ɵted"](null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.message)})}function o(e){return S["ɵvid"](0,[(e()(),S["ɵeld"](0,null,null,0,"img",[],[[8,"src",4]],[[null,"click"]],function(e,n,t){var l=!0;if("click"===n){l=!1!==e.component.openInPhotoviewer(e.parent.context.$implicit.media[0])&&l}return l},null,null))],null,function(e,n){e(n,0,0,S["ɵinlineInterpolate"](1,"",n.parent.context.$implicit.media[0],""))})}function r(e){return S["ɵvid"](0,[(e()(),S["ɵeld"](0,null,null,3,"button",[["clear",""],["ion-button",""],["item-end",""],["large",""]],null,[[null,"click"]],function(e,n,t){var l=!0;if("click"===n){l=!1!==e.component.playAudio(e.parent.parent.context.$implicit,e.parent.parent.context.index)&&l}return l},A.b,A.a)),S["ɵdid"](1097728,null,0,C.a,[[8,""],O.a,S.ElementRef,S.Renderer],{large:[0,"large"],clear:[1,"clear"]},null),(e()(),S["ɵeld"](0,null,0,1,"ion-icon",[["name","md-play"],["role","img"]],[[2,"hide",null]],null,null,null,null)),S["ɵdid"](147456,null,0,I.a,[O.a,S.ElementRef,S.Renderer],{name:[0,"name"]},null)],function(e,n){e(n,1,0,"","");e(n,3,0,"md-play")},function(e,n){e(n,2,0,S["ɵnov"](n,3)._hidden)})}function u(e){return S["ɵvid"](0,[(e()(),S["ɵeld"](0,null,null,3,"button",[["clear",""],["ion-button",""],["item-end",""],["large",""]],null,[[null,"click"]],function(e,n,t){var l=!0;if("click"===n){l=!1!==e.component.pauseAudio(e.parent.parent.context.$implicit)&&l}return l},A.b,A.a)),S["ɵdid"](1097728,null,0,C.a,[[8,""],O.a,S.ElementRef,S.Renderer],{large:[0,"large"],clear:[1,"clear"]},null),(e()(),S["ɵeld"](0,null,0,1,"ion-icon",[["name","md-square"],["role","img"]],[[2,"hide",null]],null,null,null,null)),S["ɵdid"](147456,null,0,I.a,[O.a,S.ElementRef,S.Renderer],{name:[0,"name"]},null)],function(e,n){e(n,1,0,"","");e(n,3,0,"md-square")},function(e,n){e(n,2,0,S["ɵnov"](n,3)._hidden)})}function a(e){return S["ɵvid"](0,[(e()(),S["ɵeld"](0,null,null,10,"div",[],null,null,null,null,null)),(e()(),S["ɵted"](null,["\n                        "])),(e()(),S["ɵand"](16777216,null,null,1,null,r)),S["ɵdid"](16384,null,0,N.k,[S.ViewContainerRef,S.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),S["ɵted"](null,["\n                        "])),(e()(),S["ɵand"](16777216,null,null,1,null,u)),S["ɵdid"](16384,null,0,N.k,[S.ViewContainerRef,S.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),S["ɵted"](null,["\n                        "])),(e()(),S["ɵeld"](0,null,null,1,"mcm-progress-bar",[],null,null,null,j.b,j.a)),S["ɵdid"](573440,null,0,L.a,[D.b],{isAudioPlaying:[0,"isAudioPlaying"],isAudio:[1,"isAudio"],currentProgress:[2,"currentProgress"],total:[3,"total"]},null),(e()(),S["ɵted"](null,["\n                    "]))],function(e,n){var t=n.component;e(n,3,0,null==t.audioIndex);e(n,6,0,t.audioIndex==n.parent.context.index);e(n,9,0,t.audioIndex==n.parent.context.index,!0,n.parent.context.$implicit.currentPosition,n.parent.context.$implicit.audioDuration)},null)}function s(e){return S["ɵvid"](0,[(e()(),S["ɵeld"](0,null,null,37,"div",[["class","message"]],[[2,"left",null],[2,"right",null]],null,null,null,null)),(e()(),S["ɵted"](null,["\n            "])),(e()(),S["ɵted"](null,["\n            "])),(e()(),S["ɵted"](null,["\n            "])),(e()(),S["ɵand"](16777216,null,null,1,null,l)),S["ɵdid"](16384,null,0,N.k,[S.ViewContainerRef,S.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),S["ɵted"](null,["\n            "])),(e()(),S["ɵted"](null,["\n            "])),(e()(),S["ɵeld"](0,null,null,28,"div",[["class","msg-detail"]],null,null,null,null,null)),(e()(),S["ɵted"](null,["\n                "])),(e()(),S["ɵeld"](0,null,null,15,"div",[["class","msg-content"]],null,null,null,null,null)),S["ɵdid"](278528,null,0,N.i,[S.IterableDiffers,S.KeyValueDiffers,S.ElementRef,S.Renderer],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),S["ɵpod"]({audio:0}),(e()(),S["ɵted"](null,["\n\n                    "])),(e()(),S["ɵted"](null,["\n                    "])),(e()(),S["ɵand"](16777216,null,null,1,null,i)),S["ɵdid"](16384,null,0,N.k,[S.ViewContainerRef,S.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),S["ɵted"](null,["\n\n                    "])),(e()(),S["ɵted"](null,["\n                    "])),(e()(),S["ɵand"](16777216,null,null,1,null,o)),S["ɵdid"](16384,null,0,N.k,[S.ViewContainerRef,S.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),S["ɵted"](null,["\n\n                    "])),(e()(),S["ɵted"](null,["\n                    "])),(e()(),S["ɵand"](16777216,null,null,1,null,a)),S["ɵdid"](16384,null,0,N.k,[S.ViewContainerRef,S.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),S["ɵted"](null,["\n\n                "])),(e()(),S["ɵted"](null,["\n                "])),(e()(),S["ɵeld"](0,null,null,8,"div",[["class","msg-info"]],null,null,null,null,null)),(e()(),S["ɵted"](null,["\n                    "])),(e()(),S["ɵeld"](0,null,null,5,"p",[],null,null,null,null,null)),(e()(),S["ɵted"](null,["\n                        "])),(e()(),S["ɵted"](null,["\n                        "])),(e()(),S["ɵted"](null,["\n                        "])),(e()(),S["ɵted"](null,["\n                         ",""])),S["ɵppd"](2),(e()(),S["ɵted"](null,["\n                "])),(e()(),S["ɵted"](null,["\n            "])),(e()(),S["ɵted"](null,["\n        "]))],function(e,n){var t=n.component;e(n,5,0,"pending"===n.context.$implicit.status&&(0==n.context.$implicit.media.length||!t.isAudio(n.context.$implicit.media[0])));e(n,11,0,"msg-content",e(n,12,0,n.context.$implicit.media.length>0&&t.isAudio(n.context.$implicit.media[0])));e(n,16,0,n.context.$implicit.message);e(n,20,0,n.context.$implicit.media.length>0&&!t.isAudio(n.context.$implicit.media[0]));e(n,24,0,n.context.$implicit.media.length>0&&t.isAudio(n.context.$implicit.media[0]))},function(e,n){var t=n.component;e(n,0,0,n.context.$implicit.userId===t.toUser.token,n.context.$implicit.userId===t.user.token);e(n,33,0,S["ɵunv"](n,33,0,e(n,34,0,S["ɵnov"](n.parent,0),n.context.$implicit.time,"medium")))})}function c(e){return S["ɵvid"](0,[(e()(),S["ɵeld"](0,[[2,0],["chat_input",1]],null,7,"textarea",[["autoresize",""],["id","textarea"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup.enter"],[null,"input"],[null,"focusin"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,i=e.component;if("input"===n){l=!1!==S["ɵnov"](e,1)._handleInput(t.target.value)&&l}if("blur"===n){l=!1!==S["ɵnov"](e,1).onTouched()&&l}if("compositionstart"===n){l=!1!==S["ɵnov"](e,1)._compositionStart()&&l}if("compositionend"===n){l=!1!==S["ɵnov"](e,1)._compositionEnd(t.target.value)&&l}if("ngModelChange"===n){l=!1!==(i.editorMsg=t)&&l}if("keyup.enter"===n){l=!1!==i.sendMsg()&&l}if("input"===n){l=!1!==i.changeButtonsStatus()&&l}if("focusin"===n){l=!1!==i.onFocus()&&l}return l},null,null)),S["ɵdid"](16384,null,0,P.b,[S.Renderer2,S.ElementRef,[2,P.a]],null,null),S["ɵprd"](1024,null,P.e,function(e){return[e]},[P.b]),S["ɵdid"](671744,null,0,P.h,[[8,null],[8,null],[8,null],[2,P.e]],{model:[0,"model"]},{update:"ngModelChange"}),S["ɵprd"](2048,null,P.f,null,[P.h]),S["ɵdid"](16384,null,0,P.g,[P.f],null,null),S["ɵpid"](131072,x.a,[U.a,S.ChangeDetectorRef]),(e()(),S["ɵted"](null,["        "]))],function(e,n){e(n,3,0,n.component.editorMsg)},function(e,n){e(n,0,0,S["ɵunv"](n,0,0,S["ɵnov"](n,6).transform("a_chat_type_message")),S["ɵnov"](n,5).ngClassUntouched,S["ɵnov"](n,5).ngClassTouched,S["ɵnov"](n,5).ngClassPristine,S["ɵnov"](n,5).ngClassDirty,S["ɵnov"](n,5).ngClassValid,S["ɵnov"](n,5).ngClassInvalid,S["ɵnov"](n,5).ngClassPending)})}function d(e){return S["ɵvid"](0,[(e()(),S["ɵeld"](0,null,null,5,"button",[["clear",""],["icon-only",""],["ion-button",""],["round",""],["start",""]],null,[[null,"click"]],function(e,n,t){var l=!0;if("click"===n){l=!1!==e.component.playAudio()&&l}return l},A.b,A.a)),S["ɵdid"](1097728,null,0,C.a,[[8,""],O.a,S.ElementRef,S.Renderer],{clear:[0,"clear"],round:[1,"round"]},null),(e()(),S["ɵted"](0,["\n                    "])),(e()(),S["ɵeld"](0,null,0,1,"ion-icon",[["name","md-play"],["role","img"]],[[2,"hide",null]],null,null,null,null)),S["ɵdid"](147456,null,0,I.a,[O.a,S.ElementRef,S.Renderer],{name:[0,"name"]},null),(e()(),S["ɵted"](0,["\n                "]))],function(e,n){e(n,1,0,"","");e(n,4,0,"md-play")},function(e,n){e(n,3,0,S["ɵnov"](n,4)._hidden)})}function f(e){return S["ɵvid"](0,[(e()(),S["ɵeld"](0,null,null,5,"button",[["clear",""],["icon-only",""],["ion-button",""],["round",""],["start",""]],null,[[null,"click"]],function(e,n,t){var l=!0;if("click"===n){l=!1!==e.component.pauseAudio()&&l}return l},A.b,A.a)),S["ɵdid"](1097728,null,0,C.a,[[8,""],O.a,S.ElementRef,S.Renderer],{clear:[0,"clear"],round:[1,"round"]},null),(e()(),S["ɵted"](0,["\n                    "])),(e()(),S["ɵeld"](0,null,0,1,"ion-icon",[["name","md-pause"],["role","img"]],[[2,"hide",null]],null,null,null,null)),S["ɵdid"](147456,null,0,I.a,[O.a,S.ElementRef,S.Renderer],{name:[0,"name"]},null),(e()(),S["ɵted"](0,["\n                "]))],function(e,n){e(n,1,0,"","");e(n,4,0,"md-pause")},function(e,n){e(n,3,0,S["ɵnov"](n,4)._hidden)})}function p(e){return S["ɵvid"](0,[(e()(),S["ɵeld"](0,null,null,7,"div",[],null,null,null,null,null)),(e()(),S["ɵted"](null,["\n                "])),(e()(),S["ɵand"](16777216,null,null,1,null,d)),S["ɵdid"](16384,null,0,N.k,[S.ViewContainerRef,S.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),S["ɵted"](null,["\n                "])),(e()(),S["ɵand"](16777216,null,null,1,null,f)),S["ɵdid"](16384,null,0,N.k,[S.ViewContainerRef,S.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),S["ɵted"](null,["\n            "]))],function(e,n){var t=n.component;e(n,3,0,t.canPlayback);e(n,6,0,!t.canPlayback)},null)}function h(e){return S["ɵvid"](0,[(e()(),S["ɵeld"](0,null,null,1,"ion-icon",[["name","md-mic"],["role","img"]],[[2,"hide",null]],null,null,null,null)),S["ɵdid"](147456,null,0,I.a,[O.a,S.ElementRef,S.Renderer],{name:[0,"name"]},null)],function(e,n){e(n,1,0,"md-mic")},function(e,n){e(n,0,0,S["ɵnov"](n,1)._hidden)})}function m(e){return S["ɵvid"](0,[(e()(),S["ɵeld"](0,null,null,1,"ion-icon",[["name","md-mic"],["role","img"]],[[2,"hide",null]],null,null,null,null)),S["ɵdid"](147456,null,0,I.a,[O.a,S.ElementRef,S.Renderer],{name:[0,"name"]},null)],function(e,n){e(n,1,0,"md-mic")},function(e,n){e(n,0,0,S["ɵnov"](n,1)._hidden)})}function g(e){return S["ɵvid"](0,[(e()(),S["ɵeld"](0,null,null,1,"ion-icon",[["name","md-trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),S["ɵdid"](147456,null,0,I.a,[O.a,S.ElementRef,S.Renderer],{name:[0,"name"]},null)],function(e,n){e(n,1,0,"md-trash")},function(e,n){e(n,0,0,S["ɵnov"](n,1)._hidden)})}function v(e){return S["ɵvid"](0,[(e()(),S["ɵeld"](0,null,null,3,"p",[["no-margin",""]],null,null,null,null,null)),(e()(),S["ɵted"](null,[""," ",""])),S["ɵpid"](131072,x.a,[U.a,S.ChangeDetectorRef]),S["ɵppd"](2)],null,function(e,n){var t=n.component;e(n,1,0,S["ɵunv"](n,1,0,S["ɵnov"](n,2).transform("a_chat_recording_message")),S["ɵunv"](n,1,1,e(n,3,0,S["ɵnov"](n.parent.parent,0),t.audioDuration,"mm:ss")))})}function b(e){return S["ɵvid"](0,[(e()(),S["ɵeld"](0,null,null,1,"mcm-progress-bar",[],null,null,null,j.b,j.a)),S["ɵdid"](573440,null,0,L.a,[D.b],{isAudioPlaying:[0,"isAudioPlaying"],isAudio:[1,"isAudio"],currentProgress:[2,"currentProgress"],total:[3,"total"]},null)],function(e,n){var t=n.component;e(n,1,0,!t.canPlayback,!0,t.currentPosition,t.audioDuration)},null)}function y(e){return S["ɵvid"](0,[(e()(),S["ɵeld"](0,null,null,28,"div",[["class","message-input-buttons audio"]],null,null,null,null,null)),S["ɵdid"](278528,null,0,N.i,[S.IterableDiffers,S.KeyValueDiffers,S.ElementRef,S.Renderer],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),S["ɵpod"]({active:0}),(e()(),S["ɵted"](null,["\n            "])),(e()(),S["ɵted"](null,["\n            "])),(e()(),S["ɵand"](16777216,null,null,1,null,p)),S["ɵdid"](16384,null,0,N.k,[S.ViewContainerRef,S.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),S["ɵted"](null,["\n\n            "])),(e()(),S["ɵeld"](0,null,null,13,"button",[["clear",""],["end",""],["icon-only",""],["ion-button",""],["round",""]],null,[[null,"click"]],function(e,n,t){var l=!0;if("click"===n){l=!1!==e.component.micButtonClick()&&l}return l},A.b,A.a)),S["ɵdid"](278528,null,0,N.i,[S.IterableDiffers,S.KeyValueDiffers,S.ElementRef,S.Renderer],{ngClass:[0,"ngClass"]},null),S["ɵpod"]({recording:0}),S["ɵdid"](1097728,null,0,C.a,[[8,""],O.a,S.ElementRef,S.Renderer],{clear:[0,"clear"],round:[1,"round"]},null),(e()(),S["ɵted"](0,["\n                "])),(e()(),S["ɵand"](16777216,null,0,1,null,h)),S["ɵdid"](16384,null,0,N.k,[S.ViewContainerRef,S.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),S["ɵted"](0,["\n                "])),(e()(),S["ɵand"](16777216,null,0,1,null,m)),S["ɵdid"](16384,null,0,N.k,[S.ViewContainerRef,S.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),S["ɵted"](0,["\n                "])),(e()(),S["ɵand"](16777216,null,0,1,null,g)),S["ɵdid"](16384,null,0,N.k,[S.ViewContainerRef,S.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),S["ɵted"](0,["\n            "])),(e()(),S["ɵted"](null,["\n            "])),(e()(),S["ɵand"](16777216,null,null,1,null,v)),S["ɵdid"](16384,null,0,N.k,[S.ViewContainerRef,S.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),S["ɵted"](null,["\n            "])),(e()(),S["ɵand"](16777216,null,null,1,null,b)),S["ɵdid"](16384,null,0,N.k,[S.ViewContainerRef,S.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),S["ɵted"](null,["\n        "]))],function(e,n){var t=n.component;e(n,1,0,"message-input-buttons audio",e(n,2,0,2==t.recordState||3==t.recordState));e(n,6,0,3==t.recordState);e(n,9,0,e(n,10,0,2==t.recordState));e(n,11,0,"","");e(n,14,0,1==t.recordState);e(n,17,0,2==t.recordState);e(n,20,0,3==t.recordState);e(n,24,0,2==t.recordState);e(n,27,0,3==t.recordState)},null)}function _(e){return S["ɵvid"](0,[(e()(),S["ɵeld"](0,null,null,15,"div",[["class","message-input-buttons"]],null,null,null,null,null)),(e()(),S["ɵted"](null,["\n            "])),(e()(),S["ɵeld"](0,null,null,5,"button",[["clear",""],["end",""],["icon-only",""],["ion-button",""],["round",""]],null,[[null,"click"]],function(e,n,t){var l=!0;if("click"===n){l=!1!==e.component.getImage()&&l}return l},A.b,A.a)),S["ɵdid"](1097728,null,0,C.a,[[8,""],O.a,S.ElementRef,S.Renderer],{clear:[0,"clear"],round:[1,"round"]},null),(e()(),S["ɵted"](0,["\n                "])),(e()(),S["ɵeld"](0,null,0,1,"ion-icon",[["name","md-image"],["role","img"]],[[2,"hide",null]],null,null,null,null)),S["ɵdid"](147456,null,0,I.a,[O.a,S.ElementRef,S.Renderer],{name:[0,"name"]},null),(e()(),S["ɵted"](0,["\n            "])),(e()(),S["ɵted"](null,["\n            "])),(e()(),S["ɵeld"](0,null,null,5,"button",[["clear",""],["end",""],["icon-only",""],["ion-button",""],["round",""]],null,[[null,"click"]],function(e,n,t){var l=!0;if("click"===n){l=!1!==e.component.openCamera()&&l}return l},A.b,A.a)),S["ɵdid"](1097728,null,0,C.a,[[8,""],O.a,S.ElementRef,S.Renderer],{clear:[0,"clear"],round:[1,"round"]},null),(e()(),S["ɵted"](0,["\n                "])),(e()(),S["ɵeld"](0,null,0,1,"ion-icon",[["name","md-camera"],["role","img"]],[[2,"hide",null]],null,null,null,null)),S["ɵdid"](147456,null,0,I.a,[O.a,S.ElementRef,S.Renderer],{name:[0,"name"]},null),(e()(),S["ɵted"](0,["\n            "])),(e()(),S["ɵted"](null,["\n        "]))],function(e,n){e(n,3,0,"","");e(n,6,0,"md-image");e(n,10,0,"","");e(n,13,0,"md-camera")},function(e,n){e(n,5,0,S["ɵnov"](n,6)._hidden);e(n,12,0,S["ɵnov"](n,13)._hidden)})}function w(e){return S["ɵvid"](0,[(e()(),S["ɵeld"](0,null,null,10,"div",[["class","image-previewer"]],null,null,null,null,null)),(e()(),S["ɵted"](null,["\n            "])),(e()(),S["ɵeld"](0,null,null,0,"img",[["class","msg-image"]],[[8,"src",4]],null,null,null,null)),(e()(),S["ɵted"](null,["\n            "])),(e()(),S["ɵeld"](0,null,null,5,"button",[["class","msg-close-button"],["clear",""],["end",""],["icon-only",""],["ion-button",""],["round",""]],null,[[null,"click"]],function(e,n,t){var l=!0;if("click"===n){l=!1!==e.component.removeImage()&&l}return l},A.b,A.a)),S["ɵdid"](1097728,null,0,C.a,[[8,""],O.a,S.ElementRef,S.Renderer],{clear:[0,"clear"],round:[1,"round"]},null),(e()(),S["ɵted"](0,["\n                "])),(e()(),S["ɵeld"](0,null,0,1,"ion-icon",[["name","md-trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),S["ɵdid"](147456,null,0,I.a,[O.a,S.ElementRef,S.Renderer],{name:[0,"name"]},null),(e()(),S["ɵted"](0,["\n            "])),(e()(),S["ɵted"](null,["\n        "]))],function(e,n){e(n,5,0,"","");e(n,8,0,"md-trash")},function(e,n){e(n,2,0,S["ɵinlineInterpolate"](1,"",n.component.localPath,""));e(n,7,0,S["ɵnov"](n,8)._hidden)})}function T(e){return S["ɵvid"](0,[(e()(),S["ɵeld"](0,null,null,4,"button",[["class","send"],["ion-button",""],["item-right",""],["no-padding",""],["round",""]],null,[[null,"click"]],function(e,n,t){var l=!0;if("click"===n){l=!1!==e.component.sendMsg()&&l}return l},A.b,A.a)),S["ɵdid"](1097728,null,0,C.a,[[8,""],O.a,S.ElementRef,S.Renderer],{round:[0,"round"]},null),(e()(),S["ɵted"](0,["\n        "])),(e()(),S["ɵeld"](0,null,0,0,"img",[["src","./assets/icons/send.svg"]],null,null,null,null,null)),(e()(),S["ɵted"](0,["\n    "]))],function(e,n){e(n,1,0,"")},null)}function R(e){return S["ɵvid"](0,[S["ɵpid"](0,N.d,[S.LOCALE_ID]),S["ɵqud"](402653184,1,{content:0}),S["ɵqud"](671088640,2,{messageInput:0}),(e()(),S["ɵeld"](0,null,null,1,"mcm-header",[],null,null,null,M.b,M.a)),S["ɵdid"](114688,null,0,B.a,[V.a,F.a,q.a,G.a,H.a,z.a],null,null),(e()(),S["ɵted"](null,["\n\n"])),(e()(),S["ɵeld"](0,null,null,8,"ion-content",[["class","has-header"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,K.b,K.a)),S["ɵdid"](4374528,[[1,4]],0,J.a,[O.a,W.a,X.a,S.ElementRef,S.Renderer,Y.a,$.a,S.NgZone,[2,q.a],[2,V.a]],null,null),(e()(),S["ɵted"](1,["\n    "])),(e()(),S["ɵeld"](0,null,1,4,"div",[["class","message-wrap"]],null,null,null,null,null)),(e()(),S["ɵted"](null,["\n        "])),(e()(),S["ɵand"](16777216,null,null,1,null,s)),S["ɵdid"](802816,null,0,N.j,[S.ViewContainerRef,S.TemplateRef,S.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),S["ɵted"](null,["\n\n    "])),(e()(),S["ɵted"](1,["\n"])),(e()(),S["ɵted"](null,["\n"])),(e()(),S["ɵeld"](0,null,null,23,"ion-footer",[["class","input"],["no-border",""]],null,null,null,null,null)),S["ɵdid"](16384,null,0,Q.a,[O.a,S.ElementRef,S.Renderer,[2,q.a]],null,null),(e()(),S["ɵted"](null,["\n    "])),(e()(),S["ɵeld"](0,null,null,16,"div",[["class","input-wrap"]],null,null,null,null,null)),(e()(),S["ɵted"](null,["\n        "])),(e()(),S["ɵted"](null,["\n        "])),(e()(),S["ɵand"](16777216,null,null,1,null,c)),S["ɵdid"](16384,null,0,N.k,[S.ViewContainerRef,S.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),S["ɵted"](null,["\n\n        "])),(e()(),S["ɵted"](null,["\n        "])),(e()(),S["ɵand"](16777216,null,null,1,null,y)),S["ɵdid"](16384,null,0,N.k,[S.ViewContainerRef,S.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),S["ɵted"](null,["\n\n        "])),(e()(),S["ɵted"](null,["\n        "])),(e()(),S["ɵand"](16777216,null,null,1,null,_)),S["ɵdid"](16384,null,0,N.k,[S.ViewContainerRef,S.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),S["ɵted"](null,["\n\n        "])),(e()(),S["ɵand"](16777216,null,null,1,null,w)),S["ɵdid"](16384,null,0,N.k,[S.ViewContainerRef,S.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),S["ɵted"](null,["\n    "])),(e()(),S["ɵted"](null,["\n    "])),(e()(),S["ɵand"](16777216,null,null,1,null,T)),S["ɵdid"](16384,null,0,N.k,[S.ViewContainerRef,S.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),S["ɵted"](null,["\n"])),(e()(),S["ɵted"](null,["\n\n\n"]))],function(e,n){var t=n.component;e(n,4,0);e(n,12,0,t.msgList);e(n,23,0,t.showTextArea);e(n,27,0,t.showAudioButtons);e(n,31,0,t.showPictureButtons);e(n,34,0,t.localPath);e(n,38,0,2!=t.recordState)},function(e,n){e(n,6,0,S["ɵnov"](n,7).statusbarPadding,S["ɵnov"](n,7)._hasRefresher)})}t.d(n,"a",function(){return ae});var S=t(1),E=t(284),k=t(110),O=t(4),A=t(25),C=t(18),I=t(77),N=t(12),j=t(601),L=t(171),D=t(28),P=t(23),x=t(38),U=t(22),M=t(278),B=t(141),V=t(24),F=t(13),q=t(6),G=t(53),H=t(48),z=t(26),K=t(276),J=t(35),W=t(8),X=t(14),Y=t(11),$=t(54),Q=t(176),Z=t(197),ee=t(97),ne=t(185),te=t(60),le=t(113),ie=t(184),oe=t(76),re=t(55),ue=S["ɵcrt"]({encapsulation:2,styles:[],data:{}}),ae=S["ɵccf"]("page-chat",Z.a,function(e){return S["ɵvid"](0,[(e()(),S["ɵeld"](0,null,null,1,"page-chat",[],null,null,null,R,ue)),S["ɵdid"](49152,null,0,Z.a,[F.a,ee.a,ne.a,W.a,te.a,le.a,S.ChangeDetectorRef,te.a,ie.a,oe.a,re.a],null,null)],null,null)},{},{},[])},622:function(e,n,t){"use strict";function l(e){return new Me.a(e,"./assets/localization/",".json")}function i(){return window}function o(){return i().YT}function r(){return o().Player}function u(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,4,"div",[["class","kb-key-cell"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n\t\t\t"])),(e()(),ve["ɵeld"](0,null,null,1,"div",[["class","kb-key"]],null,[[null,"tap"]],function(e,n,t){var l=!0,i=e.component;if("tap"===n){l=!1!==i.cKClick(t,i.keysTab[e.parent.context.$implicit+e.context.$implicit])&&l}return l},null,null)),(e()(),ve["ɵted"](null,["\n\t\t\t\t","\n\t\t\t"])),(e()(),ve["ɵted"](null,["\n\t\t"]))],null,function(e,n){e(n,3,0,n.component.keysTab[n.parent.context.$implicit+n.context.$implicit])})}function a(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,4,"div",[["class","kb-row"]],[[4,"zoom",null]],null,null,null,null)),(e()(),ve["ɵted"](null,["\n\t\t"])),(e()(),ve["ɵand"](16777216,null,null,1,null,u)),ve["ɵdid"](802816,null,0,nn.j,[ve.ViewContainerRef,ve.TemplateRef,ve.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),ve["ɵted"](null,["\n\t"]))],function(e,n){e(n,3,0,n.component.m_main_cols)},function(e,n){e(n,0,0,n.component.zoom)})}function s(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,17,"div",[["class","center"]],[[4,"width",null]],[["window","resize"]],function(e,n,t){var l=!0;if("window:resize"===n){l=!1!==e.component.onWindowResize(t)&&l}return l},null,null)),(e()(),ve["ɵted"](null,["\n\n\t"])),(e()(),ve["ɵted"](null,["\n\t"])),(e()(),ve["ɵeld"](0,null,null,9,"div",[["class","kb-toolbar"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n\t\t"])),(e()(),ve["ɵeld"](0,null,null,2,"span",[["style","font-size:unset"]],null,null,null,null,null)),(e()(),ve["ɵeld"](0,null,null,1,"ion-icon",[["name","arrow-dropdown"],["role","img"]],[[2,"hide",null]],[[null,"tap"]],function(e,n,t){var l=!0;if("tap"===n){l=!1!==e.component.hideClick(t)&&l}return l},null,null)),ve["ɵdid"](147456,null,0,lt.a,[$n.a,ve.ElementRef,ve.Renderer],{name:[0,"name"]},null),(e()(),ve["ɵted"](null,["\n\t\t"])),(e()(),ve["ɵeld"](0,null,null,2,"span",[["style","font-size:unset"]],null,null,null,null,null)),(e()(),ve["ɵeld"](0,null,null,1,"ion-icon",[["name","backspace"],["role","img"]],[[2,"hide",null]],[[null,"tap"]],function(e,n,t){var l=!0;if("tap"===n){l=!1!==e.component.deleteClick(t)&&l}return l},null,null)),ve["ɵdid"](147456,null,0,lt.a,[$n.a,ve.ElementRef,ve.Renderer],{name:[0,"name"]},null),(e()(),ve["ɵted"](null,["\n\t"])),(e()(),ve["ɵted"](null,["\n\n\t"])),(e()(),ve["ɵted"](null,["\n\t"])),(e()(),ve["ɵand"](16777216,null,null,1,null,a)),ve["ɵdid"](802816,null,0,nn.j,[ve.ViewContainerRef,ve.TemplateRef,ve.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),ve["ɵted"](null,["\n"])),(e()(),ve["ɵted"](null,["\n"]))],function(e,n){var t=n.component;e(n,7,0,"arrow-dropdown");e(n,11,0,"backspace");e(n,16,0,t.m_main_rows)},function(e,n){e(n,0,0,n.component.width);e(n,6,0,ve["ɵnov"](n,7)._hidden);e(n,10,0,ve["ɵnov"](n,11)._hidden)})}function c(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,2,"ion-nav",[],[[8,"className",0]],null,null,zn.b,zn.a)),ve["ɵprd"](6144,null,Kn.a,null,[Jn.a]),ve["ɵdid"](4374528,null,0,Jn.a,[[2,Wn.a],[2,Xn.a],Yn.a,$n.a,Qn.a,ve.ElementRef,ve.NgZone,ve.Renderer,ve.ComponentFactoryResolver,Zn.l,et.a,[2,nt.a],tt.a,ve.ErrorHandler],{root:[0,"root"]},null),(e()(),ve["ɵted"](null,["\n"])),(e()(),ve["ɵeld"](0,null,null,2,"custom-keyboard",[["class","kb-light"]],[[2,"visible",null]],[[null,"keyClick"]],function(e,n,t){var l=!0;if("keyClick"===n){l=!1!==e.component.keyClick(t)&&l}return l},s,it)),ve["ɵdid"](114688,null,0,De.a,[ve.ElementRef,ve.Renderer],{keysTab:[0,"keysTab"],colNb:[1,"colNb"]},null),(e()(),ve["ɵted"](null,["\n"])),(e()(),ve["ɵted"](null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,t.rootPage);e(n,5,0,t.keysTab,4)},function(e,n){e(n,0,0,n.component.activeNarrative);e(n,4,0,ve["ɵnov"](n,5).visible)})}function d(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,7,"div",[["class","card title"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,1,"p",[],null,null,null,null,null)),(e()(),ve["ɵted"](null,["",", ",""])),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,1,"h1",[],null,null,null,null,null)),(e()(),ve["ɵted"](null,["",""])),(e()(),ve["ɵted"](null,["\n    "]))],null,function(e,n){var t=n.component;e(n,3,0,t.route.city,t.route.countryCode);e(n,6,0,t.route.title)})}function f(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,4,"button",[["icon-only",""],["ion-button",""],["round",""],["small",""]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;if("click"===n){l=!1!==i.doDownload(i.route)&&l}return l},ft.b,ft.a)),ve["ɵdid"](1097728,null,0,pt.a,[[8,""],$n.a,ve.ElementRef,ve.Renderer],{small:[0,"small"],round:[1,"round"]},null),(e()(),ve["ɵted"](0,["\n                        "])),(e()(),ve["ɵeld"](0,null,0,0,"img",[["src","./assets/icons/download.svg"]],null,null,null,null,null)),(e()(),ve["ɵted"](0,["\n                    "]))],function(e,n){e(n,1,0,"","")},null)}function p(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,4,"button",[["color","danger"],["icon-only",""],["ion-button",""],["round",""],["small",""]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;if("click"===n){l=!1!==i.removeRoute(i.route)&&l}return l},ft.b,ft.a)),ve["ɵdid"](1097728,null,0,pt.a,[[8,""],$n.a,ve.ElementRef,ve.Renderer],{color:[0,"color"],small:[1,"small"],round:[2,"round"]},null),(e()(),ve["ɵted"](0,["\n                        "])),(e()(),ve["ɵeld"](0,null,0,0,"img",[["src","./assets/icons/delete.svg"]],null,null,null,null,null)),(e()(),ve["ɵted"](0,["\n                    "]))],function(e,n){e(n,1,0,"danger","","")},null)}function h(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,7,"div",[["class","indicator"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n                        "])),(e()(),ve["ɵeld"](0,null,null,2,"h3",[["no-margin",""]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n                        "])),(e()(),ve["ɵeld"](0,null,null,0,"img",[["class","background"]],[[8,"src",4]],null,null,null,null)),(e()(),ve["ɵted"](null,["\n                    "]))],null,function(e,n){var t=n.component;e(n,3,0,ve["ɵunv"](n,3,0,ve["ɵnov"](n,4).transform("p_narrative_names_"+t.route.getNarrativeName())));e(n,6,0,ve["ɵinlineInterpolate"](1,"./assets/images/",t.route.getNarrativeName(),"/indicator-label.svg"))})}function m(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,41,"div",[["class","image-box"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,38,"ion-grid",[["class","grid"]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,mt.a,[],null,null),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵeld"](0,null,null,34,"ion-row",[["align-items-center",""],["class","row"]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,gt.a,[],null,null),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵeld"](0,null,null,8,"ion-col",[["class","button-container col"],["col-4",""]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,vt.a,[],null,null),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵand"](16777216,null,null,1,null,f)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵand"](16777216,null,null,1,null,p)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵeld"](0,null,null,12,"ion-col",[["class","image-container col"],["lazy-load-images",""]],null,null,null,null,null)),ve["ɵdid"](278528,null,0,nn.i,[ve.IterableDiffers,ve.KeyValueDiffers,ve.ElementRef,ve.Renderer],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ve["ɵdid"](16384,null,0,vt.a,[],null,null),ve["ɵdid"](212992,null,0,bt.a,[ve.ElementRef,ve.Renderer2,ve.NgZone,ve.PLATFORM_ID,Fe.a],{intersectionObserverConfig:[0,"intersectionObserverConfig"]},null),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵeld"](0,null,null,3,"div",[["class","cover"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n                        "])),(e()(),ve["ɵeld"](0,null,null,0,"img",[["class","thumb lazy"],["onerror","this.style.opacity='0'"]],[[1,"data-async-src",0]],null,null,null,null)),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵand"](16777216,null,null,1,null,h)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵted"](null,["\n\n                "])),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵeld"](0,null,null,5,"ion-col",[["class","button-container col"],["col-4",""]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,vt.a,[],null,null),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵted"](null,["\n                        "])),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵted"](null,["\n    "]))],function(e,n){var t=n.component;e(n,12,0,!t.route.downloaded);e(n,15,0,t.route.downloaded);e(n,19,0,"image-container",t.route.getNarrativeName());e(n,21,0,"");e(n,29,0,t.route.isNarrativeEnabled())},function(e,n){e(n,25,0,n.component.route.getImageURL())})}function g(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,1,"span",[],null,null,null,null,null)),(e()(),ve["ɵted"](null,["",""]))],null,function(e,n){e(n,1,0,n.component.route.grade)})}function v(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,2,"span",[],null,null,null,null,null)),(e()(),ve["ɵted"](null,[" "," "])),ve["ɵppd"](2)],null,function(e,n){var t=n.component;e(n,1,0,ve["ɵunv"](n,1,0,e(n,2,0,ve["ɵnov"](n.parent,0),t.route.getDistance(),"m")))})}function b(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,1,"span",[],null,null,null,null,null)),(e()(),ve["ɵted"](null,["",""]))],null,function(e,n){e(n,1,0,n.component.route.duration)})}function y(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,1,"span",[],null,null,null,null,null)),(e()(),ve["ɵted"](null,["",""]))],null,function(e,n){e(n,1,0,n.component.route.length)})}function _(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,1,"mcm-progress-bar",[],null,null,null,yt.b,yt.a)),ve["ɵdid"](573440,null,0,_t.a,[dn.b],{route:[0,"route"]},null)],function(e,n){e(n,1,0,n.component.route)},null)}function w(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,13,"div",[["class","ratings"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵeld"](0,null,null,2,"div",[["class","rating perfect"]],null,null,null,null,null)),(e()(),ve["ɵeld"](0,null,null,1,"p",[],null,null,null,null,null)),(e()(),ve["ɵted"](null,["",""])),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵeld"](0,null,null,2,"div",[["class","rating good"]],null,null,null,null,null)),(e()(),ve["ɵeld"](0,null,null,1,"p",[],null,null,null,null,null)),(e()(),ve["ɵted"](null,["",""])),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵeld"](0,null,null,2,"div",[["class","rating failed"]],null,null,null,null,null)),(e()(),ve["ɵeld"](0,null,null,1,"p",[],null,null,null,null,null)),(e()(),ve["ɵted"](null,["",""])),(e()(),ve["ɵted"](null,["\n            "]))],null,function(e,n){var t=n.component;e(n,4,0,t.route.scores[0].getTasksSolved().length);e(n,8,0,t.route.scores[0].getTasksSolvedLow().length);e(n,12,0,t.route.scores[0].getTasksFailed().length)})}function T(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,5,"div",[["class","ratings"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵeld"](0,null,null,2,"div",[["class","rating saved"]],null,null,null,null,null)),(e()(),ve["ɵeld"](0,null,null,1,"p",[],null,null,null,null,null)),(e()(),ve["ɵted"](null,["",""])),(e()(),ve["ɵted"](null,["\n            "]))],null,function(e,n){e(n,4,0,n.component.route.scores[0].getTasksSaved().length)})}function R(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,10,"div",[["class","evaluation"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵeld"](0,null,null,1,"span",[["class","icon finished"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["",""])),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵand"](16777216,null,null,1,null,w)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵand"](16777216,null,null,1,null,T)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n        "]))],function(e,n){var t=n.component;e(n,6,0,t.route.isAnswerFeedbackEnabled());e(n,9,0,!t.route.isAnswerFeedbackEnabled())},function(e,n){e(n,3,0,n.component.route.completedDate)})}function S(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,1,"p",[],null,null,null,null,null)),(e()(),ve["ɵted"](null,["",""]))],null,function(e,n){e(n,1,0,n.component.route.description)})}function E(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,4,"ion-row",[["class","row"]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,gt.a,[],null,null),(e()(),ve["ɵted"](null,["",": ",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef])],null,function(e,n){var t=n.component;e(n,2,0,ve["ɵunv"](n,2,0,ve["ɵnov"](n,3).transform("p_narrative")),ve["ɵunv"](n,2,1,ve["ɵnov"](n,4).transform("p_narrative_names_"+t.route.getNarrativeName())))})}function k(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,4,"ion-row",[["class","row"]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,gt.a,[],null,null),(e()(),ve["ɵted"](null,["",": ",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef])],null,function(e,n){e(n,2,0,ve["ɵunv"](n,2,0,ve["ɵnov"](n,3).transform("p_narrative")),ve["ɵunv"](n,2,1,ve["ɵnov"](n,4).transform("p_narrative_names_none")))})}function O(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,32,"p",[],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵeld"](0,null,null,3,"ion-row",[["class","row"]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,gt.a,[],null,null),(e()(),ve["ɵted"](null,["",": ",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵeld"](0,null,null,3,"ion-row",[["class","row"]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,gt.a,[],null,null),(e()(),ve["ɵted"](null,["",": ",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵeld"](0,null,null,3,"ion-row",[["class","row"]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,gt.a,[],null,null),(e()(),ve["ɵted"](null,["",": ",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵeld"](0,null,null,3,"ion-row",[["class","row"]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,gt.a,[],null,null),(e()(),ve["ɵted"](null,["",": ",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵeld"](0,null,null,3,"ion-row",[["class","row"]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,gt.a,[],null,null),(e()(),ve["ɵted"](null,["",": ",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵand"](16777216,null,null,1,null,E)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵand"](16777216,null,null,1,null,k)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n        "]))],function(e,n){var t=n.component;e(n,28,0,t.route.isNarrativeEnabled());e(n,31,0,!t.route.isNarrativeEnabled())},function(e,n){var t=n.component;e(n,4,0,ve["ɵunv"](n,4,0,ve["ɵnov"](n,5).transform("p_session_sorting_score")),t.route.getSettingStringValue("gamification",t.translateService));e(n,9,0,ve["ɵunv"](n,9,0,ve["ɵnov"](n,10).transform("t_samplesolution")),t.route.getSettingStringValue("sampleSolution",t.translateService));e(n,14,0,ve["ɵunv"](n,14,0,ve["ɵnov"](n,15).transform("a_hints")),t.route.getSettingStringValue("hints",t.translateService));e(n,19,0,ve["ɵunv"](n,19,0,ve["ɵnov"](n,20).transform("p_r_validation")),t.route.getSettingStringValue("answerValidation",t.translateService));e(n,24,0,ve["ɵunv"](n,24,0,ve["ɵnov"](n,25).transform("p_r_feedback")),t.route.getSettingStringValue("answerFeedback",t.translateService))})}function A(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,1,"p",[],null,null,null,null,null)),(e()(),ve["ɵted"](null,["",""]))],null,function(e,n){var t=n.component;e(n,1,0,t.route.getAssistiveEquipment(t.translateService))})}function C(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,1,"p",[],null,null,null,null,null)),(e()(),ve["ɵted"](null,["",""]))],null,function(e,n){e(n,1,0,n.component.route.tags)})}function I(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,5,"button",[["block",""],["class","play"],["full",""],["ion-button",""],["large",""],["no-margin",""],["no-padding",""]],[[8,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;if("click"===n){l=!1!==i.showRoute(i.route)&&l}return l},ft.b,ft.a)),ve["ɵdid"](1097728,null,0,pt.a,[[8,""],$n.a,ve.ElementRef,ve.Renderer],{large:[0,"large"],block:[1,"block"],full:[2,"full"]},null),(e()(),ve["ɵted"](0,["\n        "])),(e()(),ve["ɵeld"](0,null,0,0,"img",[["content",""],["src","./assets/icons/play.svg"]],null,null,null,null,null)),(e()(),ve["ɵted"](0,[" ","\n    "])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef])],function(e,n){e(n,1,0,"","","")},function(e,n){e(n,0,0,!n.component.route.downloaded);e(n,4,0,ve["ɵunv"](n,4,0,ve["ɵnov"](n,5).transform("a_r_start")))})}function N(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,5,"button",[["block",""],["class","play"],["full",""],["ion-button",""],["large",""],["no-margin",""],["no-padding",""]],[[8,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;if("click"===n){l=!1!==i.showRoute(i.route)&&l}return l},ft.b,ft.a)),ve["ɵdid"](1097728,null,0,pt.a,[[8,""],$n.a,ve.ElementRef,ve.Renderer],{large:[0,"large"],block:[1,"block"],full:[2,"full"]},null),(e()(),ve["ɵted"](0,["\n        "])),(e()(),ve["ɵeld"](0,null,0,0,"img",[["content",""],["src","./assets/icons/play.svg"]],null,null,null,null,null)),(e()(),ve["ɵted"](0,[" ","\n    "])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef])],function(e,n){e(n,1,0,"","","")},function(e,n){e(n,0,0,!n.component.route.downloaded);e(n,4,0,ve["ɵunv"](n,4,0,ve["ɵnov"](n,5).transform("a_r_continue")))})}function j(e){return ve["ɵvid"](0,[ve["ɵpid"](0,wt.a,[]),(e()(),ve["ɵeld"](0,null,null,1,"mcm-header",[["transparent",""]],null,null,null,Tt.b,Tt.a)),ve["ɵdid"](114688,null,0,Rt.a,[Xn.a,St.a,Wn.a,Ne.a,Et.a,nt.a],null,null),(e()(),ve["ɵted"](null,["\n"])),(e()(),ve["ɵeld"](0,null,null,138,"ion-content",[["class","has-header transparent"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,kt.b,kt.a)),ve["ɵdid"](4374528,null,0,Ot.a,[$n.a,Qn.a,tt.a,ve.ElementRef,ve.Renderer,Yn.a,At.a,ve.NgZone,[2,Wn.a],[2,Xn.a]],null,null),(e()(),ve["ɵted"](1,["\n    "])),(e()(),ve["ɵand"](16777216,null,1,1,null,d)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](1,["\n\n    "])),(e()(),ve["ɵand"](16777216,null,1,1,null,m)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](1,["\n\n    "])),(e()(),ve["ɵeld"](0,null,1,76,"div",[["class","card text-center basic-info"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,73,"ion-grid",[["class","grid"],["no-padding",""]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,mt.a,[],null,null),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵeld"](0,null,null,69,"ion-row",[["align-items-center",""],["class","row"]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,gt.a,[],null,null),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵeld"](0,null,null,24,"ion-col",[["class","col"]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,vt.a,[],null,null),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵeld"](0,null,null,9,"div",[["class","info-item"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n                        "])),(e()(),ve["ɵeld"](0,null,null,3,"ion-label",[],null,null,null,null,null)),ve["ɵdid"](16384,null,0,Ct.a,[$n.a,ve.ElementRef,ve.Renderer,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ve["ɵted"](null,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n                        "])),(e()(),ve["ɵand"](16777216,null,null,1,null,g)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵeld"](0,null,null,9,"div",[["class","info-item border"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n                        "])),(e()(),ve["ɵeld"](0,null,null,3,"ion-label",[],null,null,null,null,null)),ve["ɵdid"](16384,null,0,Ct.a,[$n.a,ve.ElementRef,ve.Renderer,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ve["ɵted"](null,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n                        "])),(e()(),ve["ɵand"](16777216,null,null,1,null,v)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵted"](null,["\n\n                "])),(e()(),ve["ɵeld"](0,null,null,13,"ion-col",[["class","col"]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,vt.a,[],null,null),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵeld"](0,null,null,9,"div",[["class","info-item"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n                        "])),(e()(),ve["ɵeld"](0,null,null,3,"ion-label",[],null,null,null,null,null)),ve["ɵdid"](16384,null,0,Ct.a,[$n.a,ve.ElementRef,ve.Renderer,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ve["ɵted"](null,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n                        "])),(e()(),ve["ɵand"](16777216,null,null,1,null,b)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵted"](null,["\n\n                "])),(e()(),ve["ɵeld"](0,null,null,24,"ion-col",[["class","col"]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,vt.a,[],null,null),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵeld"](0,null,null,9,"div",[["class","info-item"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n                        "])),(e()(),ve["ɵeld"](0,null,null,3,"ion-label",[],null,null,null,null,null)),ve["ɵdid"](16384,null,0,Ct.a,[$n.a,ve.ElementRef,ve.Renderer,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ve["ɵted"](null,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n                        "])),(e()(),ve["ɵeld"](0,null,null,1,"span",[],null,null,null,null,null)),(e()(),ve["ɵted"](null,["",""])),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵeld"](0,null,null,9,"div",[["class","info-item border"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n                        "])),(e()(),ve["ɵeld"](0,null,null,3,"ion-label",[],null,null,null,null,null)),ve["ɵdid"](16384,null,0,Ct.a,[$n.a,ve.ElementRef,ve.Renderer,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ve["ɵted"](null,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n                        "])),(e()(),ve["ɵand"](16777216,null,null,1,null,y)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵted"](null,["\n    "])),(e()(),ve["ɵted"](1,["\n\n    "])),(e()(),ve["ɵeld"](0,null,1,12,"div",[["class","card"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,3,"ion-label",[],null,null,null,null,null)),ve["ɵdid"](16384,null,0,Ct.a,[$n.a,ve.ElementRef,ve.Renderer,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ve["ɵted"](null,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵand"](16777216,null,null,1,null,_)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵand"](16777216,null,null,1,null,R)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n    "])),(e()(),ve["ɵted"](1,["\n\n    "])),(e()(),ve["ɵeld"](0,null,1,36,"div",[["class","card"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,3,"ion-label",[],null,null,null,null,null)),ve["ɵdid"](16384,null,0,Ct.a,[$n.a,ve.ElementRef,ve.Renderer,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ve["ɵted"](null,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵand"](16777216,null,null,1,null,S)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n\n        "])),(e()(),ve["ɵeld"](0,null,null,3,"ion-label",[],null,null,null,null,null)),ve["ɵdid"](16384,null,0,Ct.a,[$n.a,ve.ElementRef,ve.Renderer,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ve["ɵted"](null,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵand"](16777216,null,null,1,null,O)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n\n        "])),(e()(),ve["ɵeld"](0,null,null,9,"div",[],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵeld"](0,null,null,3,"ion-label",[],null,null,null,null,null)),ve["ɵdid"](16384,null,0,Ct.a,[$n.a,ve.ElementRef,ve.Renderer,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ve["ɵted"](null,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵand"](16777216,null,null,1,null,A)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵted"](null,["\n\n        "])),(e()(),ve["ɵeld"](0,null,null,3,"ion-label",[],null,null,null,null,null)),ve["ɵdid"](16384,null,0,Ct.a,[$n.a,ve.ElementRef,ve.Renderer,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ve["ɵted"](null,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵand"](16777216,null,null,1,null,C)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n    "])),(e()(),ve["ɵted"](1,["\n\n"])),(e()(),ve["ɵted"](null,["\n\n"])),(e()(),ve["ɵeld"](0,null,null,8,"ion-footer",[],null,null,null,null,null)),ve["ɵdid"](16384,null,0,It.a,[$n.a,ve.ElementRef,ve.Renderer,[2,Wn.a]],null,null),(e()(),ve["ɵted"](null,["\n    "])),(e()(),ve["ɵand"](16777216,null,null,1,null,I)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n    "])),(e()(),ve["ɵand"](16777216,null,null,1,null,N)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n"])),(e()(),ve["ɵted"](null,["\n\n"]))],function(e,n){var t=n.component;e(n,2,0);e(n,8,0,t.route);e(n,11,0,t.route);e(n,32,0,t.route);e(n,43,0,t.route);e(n,58,0,t.route);e(n,84,0,t.route);e(n,99,0,t.route&&!t.route.completed);e(n,102,0,(null==t.route?null:t.route.completed)&&(null==t.route?null:t.route.scores.length)>0);e(n,113,0,t.route);e(n,121,0,t.route);e(n,131,0,t.route);e(n,140,0,t.route);e(n,148,0,t.route&&(!t.route.scores||0===t.route.scores.length));e(n,151,0,t.route&&t.route.scores&&t.route.scores.length>0)},function(e,n){var t=n.component;e(n,4,0,ve["ɵnov"](n,5).statusbarPadding,ve["ɵnov"](n,5)._hasRefresher);e(n,28,0,ve["ɵunv"](n,28,0,ve["ɵnov"](n,29).transform("a_t_grade")));e(n,39,0,ve["ɵunv"](n,39,0,ve["ɵnov"](n,40).transform("a_t_distance")));e(n,54,0,ve["ɵunv"](n,54,0,ve["ɵnov"](n,55).transform("p_r_duration")));e(n,69,0,ve["ɵunv"](n,69,0,ve["ɵnov"](n,70).transform("p_tb_tasks")));e(n,73,0,t.totalTasks);e(n,80,0,ve["ɵunv"](n,80,0,ve["ɵnov"](n,81).transform("a_r_length")));e(n,95,0,ve["ɵunv"](n,95,0,ve["ɵnov"](n,96).transform("current_progress")));e(n,109,0,ve["ɵunv"](n,109,0,ve["ɵnov"](n,110).transform("p_r_about")));e(n,117,0,ve["ɵunv"](n,117,0,ve["ɵnov"](n,118).transform("a_action_settings")));e(n,127,0,ve["ɵunv"](n,127,0,ve["ɵnov"](n,128).transform("a_r_equip")));e(n,136,0,ve["ɵunv"](n,136,0,ve["ɵnov"](n,137).transform("a_r_tags")))})}function L(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,45,"div",[["class","modal card has-button-on-the-edge"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n    "])),(e()(),ve["ɵeld"](0,null,null,5,"div",[["class","head"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,2,"h2",[],null,null,null,null,null)),(e()(),ve["ɵted"](null,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n    "])),(e()(),ve["ɵted"](null,["\n\n    "])),(e()(),ve["ɵeld"](0,null,null,27,"div",[["class","modal-content"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,24,"ion-grid",[["class","grid"],["no-padding",""]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,mt.a,[],null,null),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵeld"](0,null,null,12,"ion-row",[["class","row"]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,gt.a,[],null,null),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵeld"](0,null,null,8,"ion-col",[["class","col"]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,vt.a,[],null,null),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵted"](null,["\n                        "])),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵeld"](0,null,null,1,"progress-bar",[],null,null,null,Lt.b,Lt.a)),ve["ɵdid"](49152,null,0,Dt.a,[],{progress:[0,"progress"],color:[1,"color"]},null),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵted"](null,["\n    "])),(e()(),ve["ɵted"](null,["\n    "])),(e()(),ve["ɵeld"](0,null,null,6,"div",[["class","on-the-edge-container"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,3,"button",[["color","danger"],["ion-button",""],["round",""],["small",""]],null,[[null,"click"]],function(e,n,t){var l=!0;if("click"===n){l=!1!==e.component.onCancelClick()&&l}return l},ft.b,ft.a)),ve["ɵdid"](1097728,null,0,pt.a,[[8,""],$n.a,ve.ElementRef,ve.Renderer],{color:[0,"color"],small:[1,"small"],round:[2,"round"]},null),(e()(),ve["ɵted"](0,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n    "])),(e()(),ve["ɵted"](null,["\n"])),(e()(),ve["ɵted"](null,["\n"]))],function(e,n){e(n,24,0,n.component.progress,"#036d99");e(n,41,0,"danger","","")},function(e,n){var t=n.component;e(n,5,0,ve["ɵunv"](n,5,0,ve["ɵnov"](n,6).transform(t.data.titleKey)));e(n,42,0,ve["ɵunv"](n,42,0,ve["ɵnov"](n,43).transform("a_alert_cancel")))})}function D(e){return ve["ɵvid"](0,[(e()(),ve["ɵted"](null,["\n"])),(e()(),ve["ɵeld"](0,null,null,2,"img",[],[[8,"src",4]],[[null,"click"]],function(e,n,t){var l=!0;if("click"===n){l=!1!==e.component.onClick(t)&&l}return l},null,null)),ve["ɵdid"](278528,null,0,nn.i,[ve.IterableDiffers,ve.KeyValueDiffers,ve.ElementRef,ve.Renderer],{ngClass:[0,"ngClass"]},null),ve["ɵpod"]({"full-width":0})],function(e,n){e(n,2,0,e(n,3,0,n.component.fullWidth))},function(e,n){e(n,1,0,n.component.imageUrl)})}function P(e){return ve["ɵvid"](2,[(e()(),ve["ɵted"](null,["\n    "])),(e()(),ve["ɵeld"](0,null,null,0,"div",[["id","yt-player-ngx-component"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n  "]))],null,null)}function x(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,0,"img",[["class","head-icon"]],[[8,"src",4]],null,null,null,null))],null,function(e,n){e(n,0,0,ve["ɵinlineInterpolate"](1,"./assets/icons/",n.component.iconPath,"modal-hint.svg"))})}function U(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,0,"img",[["class","head-icon"]],[[8,"src",4]],null,null,null,null))],null,function(e,n){e(n,0,0,ve["ɵinlineInterpolate"](1,"./assets/icons/",n.component.iconPath,"modal-rating-failed.svg"))})}function M(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,0,"img",[["class","head-icon"]],[[8,"src",4]],null,null,null,null))],null,function(e,n){e(n,0,0,ve["ɵinlineInterpolate"](1,"./assets/icons/",n.component.iconPath,"modal-rating-perfect.svg"))})}function B(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,0,"img",[["class","head-icon"]],[[8,"src",4]],null,null,null,null))],null,function(e,n){e(n,0,0,ve["ɵinlineInterpolate"](1,"./assets/icons/",n.component.iconPath,"modal-rating-good.svg"))})}function V(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,0,"img",[["class","head-icon"]],[[8,"src",4]],null,null,null,null))],null,function(e,n){e(n,0,0,ve["ɵinlineInterpolate"](1,"./assets/icons/",n.component.iconPath,"modal-rating-saved.svg"))})}function F(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,0,"img",[["class","head-icon"]],[[8,"src",4]],null,null,null,null))],null,function(e,n){e(n,0,0,ve["ɵinlineInterpolate"](1,"./assets/icons/",n.component.iconPath,"modal-subtask-info.svg"))})}function q(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,1,"mcm-image",[],null,null,null,D,Bt)),ve["ɵdid"](573440,null,0,Ut.a,[Fe.a,Mt.a,Ce.a],{src:[0,"src"],offline:[1,"offline"],fullWidth:[2,"fullWidth"],photoViewer:[3,"photoViewer"]},null)],function(e,n){e(n,1,0,n.component.message,!0,!0,!0)},null)}function G(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,1,"youtube-player",[],null,null,null,P,Vt)),ve["ɵdid"](1097728,null,0,an,[un,ve.Renderer2],{videoId:[0,"videoId"],height:[1,"height"],width:[2,"width"]},null)],function(e,n){var t=n.component;e(n,1,0,t.videoId,t.videoHeight,t.videoWith)},null)}function H(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,3,"h3",[["class","in-icon-modal score"]],null,null,null,null,null)),ve["ɵdid"](81920,null,0,Nn,[ve.ElementRef,kn.a],{test:[0,"test"]},null),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),ve["ɵppd"](2)],function(e,n){var t=n.component;e(n,1,0,ve["ɵunv"](n,1,0,e(n,3,0,ve["ɵnov"](n.parent.parent,0),ve["ɵunv"](n,1,0,ve["ɵnov"](n,2).transform(t.score,t.param)),t.linkyOptions)))},null)}function z(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,3,"p",[["text-center",""]],null,null,null,null,null)),ve["ɵdid"](81920,null,0,Nn,[ve.ElementRef,kn.a],{test:[0,"test"]},null),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),ve["ɵppd"](2)],function(e,n){var t=n.component;e(n,1,0,ve["ɵunv"](n,1,0,e(n,3,0,ve["ɵnov"](n.parent.parent,0),ve["ɵunv"](n,1,0,ve["ɵnov"](n,2).transform(t.message,t.param)),t.linkyOptions)))},null)}function K(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,38,"div",[["class","modal-content"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵand"](16777216,null,null,1,null,x)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵand"](16777216,null,null,1,null,U)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵand"](16777216,null,null,1,null,M)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵand"](16777216,null,null,1,null,B)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵand"](16777216,null,null,1,null,V)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵand"](16777216,null,null,1,null,F)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,2,"h2",[],null,null,null,null,null)),(e()(),ve["ɵted"](null,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n\n        "])),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵand"](16777216,null,null,1,null,q)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n\n        "])),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵand"](16777216,null,null,1,null,G)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n\n         "])),(e()(),ve["ɵand"](16777216,null,null,1,null,H)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n\n        "])),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵand"](16777216,null,null,1,null,z)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n\n    "]))],function(e,n){var t=n.component;e(n,3,0,1==t.modalType&&"image"!=t.type&&"video"!=t.type);e(n,6,0,2==t.modalType);e(n,9,0,3==t.modalType);e(n,12,0,5==t.modalType);e(n,15,0,6==t.modalType);e(n,18,0,7==t.modalType);e(n,26,0,"image"==t.type);e(n,30,0,1==t.modalType&&t.videoId);e(n,33,0,t.gamificationEnabled&&t.score&&"0"!=t.score);e(n,37,0,1==t.modalType&&"text"==t.type||2==t.modalType||3==t.modalType||5==t.modalType||6==t.modalType||7==t.modalType)},function(e,n){var t=n.component;e(n,21,0,ve["ɵunv"](n,21,0,ve["ɵnov"](n,22).transform(t.title)))})}function J(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,0,"img",[["class","head-icon"],["src","./assets/icons/modal-rating-perfect.svg"]],null,null,null,null,null))],null,null)}function W(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,1,"mcm-image",[["class","full-width"]],null,null,null,D,Bt)),ve["ɵdid"](573440,null,0,Ut.a,[Fe.a,Mt.a,Ce.a],{src:[0,"src"],offline:[1,"offline"],fullWidth:[2,"fullWidth"],photoViewer:[3,"photoViewer"]},null)],function(e,n){e(n,1,0,n.component.imageUrl,!0,!0,!0)},null)}function X(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,3,"p",[],null,null,null,null,null)),ve["ɵdid"](81920,null,0,Nn,[ve.ElementRef,kn.a],{test:[0,"test"]},null),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),ve["ɵppd"](2)],function(e,n){var t=n.component;e(n,1,0,ve["ɵunv"](n,1,0,e(n,3,0,ve["ɵnov"](n.parent.parent,0),ve["ɵunv"](n,1,0,ve["ɵnov"](n,2).transform(n.context.$implicit,t.param)),t.linkyOptions)))},null)}function Y(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,15,"div",[["class","modal-content"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵand"](16777216,null,null,1,null,J)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,2,"h2",[],null,null,null,null,null)),(e()(),ve["ɵted"](null,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n\n        "])),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵand"](16777216,null,null,1,null,W)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n\n        "])),(e()(),ve["ɵand"](16777216,null,null,1,null,X)),ve["ɵdid"](802816,null,0,nn.j,[ve.ViewContainerRef,ve.TemplateRef,ve.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),ve["ɵted"](null,["\n\n    "]))],function(e,n){var t=n.component;e(n,3,0,!t.imageUrl&&4!=t.modalType);e(n,11,0,t.imageUrl);e(n,14,0,t.messages)},function(e,n){var t=n.component;e(n,6,0,ve["ɵunv"](n,6,0,ve["ɵnov"](n,7).transform(t.title)))})}function $(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,5,"button",[["ion-button",""],["round",""],["small",""]],null,[[null,"click"]],function(e,n,t){var l=!0;if("click"===n){l=!1!==e.context.$implicit.callback()&&l}return l},ft.b,ft.a)),ve["ɵdid"](278528,null,0,nn.i,[ve.IterableDiffers,ve.KeyValueDiffers,ve.ElementRef,ve.Renderer],{ngClass:[0,"ngClass"]},null),ve["ɵpod"]({"col-33":0}),ve["ɵdid"](1097728,null,0,pt.a,[[8,""],$n.a,ve.ElementRef,ve.Renderer],{small:[0,"small"],round:[1,"round"]},null),(e()(),ve["ɵted"](0,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef])],function(e,n){e(n,1,0,e(n,2,0,n.component.buttons.length>2));e(n,3,0,"","")},function(e,n){e(n,4,0,ve["ɵunv"](n,4,0,ve["ɵnov"](n,5).transform(n.context.$implicit.title)))})}function Q(e){return ve["ɵvid"](0,[ve["ɵpid"](0,Ft.LinkyPipe,[]),(e()(),ve["ɵeld"](0,null,null,15,"div",[["class","modal card icon has-button-on-the-edge"]],null,null,null,null,null)),ve["ɵdid"](278528,null,0,nn.i,[ve.IterableDiffers,ve.KeyValueDiffers,ve.ElementRef,ve.Renderer],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ve["ɵpod"]({"no-icon":0,"no-icon":1,hint:2,failed:3,perfect:4,good:5}),(e()(),ve["ɵted"](null,["\n\n     "])),(e()(),ve["ɵand"](16777216,null,null,1,null,K)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n    "])),(e()(),ve["ɵand"](16777216,null,null,1,null,Y)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n\n    "])),(e()(),ve["ɵeld"](0,null,null,4,"div",[["class","on-the-edge-container"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵand"](16777216,null,null,1,null,$)),ve["ɵdid"](802816,null,0,nn.j,[ve.ViewContainerRef,ve.TemplateRef,ve.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),ve["ɵted"](null,["\n    "])),(e()(),ve["ɵted"](null,["\n"])),(e()(),ve["ɵted"](null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,"modal card icon has-button-on-the-edge",e(n,3,0,"image"!=t.type,4==t.modalType||8==t.modalType,1==t.modalType,2==t.modalType,3==t.modalType,5==t.modalType));e(n,6,0,4!=t.modalType);e(n,9,0,4==t.modalType);e(n,14,0,t.buttons)},null)}function Z(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,2,"span",[],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n            ","\n        "])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef])],null,function(e,n){e(n,1,0,ve["ɵunv"](n,1,0,ve["ɵnov"](n,2).transform("a_private_route_failed")))})}function ee(e){return ve["ɵvid"](0,[ve["ɵqud"](402653184,1,{input:0}),(e()(),ve["ɵted"](null,["\n    "])),(e()(),ve["ɵted"](null,["\n\n    "])),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵted"](null,["\n    "])),(e()(),ve["ɵted"](null,["\n\n    "])),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵted"](null,["\n    "])),(e()(),ve["ɵted"](null,["\n"])),(e()(),ve["ɵted"](null,["\n\n"])),(e()(),ve["ɵeld"](0,null,null,43,"div",[["class","modal card has-button-on-the-edge"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n    "])),(e()(),ve["ɵeld"](0,null,null,27,"div",[["class","modal-content"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,2,"h2",[],null,null,null,null,null)),(e()(),ve["ɵted"](null,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,2,"p",[],null,null,null,null,null)),(e()(),ve["ɵted"](null,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,Ht.b,Ht.a)),ve["ɵdid"](1097728,null,3,zt.a,[Kt.a,$n.a,ve.ElementRef,ve.Renderer,[2,Jt.a]],null,null),ve["ɵqud"](335544320,2,{contentLabel:0}),ve["ɵqud"](603979776,3,{_buttons:1}),ve["ɵqud"](603979776,4,{_icons:1}),ve["ɵdid"](16384,null,0,Wt.a,[],null,null),(e()(),ve["ɵted"](2,["\n            "])),(e()(),ve["ɵeld"](0,null,3,5,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,n,t){var l=!0;if("ngModelChange"===n){l=!1!==(e.component.code=t)&&l}return l},Xt.b,Xt.a)),ve["ɵdid"](671744,null,0,Yt.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),ve["ɵprd"](2048,null,Yt.f,null,[Yt.h]),ve["ɵdid"](16384,null,0,Yt.g,[Yt.f],null,null),ve["ɵdid"](5423104,[[1,4],["input",4]],0,$t.a,[$n.a,Qn.a,Kt.a,Yn.a,ve.ElementRef,ve.Renderer,[2,Ot.a],[2,zt.a],[2,Yt.f],tt.a],{type:[0,"type"]},null),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵted"](2,["\n        "])),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵand"](16777216,null,null,1,null,Z)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n    "])),(e()(),ve["ɵted"](null,["\n\n    "])),(e()(),ve["ɵeld"](0,null,null,11,"div",[["class","on-the-edge-container"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,3,"button",[["color","danger"],["ion-button",""],["round",""],["small",""]],null,[[null,"click"]],function(e,n,t){var l=!0;if("click"===n){l=!1!==e.component.cancel()&&l}return l},ft.b,ft.a)),ve["ɵdid"](1097728,null,0,pt.a,[[8,""],$n.a,ve.ElementRef,ve.Renderer],{color:[0,"color"],small:[1,"small"],round:[2,"round"]},null),(e()(),ve["ɵted"](0,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,3,"button",[["ion-button",""],["round",""],["small",""]],[[8,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0;if("click"===n){l=!1!==e.component.addTrailOrSessionByCode()&&l}return l},ft.b,ft.a)),ve["ɵdid"](1097728,null,0,pt.a,[[8,""],$n.a,ve.ElementRef,ve.Renderer],{small:[0,"small"],round:[1,"round"]},null),(e()(),ve["ɵted"](0,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n    "])),(e()(),ve["ɵted"](null,["\n"]))],function(e,n){var t=n.component;e(n,37,0,t.code);e(n,40,0,"text");e(n,45,0,t.showError);e(n,51,0,"danger","","");e(n,56,0,"","")},function(e,n){var t=n.component;e(n,22,0,ve["ɵunv"](n,22,0,ve["ɵnov"](n,23).transform("a_private_trail_or_session_add_title")));e(n,26,0,ve["ɵunv"](n,26,0,ve["ɵnov"](n,27).transform("a_add_private_route_or_session_placeholder")));e(n,36,0,ve["ɵnov"](n,39).ngClassUntouched,ve["ɵnov"](n,39).ngClassTouched,ve["ɵnov"](n,39).ngClassPristine,ve["ɵnov"](n,39).ngClassDirty,ve["ɵnov"](n,39).ngClassValid,ve["ɵnov"](n,39).ngClassInvalid,ve["ɵnov"](n,39).ngClassPending);e(n,52,0,ve["ɵunv"](n,52,0,ve["ɵnov"](n,53).transform("a_alert_cancel")));e(n,55,0,!t.checkInputField());e(n,57,0,ve["ɵunv"](n,57,0,ve["ɵnov"](n,58).transform("a_private_trail_or_session_add")))})}function ne(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,2,"span",[],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n            ","\n        "])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef])],null,function(e,n){e(n,1,0,ve["ɵunv"](n,1,0,ve["ɵnov"](n,2).transform("a_private_route_failed")))})}function te(e){return ve["ɵvid"](0,[ve["ɵqud"](402653184,1,{input:0}),(e()(),ve["ɵeld"](0,null,null,47,"div",[["class","modal card has-button-on-the-edge"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n    "])),(e()(),ve["ɵeld"](0,null,null,31,"div",[["class","modal-content"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,2,"h2",[],null,null,null,null,null)),(e()(),ve["ɵted"](null,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,1,"p",[["class","terms"]],[[8,"innerHTML",1]],[[null,"click"]],function(e,n,t){var l=!0;if("click"===n){l=!1!==e.component.openTermsAndConditions()&&l}return l},null,null)),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,18,"ion-item",[["class","item item-block"]],null,null,null,Ht.b,Ht.a)),ve["ɵdid"](1097728,null,3,zt.a,[Kt.a,$n.a,ve.ElementRef,ve.Renderer,[2,Jt.a]],null,null),ve["ɵqud"](335544320,2,{contentLabel:0}),ve["ɵqud"](603979776,3,{_buttons:1}),ve["ɵqud"](603979776,4,{_icons:1}),ve["ɵdid"](16384,null,0,Wt.a,[],null,null),(e()(),ve["ɵted"](2,["\n            "])),(e()(),ve["ɵeld"](0,null,1,3,"ion-label",[],null,null,null,null,null)),ve["ɵdid"](16384,[[2,4]],0,Ct.a,[$n.a,ve.ElementRef,ve.Renderer,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ve["ɵted"](null,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](2,["\n            "])),(e()(),ve["ɵeld"](0,null,0,5,"ion-checkbox",[],[[2,"checkbox-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],function(e,n,t){var l=!0,i=e.component;if("click"===n){l=!1!==ve["ɵnov"](e,25)._click(t)&&l}if("ngModelChange"===n){l=!1!==(i.tacCheckbox=t)&&l}return l},el.b,el.a)),ve["ɵdid"](1228800,null,0,nl.a,[$n.a,Kt.a,[2,zt.a],ve.ElementRef,ve.Renderer],null,null),ve["ɵprd"](1024,null,Yt.e,function(e){return[e]},[nl.a]),ve["ɵdid"](671744,null,0,Yt.h,[[8,null],[8,null],[8,null],[2,Yt.e]],{model:[0,"model"]},{update:"ngModelChange"}),ve["ɵprd"](2048,null,Yt.f,null,[Yt.h]),ve["ɵdid"](16384,null,0,Yt.g,[Yt.f],null,null),(e()(),ve["ɵted"](2,["\n        "])),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵand"](16777216,null,null,1,null,ne)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n    "])),(e()(),ve["ɵted"](null,["\n\n    "])),(e()(),ve["ɵeld"](0,null,null,11,"div",[["class","on-the-edge-container"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,3,"button",[["color","danger"],["ion-button",""],["round",""],["small",""]],null,[[null,"click"]],function(e,n,t){var l=!0;if("click"===n){l=!1!==e.component.cancel()&&l}return l},ft.b,ft.a)),ve["ɵdid"](1097728,null,0,pt.a,[[8,""],$n.a,ve.ElementRef,ve.Renderer],{color:[0,"color"],small:[1,"small"],round:[2,"round"]},null),(e()(),ve["ɵted"](0,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,3,"button",[["ion-button",""],["round",""],["small",""]],[[8,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0;if("click"===n){l=!1!==e.component.addJoinSession()&&l}return l},ft.b,ft.a)),ve["ɵdid"](1097728,null,0,pt.a,[[8,""],$n.a,ve.ElementRef,ve.Renderer],{small:[0,"small"],round:[1,"round"]},null),(e()(),ve["ɵted"](0,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n    "])),(e()(),ve["ɵted"](null,["\n"]))],function(e,n){var t=n.component;e(n,27,0,t.tacCheckbox);e(n,33,0,t.showError);e(n,39,0,"danger","","");e(n,44,0,"","")},function(e,n){var t=n.component;e(n,6,0,ve["ɵunv"](n,6,0,ve["ɵnov"](n,7).transform("a_terms_and_conditions_title")));e(n,9,0,ve["ɵunv"](n,9,0,ve["ɵnov"](n,10).transform("a_terms_and_conditions_text")));e(n,21,0,ve["ɵunv"](n,21,0,ve["ɵnov"](n,22).transform("a_terms_and_conditions_checkbox")));e(n,24,0,ve["ɵnov"](n,25)._disabled,ve["ɵnov"](n,29).ngClassUntouched,ve["ɵnov"](n,29).ngClassTouched,ve["ɵnov"](n,29).ngClassPristine,ve["ɵnov"](n,29).ngClassDirty,ve["ɵnov"](n,29).ngClassValid,ve["ɵnov"](n,29).ngClassInvalid,ve["ɵnov"](n,29).ngClassPending);e(n,40,0,ve["ɵunv"](n,40,0,ve["ɵnov"](n,41).transform("a_alert_cancel")));e(n,43,0,!t.tacCheckbox);e(n,45,0,ve["ɵunv"](n,45,0,ve["ɵnov"](n,46).transform("a_terms_and_conditions_continue")))})}function le(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,14,"div",[["class","input-secondary"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵeld"](0,null,null,9,"ion-item",[["class","item item-block"]],null,null,null,Ht.b,Ht.a)),ve["ɵdid"](1097728,null,3,zt.a,[Kt.a,$n.a,ve.ElementRef,ve.Renderer,[2,Jt.a]],null,null),ve["ɵqud"](335544320,5,{contentLabel:0}),ve["ɵqud"](603979776,6,{_buttons:1}),ve["ɵqud"](603979776,7,{_icons:1}),ve["ɵdid"](16384,null,0,Wt.a,[],null,null),(e()(),ve["ɵted"](2,["\n                        "])),(e()(),ve["ɵeld"](0,null,3,1,"ion-input",[],null,null,null,Xt.b,Xt.a)),ve["ɵdid"](5423104,null,0,$t.a,[$n.a,Qn.a,Kt.a,Yn.a,ve.ElementRef,ve.Renderer,[2,Ot.a],[2,zt.a],[2,Yt.f],tt.a],{value:[0,"value"],disabled:[1,"disabled"]},null),(e()(),ve["ɵted"](2,["\n                    "])),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵeld"](0,null,null,0,"img",[["class",""],["src","./assets/icons/remove.svg"]],null,[[null,"click"]],function(e,n,t){var l=!0;if("click"===n){l=!1!==e.component.removeTeamMemberName(e.context.index)&&l}return l},null,null)),(e()(),ve["ɵted"](null,["\n                "]))],function(e,n){e(n,10,0,ve["ɵinlineInterpolate"](1,"",n.context.$implicit,""),!0)},null)}function ie(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,2,"span",[],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n            ","\n        "])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef])],null,function(e,n){e(n,1,0,ve["ɵunv"](n,1,0,ve["ɵnov"](n,2).transform("a_private_route_failed")))})}function oe(e){return ve["ɵvid"](0,[ve["ɵqud"](402653184,1,{input:0}),(e()(),ve["ɵeld"](0,null,null,77,"div",[["class","modal icon card has-button-on-the-edge"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n    "])),(e()(),ve["ɵeld"](0,null,null,61,"div",[["class","modal-content"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,0,"img",[["class","head-icon"],["src","./assets/icons/modal-session-join.svg"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),ve["ɵted"](null,['"','"'])),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,1,"p",[["class","main-text"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["",""])),(e()(),ve["ɵted"](null,["\n\n            "])),(e()(),ve["ɵeld"](0,null,null,3,"ion-label",[],null,null,null,null,null)),ve["ɵdid"](16384,null,0,Ct.a,[$n.a,ve.ElementRef,ve.Renderer,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ve["ɵted"](null,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵeld"](0,null,null,12,"ion-item",[["class","item item-block"]],null,null,null,Ht.b,Ht.a)),ve["ɵdid"](1097728,null,3,zt.a,[Kt.a,$n.a,ve.ElementRef,ve.Renderer,[2,Jt.a]],null,null),ve["ɵqud"](335544320,2,{contentLabel:0}),ve["ɵqud"](603979776,3,{_buttons:1}),ve["ɵqud"](603979776,4,{_icons:1}),ve["ɵdid"](16384,null,0,Wt.a,[],null,null),(e()(),ve["ɵted"](2,["\n                "])),(e()(),ve["ɵeld"](0,null,3,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,n,t){var l=!0;if("ngModelChange"===n){l=!1!==(e.component.teamName=t)&&l}return l},Xt.b,Xt.a)),ve["ɵdid"](671744,null,0,Yt.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),ve["ɵprd"](2048,null,Yt.f,null,[Yt.h]),ve["ɵdid"](16384,null,0,Yt.g,[Yt.f],null,null),ve["ɵdid"](5423104,[[1,4],["input",4]],0,$t.a,[$n.a,Qn.a,Kt.a,Yn.a,ve.ElementRef,ve.Renderer,[2,Ot.a],[2,zt.a],[2,Yt.f],tt.a],{type:[0,"type"]},null),(e()(),ve["ɵted"](2,["\n            "])),(e()(),ve["ɵted"](null,["\n\n            "])),(e()(),ve["ɵeld"](0,null,null,28,"div",[["class","input-container"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵeld"](0,null,null,3,"ion-label",[],null,null,null,null,null)),ve["ɵdid"](16384,null,0,Ct.a,[$n.a,ve.ElementRef,ve.Renderer,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ve["ɵted"](null,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵand"](16777216,null,null,1,null,le)),ve["ɵdid"](802816,null,0,nn.j,[ve.ViewContainerRef,ve.TemplateRef,ve.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵeld"](0,null,null,17,"div",[["class","input-main"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵeld"](0,null,null,12,"ion-item",[["class","item item-block"]],null,null,null,Ht.b,Ht.a)),ve["ɵdid"](1097728,null,3,zt.a,[Kt.a,$n.a,ve.ElementRef,ve.Renderer,[2,Jt.a]],null,null),ve["ɵqud"](335544320,8,{contentLabel:0}),ve["ɵqud"](603979776,9,{_buttons:1}),ve["ɵqud"](603979776,10,{_icons:1}),ve["ɵdid"](16384,null,0,Wt.a,[],null,null),(e()(),ve["ɵted"](2,["\n                        "])),(e()(),ve["ɵeld"](0,null,3,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,n,t){var l=!0;if("ngModelChange"===n){l=!1!==(e.component.teamMemberNames=t)&&l}return l},Xt.b,Xt.a)),ve["ɵdid"](671744,null,0,Yt.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),ve["ɵprd"](2048,null,Yt.f,null,[Yt.h]),ve["ɵdid"](16384,null,0,Yt.g,[Yt.f],null,null),ve["ɵdid"](5423104,[[1,4],["input",4]],0,$t.a,[$n.a,Qn.a,Kt.a,Yn.a,ve.ElementRef,ve.Renderer,[2,Ot.a],[2,zt.a],[2,Yt.f],tt.a],{type:[0,"type"]},null),(e()(),ve["ɵted"](2,["\n                    "])),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵeld"](0,null,null,0,"img",[["class",""],["src","./assets/icons/add.svg"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;if("click"===n){l=!1!==i.addTeamMemberName(i.teamMemberNames)&&l}return l},null,null)),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵted"](null,["\n\n        "])),(e()(),ve["ɵand"](16777216,null,null,1,null,ie)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n    "])),(e()(),ve["ɵted"](null,["\n\n    "])),(e()(),ve["ɵeld"](0,null,null,11,"div",[["class","on-the-edge-container"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,3,"button",[["color","danger"],["ion-button",""],["round",""],["small",""]],null,[[null,"click"]],function(e,n,t){var l=!0;if("click"===n){l=!1!==e.component.cancel()&&l}return l},ft.b,ft.a)),ve["ɵdid"](1097728,null,0,pt.a,[[8,""],$n.a,ve.ElementRef,ve.Renderer],{color:[0,"color"],small:[1,"small"],round:[2,"round"]},null),(e()(),ve["ɵted"](0,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,3,"button",[["ion-button",""],["round",""],["small",""]],[[8,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0;if("click"===n){l=!1!==e.component.start()&&l}return l},ft.b,ft.a)),ve["ɵdid"](1097728,null,0,pt.a,[[8,""],$n.a,ve.ElementRef,ve.Renderer],{small:[0,"small"],round:[1,"round"]},null),(e()(),ve["ɵted"](0,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n    "])),(e()(),ve["ɵted"](null,["\n"])),(e()(),ve["ɵted"](null,["\n"]))],function(e,n){var t=n.component;e(n,26,0,t.teamName);e(n,29,0,"text");e(n,40,0,t.teamMemberArray);e(n,52,0,t.teamMemberNames);e(n,55,0,"text");e(n,63,0,t.showError);e(n,69,0,"danger","","");e(n,74,0,"","")},function(e,n){var t=n.component;e(n,8,0,t.session.name);e(n,11,0,t.session.welcome_message);e(n,15,0,ve["ɵunv"](n,15,0,ve["ɵnov"](n,16).transform("a_team_name")));e(n,25,0,ve["ɵnov"](n,28).ngClassUntouched,ve["ɵnov"](n,28).ngClassTouched,ve["ɵnov"](n,28).ngClassPristine,ve["ɵnov"](n,28).ngClassDirty,ve["ɵnov"](n,28).ngClassValid,ve["ɵnov"](n,28).ngClassInvalid,ve["ɵnov"](n,28).ngClassPending);e(n,36,0,ve["ɵunv"](n,36,0,ve["ɵnov"](n,37).transform("a_team_members")));e(n,51,0,ve["ɵnov"](n,54).ngClassUntouched,ve["ɵnov"](n,54).ngClassTouched,ve["ɵnov"](n,54).ngClassPristine,ve["ɵnov"](n,54).ngClassDirty,ve["ɵnov"](n,54).ngClassValid,ve["ɵnov"](n,54).ngClassInvalid,ve["ɵnov"](n,54).ngClassPending);e(n,70,0,ve["ɵunv"](n,70,0,ve["ɵnov"](n,71).transform("a_alert_cancel")));e(n,73,0,!t.checkInputField());e(n,75,0,ve["ɵunv"](n,75,0,ve["ɵnov"](n,76).transform("a_session_enter")))})}function re(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,19,"ion-row",[["class","finish row"]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,gt.a,[],null,null),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵeld"](0,null,null,7,"ion-col",[["class","col"]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,vt.a,[],null,null),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵeld"](0,null,null,3,"ion-label",[],null,null,null,null,null)),ve["ɵdid"](16384,null,0,Ct.a,[$n.a,ve.ElementRef,ve.Renderer,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ve["ɵted"](null,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵeld"](0,null,null,6,"ion-col",[["class","col"],["col-auto",""]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,vt.a,[],null,null),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵeld"](0,null,null,2,"ion-label",[["class","score"]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,Ct.a,[$n.a,ve.ElementRef,ve.Renderer,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ve["ɵted"](null,["",""])),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵted"](null,["\n            "]))],null,function(e,n){var t=n.component;e(n,8,0,ve["ɵunv"](n,8,0,ve["ɵnov"](n,9).transform("a_private_session_earned_points")));e(n,17,0,t.score.score)})}function ue(e){return ve["ɵvid"](0,[ve["ɵqud"](402653184,1,{input:0}),(e()(),ve["ɵeld"](0,null,null,49,"div",[["class","modal card icon has-button-on-the-edge"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n\n    "])),(e()(),ve["ɵeld"](0,null,null,38,"div",[["class","modal-content"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,0,"img",[["class","head-icon"]],[[8,"src",4]],null,null,null,null)),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,2,"h2",[],null,null,null,null,null)),(e()(),ve["ɵted"](null,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,1,"p",[["class","main-text"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["",""])),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,26,"ion-grid",[["class","table grid"],["no-padding",""]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,mt.a,[],null,null),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵand"](16777216,null,null,1,null,re)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵeld"](0,null,null,19,"ion-row",[["class","finish row"]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,gt.a,[],null,null),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵeld"](0,null,null,7,"ion-col",[["class","col"]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,vt.a,[],null,null),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵeld"](0,null,null,3,"ion-label",[],null,null,null,null,null)),ve["ɵdid"](16384,null,0,Ct.a,[$n.a,ve.ElementRef,ve.Renderer,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ve["ɵted"](null,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵeld"](0,null,null,6,"ion-col",[["class","col"],["col-auto",""]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,vt.a,[],null,null),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵeld"](0,null,null,2,"ion-label",[],null,null,null,null,null)),ve["ɵdid"](16384,null,0,Ct.a,[$n.a,ve.ElementRef,ve.Renderer,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ve["ɵted"](null,[""," / ",""])),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵted"](null,["\n    "])),(e()(),ve["ɵted"](null,["\n\n    "])),(e()(),ve["ɵeld"](0,null,null,6,"div",[["class","on-the-edge-container"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,3,"button",[["ion-button",""],["round",""],["small",""]],null,[[null,"click"]],function(e,n,t){var l=!0;if("click"===n){l=!1!==e.component.backToStart()&&l}return l},ft.b,ft.a)),ve["ɵdid"](1097728,null,0,pt.a,[[8,""],$n.a,ve.ElementRef,ve.Renderer],{small:[0,"small"],round:[1,"round"]},null),(e()(),ve["ɵted"](0,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n    "])),(e()(),ve["ɵted"](null,["\n"])),(e()(),ve["ɵted"](null,["\n"]))],function(e,n){var t=n.component;e(n,18,0,t.score.score&&0!=t.score.score);e(n,46,0,"","")},function(e,n){var t=n.component;e(n,5,0,ve["ɵinlineInterpolate"](1,"./assets/icons/",t.iconPath,"modal-session-finished.svg"));e(n,8,0,ve["ɵunv"](n,8,0,ve["ɵnov"](n,9).transform("a_private_session_finished_title")));e(n,12,0,t.session.goodbye_message);e(n,28,0,ve["ɵunv"](n,28,0,ve["ɵnov"](n,29).transform("a_private_session_finished_tasks")));e(n,37,0,t.numberOfSolvedTasks,t.tasks.length);e(n,47,0,ve["ɵunv"](n,47,0,ve["ɵnov"](n,48).transform("a_g_ok")))})}function ae(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,3,"button",[["ion-button",""],["round",""],["small",""]],null,[[null,"click"]],function(e,n,t){var l=!0;if("click"===n){l=!1!==e.context.$implicit.callback()&&l}return l},ft.b,ft.a)),ve["ɵdid"](1097728,null,0,pt.a,[[8,""],$n.a,ve.ElementRef,ve.Renderer],{small:[0,"small"],round:[1,"round"]},null),(e()(),ve["ɵted"](0,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef])],function(e,n){e(n,1,0,"","")},function(e,n){e(n,2,0,ve["ɵunv"](n,2,0,ve["ɵnov"](n,3).transform(n.context.$implicit.title)))})}function se(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,19,"div",[["class","modal card icon intro has-button-on-the-edge"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n    "])),(e()(),ve["ɵeld"](0,null,null,10,"div",[["class","modal-content"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,0,"img",[["class","head-icon"]],[[8,"src",4]],null,null,null,null)),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,2,"h2",[],null,null,null,null,null)),(e()(),ve["ɵted"](null,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,1,"p",[],[[8,"innerHTML",1]],null,null,null,null)),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n    "])),(e()(),ve["ɵted"](null,["\n\n    "])),(e()(),ve["ɵeld"](0,null,null,4,"div",[["class","on-the-edge-container"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵand"](16777216,null,null,1,null,ae)),ve["ɵdid"](802816,null,0,nn.j,[ve.ViewContainerRef,ve.TemplateRef,ve.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),ve["ɵted"](null,["\n    "])),(e()(),ve["ɵted"](null,["\n"])),(e()(),ve["ɵted"](null,["\n"]))],function(e,n){e(n,17,0,n.component.buttons)},function(e,n){var t=n.component;e(n,4,0,ve["ɵinlineInterpolate"](1,"./assets/icons/",t.narrative,"/modal-intro.svg"));e(n,7,0,ve["ɵunv"](n,7,0,ve["ɵnov"](n,8).transform(t.title)));e(n,10,0,ve["ɵunv"](n,10,0,ve["ɵnov"](n,11).transform(t.message)))})}function ce(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,19,"ion-row",[["class","finish row"]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,gt.a,[],null,null),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵeld"](0,null,null,7,"ion-col",[["class","col"]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,vt.a,[],null,null),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵeld"](0,null,null,3,"ion-label",[],null,null,null,null,null)),ve["ɵdid"](16384,null,0,Ct.a,[$n.a,ve.ElementRef,ve.Renderer,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ve["ɵted"](null,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵeld"](0,null,null,6,"ion-col",[["class","col"],["col-auto",""]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,vt.a,[],null,null),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵeld"](0,null,null,2,"ion-label",[["class","score"]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,Ct.a,[$n.a,ve.ElementRef,ve.Renderer,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ve["ɵted"](null,["",""])),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵted"](null,["\n            "]))],null,function(e,n){var t=n.component;e(n,8,0,ve["ɵunv"](n,8,0,ve["ɵnov"](n,9).transform("a_private_session_earned_points")));e(n,17,0,t.score.score)})}function de(e){return ve["ɵvid"](0,[ve["ɵqud"](402653184,1,{input:0}),(e()(),ve["ɵeld"](0,null,null,46,"div",[["class","modal card icon has-button-on-the-edge"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n\n    "])),(e()(),ve["ɵeld"](0,null,null,35,"div",[["class","modal-content"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,0,"img",[["class","head-icon"]],[[8,"src",4]],null,null,null,null)),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,2,"h2",[],null,null,null,null,null)),(e()(),ve["ɵted"](null,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,26,"ion-grid",[["class","table grid"],["no-padding",""]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,mt.a,[],null,null),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵand"](16777216,null,null,1,null,ce)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵeld"](0,null,null,19,"ion-row",[["class","finish row"]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,gt.a,[],null,null),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵeld"](0,null,null,7,"ion-col",[["class","col"]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,vt.a,[],null,null),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵeld"](0,null,null,3,"ion-label",[],null,null,null,null,null)),ve["ɵdid"](16384,null,0,Ct.a,[$n.a,ve.ElementRef,ve.Renderer,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ve["ɵted"](null,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵeld"](0,null,null,6,"ion-col",[["class","col"],["col-auto",""]],null,null,null,null,null)),ve["ɵdid"](16384,null,0,vt.a,[],null,null),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵeld"](0,null,null,2,"ion-label",[],null,null,null,null,null)),ve["ɵdid"](16384,null,0,Ct.a,[$n.a,ve.ElementRef,ve.Renderer,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ve["ɵted"](null,[""," / ",""])),(e()(),ve["ɵted"](null,["\n                "])),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵted"](null,["\n    "])),(e()(),ve["ɵted"](null,["\n\n    "])),(e()(),ve["ɵeld"](0,null,null,6,"div",[["class","on-the-edge-container"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,3,"button",[["ion-button",""],["round",""],["small",""]],null,[[null,"click"]],function(e,n,t){var l=!0;if("click"===n){l=!1!==e.component.callback()&&l}return l},ft.b,ft.a)),ve["ɵdid"](1097728,null,0,pt.a,[[8,""],$n.a,ve.ElementRef,ve.Renderer],{small:[0,"small"],round:[1,"round"]},null),(e()(),ve["ɵted"](0,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n    "])),(e()(),ve["ɵted"](null,["\n"])),(e()(),ve["ɵted"](null,["\n"]))],function(e,n){var t=n.component;e(n,15,0,t.score.score&&0!=t.score.score);e(n,43,0,"","")},function(e,n){var t=n.component;e(n,5,0,ve["ɵinlineInterpolate"](1,"./assets/icons/",t.iconPath,"modal-trail-finished.svg"));e(n,8,0,ve["ɵunv"](n,8,0,ve["ɵnov"](n,9).transform("a_trail_finished_title")));e(n,25,0,ve["ɵunv"](n,25,0,ve["ɵnov"](n,26).transform("a_private_session_finished_tasks")));e(n,34,0,t.numberOfSolvedTasks,t.tasks.length);e(n,44,0,ve["ɵunv"](n,44,0,ve["ɵnov"](n,45).transform("a_g_ok")))})}function fe(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),ve["ɵted"](null,["",""]))],null,function(e,n){e(n,1,0,n.component.route.title)})}function pe(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,3,"p",[],null,null,null,null,null)),(e()(),ve["ɵeld"](0,null,null,2,"b",[],null,null,null,null,null)),(e()(),ve["ɵted"](null,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef])],null,function(e,n){e(n,2,0,ve["ɵunv"](n,2,0,ve["ɵnov"](n,3).transform("a_startAt")))})}function he(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,11,"div",[["class","dotted-border-bottom"],["tappable",""]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;if("click"===n){l=!1!==i.showRoute(i.route,e.context.$implicit)&&l}return l},null,null)),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵted"](null,["\n            "])),(e()(),ve["ɵeld"](0,null,null,2,"span",[],[[2,"perfect",null],[2,"failed",null],[2,"good",null]],null,null,null,null)),(e()(),ve["ɵted"](null,["\n                    "])),(e()(),ve["ɵted"](null,["\n                #"," ","\n            "])),(e()(),ve["ɵted"](null,["\n        "]))],null,function(e,n){var t=n.component;e(n,8,0,t.score.getTasksSolved().indexOf(n.context.$implicit.id)>-1,t.score.getTasksFailed().indexOf(n.context.$implicit.id)>-1,t.score.getTasksSolvedLow().indexOf(n.context.$implicit.id)>-1);e(n,10,0,n.context.$implicit.position,n.context.$implicit.title)})}function me(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,21,"div",[["class","modal card task-select has-button-on-the-edge"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n\n    "])),(e()(),ve["ɵeld"](0,null,null,10,"div",[["class","modal-content"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵand"](16777216,null,null,1,null,fe)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵand"](16777216,null,null,1,null,pe)),ve["ɵdid"](16384,null,0,nn.k,[ve.ViewContainerRef,ve.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵand"](16777216,null,null,1,null,he)),ve["ɵdid"](802816,null,0,nn.j,[ve.ViewContainerRef,ve.TemplateRef,ve.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),ve["ɵted"](null,["\n    "])),(e()(),ve["ɵted"](null,["\n\n    "])),(e()(),ve["ɵeld"](0,null,null,6,"div",[["class","on-the-edge-container"]],null,null,null,null,null)),(e()(),ve["ɵted"](null,["\n        "])),(e()(),ve["ɵeld"](0,null,null,3,"button",[["ion-button",""],["round",""],["small",""]],null,[[null,"click"]],function(e,n,t){var l=!0;if("click"===n){l=!1!==e.component.cancel()&&l}return l},ft.b,ft.a)),ve["ɵdid"](1097728,null,0,pt.a,[[8,""],$n.a,ve.ElementRef,ve.Renderer],{small:[0,"small"],round:[1,"round"]},null),(e()(),ve["ɵted"](0,["",""])),ve["ɵpid"](131072,ht.a,[at.a,ve.ChangeDetectorRef]),(e()(),ve["ɵted"](null,["\n    "])),(e()(),ve["ɵted"](null,["\n"])),(e()(),ve["ɵted"](null,["\n"]))],function(e,n){var t=n.component;e(n,5,0,t.route);e(n,8,0,t.route);e(n,11,0,t.tasks);e(n,17,0,"","")},function(e,n){e(n,18,0,ve["ɵunv"](n,18,0,ve["ɵnov"](n,19).transform("a_alert_cancel")))})}Object.defineProperty(n,"__esModule",{value:!0});var ge=t(56),ve=t(1),be=t(0),ye=(t(17),t(114)),_e=t(186),we=t(220),Te=t(219),Re=t(166),Se=t(64),Ee=t(139),ke=t(164),Oe=t(97),Ae=t(228),Ce=t(55),Ie=t(217),Ne=t(53),je=t(109),Le=t(270),De=t(149),Pe=t(184),xe=t(140),Ue=t(44),Me=t(917),Be=t(43),Ve=t(37),Fe=t(41),qe=t(243),Ge=t(603),He=t(242),ze=function(){function e(){this.historyChanged$=new ve.EventEmitter,this.downloadProgress$=new ve.EventEmitter}return e.prototype.historyChanged=function(e){this.historyChanged$.emit(e)},e.prototype.downloadProgressChanged=function(e,n){this.downloadProgress$.emit({total:e,done:n})},e}(),Ke=t(280),Je=t(298),We=t(297),Xe=t(271),Ye=t(272),$e=t(299),Qe=t(244),Ze=t(108),en=t(218),nn=t(12),tn=t(84),ln=this&&this.__assign||Object.assign||function(e){for(var n,t=1,l=arguments.length;t<l;t++){n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},on=270,rn=367,un=function(){function e(e){this.zone=e,this.ytApiLoaded=!1,this.createApi()}return e.prototype.loadPlayerApi=function(e){var n=i().document;if(!this.ytApiLoaded){this.ytApiLoaded=!0;var t=n.createElement("script");t.type="text/javascript",t.src=e.protocol+"://www.youtube.com/iframe_api",n.body.appendChild(t)}},e.prototype.setupPlayer=function(e,n,t,l,i){var o=this;void 0===l&&(l="");this.api.subscribe(function(){r&&o.createPlayer(e,n,t,l,i)})},e.prototype.play=function(e){e.playVideo()},e.prototype.pause=function(e){e.pauseVideo()},e.prototype.playVideo=function(e,n){n.loadVideoById(e.id.videoId?e.id.videoId:e.id),this.play(n)},e.prototype.isPlaying=function(e){var n=e&&e.getPlayerState,t=n?e.getPlayerState():{};return!!n&&(t!==o().PlayerState.ENDED&&t!==o().PlayerState.PAUSED)},e.prototype.createPlayer=function(e,n,t,l,i){var o=this;void 0===l&&(l=""),void 0===i&&(i={});var u={height:t.height||on,width:t.width||rn};return new(r())(e,ln({},u,{events:{onReady:function(e){o.zone.run(function(){return n.ready&&n.ready.next(e.target)})},onStateChange:function(e){o.zone.run(function(){return n.change&&n.change.next(e)})}},playerVars:i,videoId:l}))},e.prototype.toggleFullScreen=function(e,n){var t=on,l=rn;n||(t=window.innerHeight,l=window.innerWidth),e.setSize(l,t)},e.prototype.generateUniqueId=function(){return Math.random().toString(35).substr(2,7)},e.prototype.createApi=function(){var e=this;this.api=new tn.ReplaySubject(1);i().onYouTubeIframeAPIReady=function(){i()&&e.api.next(o())}},e}(),an=function(){function e(e,n){this.playerService=e,this.renderer=n,this.videoId="",this.protocol=this.getProtocol(),this.playerVars={},this.ready=new ve.EventEmitter,this.change=new ve.EventEmitter}return e.prototype.ngAfterContentInit=function(){var e=this.playerService.generateUniqueId(),n={height:this.height,width:this.width},t=this.renderer.selectRootElement("#yt-player-ngx-component");this.renderer.setAttribute(t,"id",e),this.playerService.loadPlayerApi({protocol:this.protocol}),this.playerService.setupPlayer(e,{change:this.change,ready:this.ready},n,this.videoId,this.playerVars)},e.prototype.getProtocol=function(){var e=window&&window.location?window.location.protocol.replace(":",""):"http";return"file"==e?"https":e},e}(),sn=function(){return function(){}}(),cn=t(188),dn=t(28),fn=t(75),pn=t(266),hn=t(136),mn=t(268),gn=t(265),vn=t(269),bn=t(107),yn=t(46),_n=t(59),wn=function(e){function n(n,t){return e.call(this,n,t)||this}return Object(be.__extends)(n,e),n.prototype.getUpcomingSessionsResponse=function(e){var n=new Ue.h,t=new Ue.g,l=new Ue.i("GET",this.rootUrl+"/trail/"+e+"/sessions/upcoming",null,{headers:t,params:n,responseType:"json"});return this.http.request(l).pipe(Object(_n.filter)(function(e){return e instanceof Ue.j}),Object(yn.map)(function(e){var n=null;return n=e.body,e.clone({body:n})}))},n.prototype.getUpcomingSessions=function(e){return this.getUpcomingSessionsResponse(e).pipe(Object(yn.map)(function(e){return e.body}))},n.prototype.getSessionsResponse=function(e){var n=new Ue.h,t=new Ue.g,l=new Ue.i("GET",this.rootUrl+"/trail/"+e+"/sessions",null,{headers:t,params:n,responseType:"json"});return this.http.request(l).pipe(Object(_n.filter)(function(e){return e instanceof Ue.j}),Object(yn.map)(function(e){var n=null;return n=e.body,e.clone({body:n})}))},n.prototype.getSessions=function(e){return this.getSessionsResponse(e).pipe(Object(yn.map)(function(e){return e.body}))},n}(bn.a),Tn=function(){return function(){}}(),Rn=t(60),Sn=t(295),En=t(267),kn=t(96),On=t(292),An=t(185),Cn=(t(919),t(187)),In=t(300),Nn=function(){function e(e,n){this.el=e,this.iab=n}return e.prototype.ngOnInit=function(){var e=this;this.el.nativeElement.innerHTML=this.test;var n=this.el.nativeElement.querySelector("a");n&&n.addEventListener("click",function(n){n.stopPropagation(),n.preventDefault();e.iab.create(n.srcElement.href,"_system"),console.log("EventListenerClick",n.srcElement)})},e}(),jn=function(){return function(){}}(),Ln=function(){return function(){}}(),Dn=t(117),Pn=t(605),xn=t(606),Un=t(607),Mn=t(608),Bn=t(609),Vn=t(610),Fn=t(611),qn=t(612),Gn=t(613),Hn=t(620),zn=t(920),Kn=t(78),Jn=t(121),Wn=t(6),Xn=t(24),Yn=t(11),$n=t(4),Qn=t(8),Zn=t(16),et=t(62),nt=t(26),tt=t(14),lt=t(77),it=ve["ɵcrt"]({encapsulation:2,styles:[],data:{}}),ot=ve["ɵccf"]("custom-keyboard",De.a,function(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,1,"custom-keyboard",[],[[2,"visible",null]],null,null,s,it)),ve["ɵdid"](114688,null,0,De.a,[ve.ElementRef,ve.Renderer],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,ve["ɵnov"](n,1).visible)})},{keysTab:"keysTab",colNb:"colNb",width:"width",visible:"visible"},{cKClickEmit:"cKClickEmit",deleteEmit:"deleteEmit",hideEmit:"hideEmit"},[]),rt=t(113),ut=t(111),at=t(22),st=t(193),ct=ve["ɵcrt"]({encapsulation:2,styles:[],data:{}}),dt=ve["ɵccf"]("ng-component",xe.b,function(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,1,"ng-component",[],null,null,null,c,ct)),ve["ɵdid"](114688,null,0,xe.b,[Qn.a,_e.a,ye.a,je.a,Rn.a,rt.a,Yn.a,ut.a,at.a,Cn.a,st.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),ft=t(25),pt=t(18),ht=t(38),mt=t(94),gt=t(95),vt=t(93),bt=t(283),yt=t(601),_t=t(171),wt=t(282),Tt=t(278),Rt=t(141),St=t(13),Et=t(48),kt=t(276),Ot=t(35),At=t(54),Ct=t(49),It=t(176),Nt=ve["ɵcrt"]({encapsulation:2,styles:[],data:{}}),jt=ve["ɵccf"]("route-info",qe.a,function(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,1,"route-info",[],null,null,null,j,Nt)),ve["ɵdid"](49152,null,0,qe.a,[St.a,Ve.a,Wn.a,ut.a,Xn.a,at.a],null,null)],null,null)},{},{},[]),Lt=t(921),Dt=t(274),Pt=ve["ɵcrt"]({encapsulation:2,styles:[],data:{}}),xt=ve["ɵccf"]("mcm-download-progress-popup",He.a,function(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,1,"mcm-download-progress-popup",[],null,null,null,L,Pt)),ve["ɵdid"](49152,null,0,He.a,[Wn.a,ve.ChangeDetectorRef],null,null)],null,null)},{},{},[]),Ut=t(241),Mt=t(76),Bt=ve["ɵcrt"]({encapsulation:2,styles:[],data:{}}),Vt=ve["ɵcrt"]({encapsulation:2,styles:[],data:{}}),Ft=t(273),qt=ve["ɵcrt"]({encapsulation:2,styles:[],data:{}}),Gt=ve["ɵccf"]("mcm-icon-modal",Ke.a,function(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,1,"mcm-icon-modal",[],null,null,null,Q,qt)),ve["ɵdid"](49152,null,0,Ke.a,[St.a,Wn.a,Qn.a,Fe.a],null,null)],null,null)},{},{},[]),Ht=t(146),zt=t(29),Kt=t(27),Jt=t(61),Wt=t(92),Xt=t(301),Yt=t(23),$t=t(112),Qt=ve["ɵcrt"]({encapsulation:2,styles:[],data:{}}),Zt=ve["ɵccf"]("mcm-route-by-code-modal",We.a,function(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,1,"mcm-route-by-code-modal",[],null,null,null,ee,Qt)),ve["ɵdid"](49152,null,0,We.a,[Ve.a,Et.a,Wn.a,hn.a,St.a],null,null)],null,null)},{},{},[]),el=t(621),nl=t(148),tl=ve["ɵcrt"]({encapsulation:2,styles:[],data:{}}),ll=ve["ɵccf"]("mcm-terms-and-conditions-modal",Xe.a,function(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,1,"mcm-terms-and-conditions-modal",[],null,null,null,te,tl)),ve["ɵdid"](49152,null,0,Xe.a,[St.a,Et.a,Wn.a,kn.a],null,null)],null,null)},{},{},[]),il=ve["ɵcrt"]({encapsulation:2,styles:[],data:{}}),ol=ve["ɵccf"]("mcm-join-session-modal",Ye.a,function(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,1,"mcm-join-session-modal",[],null,null,null,oe,il)),ve["ɵdid"](49152,null,0,Ye.a,[Wn.a,St.a,Ve.a,Ne.a,Rn.a],null,null)],null,null)},{},{},[]),rl=ve["ɵcrt"]({encapsulation:2,styles:[],data:{}}),ul=ve["ɵccf"]("mcm-session-finished-modal",$e.a,function(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,1,"mcm-session-finished-modal",[],null,null,null,ue,rl)),ve["ɵdid"](49152,null,0,$e.a,[Wn.a,Xn.a,Yn.a,St.a],null,null)],null,null)},{},{},[]),al=ve["ɵcrt"]({encapsulation:2,styles:[],data:{}}),sl=ve["ɵccf"]("mcm-intro-modal",Je.a,function(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,1,"mcm-intro-modal",[],null,null,null,se,al)),ve["ɵdid"](49152,null,0,Je.a,[St.a],null,null)],null,null)},{},{},[]),cl=ve["ɵcrt"]({encapsulation:2,styles:[],data:{}}),dl=ve["ɵccf"]("mcm-trail-finished-modal",In.a,function(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,1,"mcm-trail-finished-modal",[],null,null,null,de,cl)),ve["ɵdid"](49152,null,0,In.a,[Wn.a,Xn.a,Yn.a,St.a],null,null)],null,null)},{},{},[]),fl=ve["ɵcrt"]({encapsulation:2,styles:[],data:{}}),pl=ve["ɵccf"]("centered-task",Qe.a,function(e){return ve["ɵvid"](0,[(e()(),ve["ɵeld"](0,null,null,1,"centered-task",[],null,null,null,me,fl)),ve["ɵdid"](49152,null,0,Qe.a,[Xn.a,St.a,Wn.a],null,null)],null,null)},{},{},[]),hl=t(245),ml=t(209),gl=t(63),vl=t(215),bl=t(275),yl=t(119),_l=t(91),wl=t(159),Tl=t(251),Rl=t(247),Sl=t(255),El=t(142),kl=t(143),Ol=t(145),Al=t(144),Cl=t(189),Il=t(602),Nl=t(246),jl=t(68),Ll=t(216),Dl=t(248),Pl=t(604),xl=t(197),Ul=ve["ɵcmf"](Ln,[Dn.b],function(e){return ve["ɵmod"]([ve["ɵmpd"](512,ve.ComponentFactoryResolver,ve["ɵCodegenComponentFactoryResolver"],[[8,[Pn.a,xn.a,Un.a,Mn.a,Bn.a,Vn.a,Fn.a,qn.a,Gn.a,Hn.a,dt,jt,xt,Gt,Zt,ll,ol,ul,sl,dl,pl,ot]],[3,ve.ComponentFactoryResolver],ve.NgModuleRef]),ve["ɵmpd"](4608,ke.c,ke.c,[]),ve["ɵmpd"](4608,ke.h,ke.b,[]),ve["ɵmpd"](5120,ke.j,ke.k,[]),ve["ɵmpd"](4608,ke.i,ke.i,[ke.c,ke.h,ke.j]),ve["ɵmpd"](4608,ke.g,ke.a,[]),ve["ɵmpd"](5120,ke.e,ke.l,[ke.i,ke.g]),ve["ɵmpd"](4608,Ue.l,Ue.q,[nn.c,ve.PLATFORM_ID,Ue.o]),ve["ɵmpd"](4608,Ue.r,Ue.r,[Ue.l,Ue.p]),ve["ɵmpd"](5120,Ue.a,function(e){return[e]},[Ue.r]),ve["ɵmpd"](4608,Ue.n,Ue.n,[]),ve["ɵmpd"](6144,Ue.m,null,[Ue.n]),ve["ɵmpd"](4608,Ue.k,Ue.k,[Ue.m]),ve["ɵmpd"](6144,Ue.b,null,[Ue.k]),ve["ɵmpd"](5120,Ue.f,Ue.s,[Ue.b,[2,Ue.a]]),ve["ɵmpd"](4608,Ue.c,Ue.c,[Ue.f]),ve["ɵmpd"](5120,ve.LOCALE_ID,ve["ɵm"],[[3,ve.LOCALE_ID]]),ve["ɵmpd"](4608,nn.m,nn.l,[ve.LOCALE_ID]),ve["ɵmpd"](5120,ve.APP_ID,ve["ɵf"],[]),ve["ɵmpd"](5120,ve.IterableDiffers,ve["ɵk"],[]),ve["ɵmpd"](5120,ve.KeyValueDiffers,ve["ɵl"],[]),ve["ɵmpd"](4608,ge.c,ge.s,[nn.c]),ve["ɵmpd"](6144,ve.Sanitizer,null,[ge.c]),ve["ɵmpd"](4608,ge.f,hl.a,[]),ve["ɵmpd"](5120,ge.d,function(e,n,t,l){return[new ge.l(e),new ge.p(n),new ge.o(t,l)]},[nn.c,nn.c,nn.c,ge.f]),ve["ɵmpd"](4608,ge.e,ge.e,[ge.d,ve.NgZone]),ve["ɵmpd"](135680,ge.n,ge.n,[nn.c]),ve["ɵmpd"](4608,ge.m,ge.m,[ge.e,ge.n]),ve["ɵmpd"](6144,ve.RendererFactory2,null,[ge.m]),ve["ɵmpd"](6144,ge.q,null,[ge.n]),ve["ɵmpd"](4608,ve.Testability,ve.Testability,[ve.NgZone]),ve["ɵmpd"](4608,ge.h,ge.h,[nn.c]),ve["ɵmpd"](4608,ge.j,ge.j,[nn.c]),ve["ɵmpd"](4608,Yt.k,Yt.k,[]),ve["ɵmpd"](4608,Yt.c,Yt.c,[]),ve["ɵmpd"](4608,Mt.a,Mt.a,[]),ve["ɵmpd"](4608,un,un,[ve.NgZone]),ve["ɵmpd"](4608,fn.a,fn.a,[]),ve["ɵmpd"](4608,pn.a,pn.a,[fn.a,Ue.c]),ve["ɵmpd"](4608,hn.a,hn.a,[fn.a,Ue.c]),ve["ɵmpd"](4608,mn.a,mn.a,[fn.a,Ue.c]),ve["ɵmpd"](4608,gn.a,gn.a,[fn.a,Ue.c]),ve["ɵmpd"](4608,vn.a,vn.a,[fn.a,Ue.c]),ve["ɵmpd"](4608,wn,wn,[fn.a,Ue.c]),ve["ɵmpd"](4608,ml.a,ml.a,[Yn.a,$n.a]),ve["ɵmpd"](4608,ut.a,ut.a,[Yn.a,$n.a]),ve["ɵmpd"](4608,rt.a,rt.a,[]),ve["ɵmpd"](4608,Kt.a,Kt.a,[]),ve["ɵmpd"](4608,gl.a,gl.a,[Qn.a]),ve["ɵmpd"](4608,At.a,At.a,[$n.a,Qn.a,ve.NgZone,tt.a]),ve["ɵmpd"](4608,vl.a,vl.a,[Yn.a,$n.a]),ve["ɵmpd"](5120,nn.h,bl.c,[nn.s,[2,nn.a],$n.a]),ve["ɵmpd"](4608,nn.g,nn.g,[nn.h]),ve["ɵmpd"](5120,yl.b,yl.d,[Yn.a,yl.a]),ve["ɵmpd"](5120,nt.a,nt.b,[Yn.a,yl.b,nn.g,_l.b,ve.ComponentFactoryResolver]),ve["ɵmpd"](4608,Et.a,Et.a,[Yn.a,$n.a,nt.a]),ve["ɵmpd"](4608,wl.a,wl.a,[Yn.a,$n.a]),ve["ɵmpd"](4608,Tl.a,Tl.a,[Yn.a,$n.a,nt.a]),ve["ɵmpd"](4608,Rl.a,Rl.a,[$n.a,Qn.a,tt.a,Yn.a,Zn.l]),ve["ɵmpd"](4608,Sl.a,Sl.a,[Yn.a,$n.a]),ve["ɵmpd"](4608,et.a,et.a,[Qn.a,$n.a]),ve["ɵmpd"](5120,st.a,st.c,[st.b]),ve["ɵmpd"](5120,El.b,l,[Ue.c]),ve["ɵmpd"](4608,kl.a,kl.b,[]),ve["ɵmpd"](4608,Ol.b,Ol.a,[]),ve["ɵmpd"](4608,Al.b,Al.a,[]),ve["ɵmpd"](4608,Cl.a,Cl.a,[]),ve["ɵmpd"](4608,at.a,at.a,[Cl.a,El.b,kl.a,Ol.b,Al.b,at.b,at.c]),ve["ɵmpd"](4608,_e.a,_e.a,[]),ve["ɵmpd"](4608,ye.a,ye.a,[]),ve["ɵmpd"](4608,we.a,we.a,[]),ve["ɵmpd"](4608,Te.a,Te.a,[]),ve["ɵmpd"](4608,Ie.a,Ie.a,[]),ve["ɵmpd"](4608,en.a,en.a,[]),ve["ɵmpd"](4608,Re.a,Re.a,[]),ve["ɵmpd"](4608,Oe.a,Oe.a,[]),ve["ɵmpd"](4608,Ae.a,Ae.a,[]),ve["ɵmpd"](4608,Fe.a,Fe.a,[Oe.a,Qn.a,Ae.a,ke.e,Ue.c,ge.c]),ve["ɵmpd"](4608,Ce.a,Ce.a,[]),ve["ɵmpd"](4608,Ve.a,Ve.a,[Fe.a,Ce.a,at.a,Qn.a,st.a,ut.a]),ve["ɵmpd"](4608,Ze.a,Ze.a,[Ie.a,ut.a,Qn.a,en.a,Te.a]),ve["ɵmpd"](4608,dn.b,dn.b,[ke.e,Ze.a,we.a,Ue.c,Qn.a,Ve.a,st.a,Oe.a]),ve["ɵmpd"](4608,Ee.a,Ee.a,[Ve.a,dn.b,Fe.a]),ve["ɵmpd"](4608,ze,ze,[]),ve["ɵmpd"](4608,Ne.a,Ne.a,[Et.a,Ve.a,ut.a,nt.a,at.a,Ce.a,Ee.a,dn.b]),ve["ɵmpd"](4608,Le.a,Le.a,[]),ve["ɵmpd"](4608,je.a,je.a,[at.a,Qn.a,Le.a,st.a]),ve["ɵmpd"](4608,En.b,En.b,[]),ve["ɵmpd"](4608,Rn.a,Rn.a,[rt.a,st.a,hn.a,gn.a,pn.a,mn.a,Ze.a,En.b,at.a,Sl.a,vn.a,Qn.a]),ve["ɵmpd"](4608,kn.a,kn.a,[]),ve["ɵmpd"](4608,On.a,On.a,[]),ve["ɵmpd"](4608,Pe.a,Pe.a,[]),ve["ɵmpd"](4608,An.a,An.a,[]),ve["ɵmpd"](4608,Cn.a,Cn.a,[]),ve["ɵmpd"](512,ke.f,ke.f,[]),ve["ɵmpd"](512,Ue.e,Ue.e,[]),ve["ɵmpd"](512,Ue.d,Ue.d,[]),ve["ɵmpd"](512,nn.b,nn.b,[]),ve["ɵmpd"](512,ve.ErrorHandler,Il.a,[]),ve["ɵmpd"](256,$n.b,{tabsHideOnSubPages:!0,swipeBackEnabled:!1},[]),ve["ɵmpd"](1024,Nl.a,Nl.b,[]),ve["ɵmpd"](1024,Qn.a,Qn.b,[ge.b,Nl.a,ve.NgZone]),ve["ɵmpd"](1024,$n.a,$n.c,[$n.b,Qn.a]),ve["ɵmpd"](512,tt.a,tt.a,[Qn.a]),ve["ɵmpd"](512,jl.a,jl.a,[]),ve["ɵmpd"](512,Yn.a,Yn.a,[$n.a,Qn.a,[2,jl.a]]),ve["ɵmpd"](512,Zn.l,Zn.l,[Yn.a]),ve["ɵmpd"](256,yl.a,{links:[{loadChildren:"../pages/dashboard/dashboard.module.ngfactory#DashboardPageModuleNgFactory",name:"DashboardPage",segment:"dashboard",priority:"low",defaultHistory:[]},{loadChildren:"../pages/chat/chat.module.ngfactory#ChatPageModuleNgFactory",name:"ChatPage",segment:"chat",priority:"low",defaultHistory:[]},{loadChildren:"../pages/home/home.module.ngfactory#HomePageModuleNgFactory",name:"HomePage",segment:"home",priority:"low",defaultHistory:[]},{loadChildren:"../pages/home/tabs/RoutesList/RoutesList.module.ngfactory#RoutesListPageModuleNgFactory",name:"RoutesListPage",segment:"RoutesList",priority:"low",defaultHistory:[]},{loadChildren:"../pages/home/tabs/RoutesMap/RoutesMap.module.ngfactory#RoutesMapPageModuleNgFactory",name:"RoutesMapPage",segment:"RoutesMap",priority:"low",defaultHistory:[]},{loadChildren:"../pages/home/tabs/TasksMap/TasksMap.module.ngfactory#TasksMapPageModuleNgFactory",name:"TasksMap",segment:"TasksMap/:routeId",priority:"low",defaultHistory:[]},{loadChildren:"../pages/info/info.module.ngfactory#InfoPageModuleNgFactory",name:"InfoPage",segment:"info",priority:"low",defaultHistory:[]},{loadChildren:"../pages/onboarding/onboarding.module.ngfactory#OnboardingPageModuleNgFactory",name:"OnboardingPage",segment:"onboarding",priority:"low",defaultHistory:[]},{loadChildren:"../pages/portal/portal.module.ngfactory#PortalPageModuleNgFactory",name:"PortalPage",segment:"portal",priority:"low",defaultHistory:[]},{loadChildren:"../pages/settings/settings.module.ngfactory#SettingsPageModuleNgFactory",name:"SettingsPage",segment:"settings",priority:"low",defaultHistory:[]},{loadChildren:"../pages/task-detail/task-detail.module.ngfactory#TaskDetailPageModuleNgFactory",name:"TaskDetail",segment:":routeId/TasksDetail/:taskId",priority:"low",defaultHistory:[]}]},[]),ve["ɵmpd"](512,ve.Compiler,ve.Compiler,[]),ve["ɵmpd"](512,Ll.a,Ll.a,[ve.Compiler]),ve["ɵmpd"](1024,_l.b,_l.c,[Ll.a,ve.Injector]),ve["ɵmpd"](1024,ve.APP_INITIALIZER,function(e,n,t,l,i,o,r,u,a,s,c,d,f,p){return[ge.r(e,n),Dl.a(t),rt.b(l,i),Rl.b(o,r,u,a,s),_l.d(c,d,f,p)]},[[2,ge.i],[2,ve.NgProbeToken],$n.a,Qn.a,tt.a,$n.a,Qn.a,tt.a,Yn.a,Zn.l,$n.a,yl.a,_l.b,ve.NgZone]),ve["ɵmpd"](512,ve.ApplicationInitStatus,ve.ApplicationInitStatus,[[2,ve.APP_INITIALIZER]]),ve["ɵmpd"](131584,ve["ɵe"],ve["ɵe"],[ve.NgZone,ve["ɵConsole"],ve.Injector,ve.ErrorHandler,ve.ComponentFactoryResolver,ve.ApplicationInitStatus]),ve["ɵmpd"](2048,ve.ApplicationRef,null,[ve["ɵe"]]),ve["ɵmpd"](512,ve.ApplicationModule,ve.ApplicationModule,[ve.ApplicationRef]),ve["ɵmpd"](512,ge.a,ge.a,[[3,ge.a]]),ve["ɵmpd"](512,Yt.j,Yt.j,[]),ve["ɵmpd"](512,Yt.d,Yt.d,[]),ve["ɵmpd"](512,Yt.i,Yt.i,[]),ve["ɵmpd"](512,bl.a,bl.a,[]),ve["ɵmpd"](512,Se.a,Se.a,[]),ve["ɵmpd"](512,Be.a,Be.a,[]),ve["ɵmpd"](512,cn.a,cn.a,[]),ve["ɵmpd"](512,Ge.LinkyModule,Ge.LinkyModule,[]),ve["ɵmpd"](512,sn,sn,[]),ve["ɵmpd"](512,Tn,Tn,[]),ve["ɵmpd"](512,bl.b,bl.b,[]),ve["ɵmpd"](512,Sn.a,Sn.a,[]),ve["ɵmpd"](512,Pl.a,Pl.a,[]),ve["ɵmpd"](512,jn,jn,[]),ve["ɵmpd"](512,Ln,Ln,[]),ve["ɵmpd"](256,Ue.o,"XSRF-TOKEN",[]),ve["ɵmpd"](256,Ue.p,"X-XSRF-TOKEN",[]),ve["ɵmpd"](256,_l.a,xl.a,[]),ve["ɵmpd"](256,Dn.a,xe.b,[]),ve["ɵmpd"](256,nn.a,"/",[]),ve["ɵmpd"](256,st.b,null,[]),ve["ɵmpd"](256,at.c,void 0,[]),ve["ɵmpd"](256,at.b,!0,[])])});Object(ve.enableProdMode)(),Object(ge.k)().bootstrapModuleFactory(Ul)},75:function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0);var l=function(){return function(){this.rootUrl="https://api.mathcitymap.eu/public/index.php"}}()},915:function(e,n,t){function l(e){return t(i(e))}function i(e){var n=o[e];if(!(n+1))throw new Error("Cannot find module '"+e+"'.");return n}var o={"./af":478,"./af.js":478,"./ar":479,"./ar-dz":480,"./ar-dz.js":480,"./ar-kw":481,"./ar-kw.js":481,"./ar-ly":482,"./ar-ly.js":482,"./ar-ma":483,"./ar-ma.js":483,"./ar-sa":484,"./ar-sa.js":484,"./ar-tn":485,"./ar-tn.js":485,"./ar.js":479,"./az":486,"./az.js":486,"./be":487,"./be.js":487,"./bg":488,"./bg.js":488,"./bm":489,"./bm.js":489,"./bn":490,"./bn.js":490,"./bo":491,"./bo.js":491,"./br":492,"./br.js":492,"./bs":493,"./bs.js":493,"./ca":494,"./ca.js":494,"./cs":495,"./cs.js":495,"./cv":496,"./cv.js":496,"./cy":497,"./cy.js":497,"./da":498,"./da.js":498,"./de":499,"./de-at":500,"./de-at.js":500,"./de-ch":501,"./de-ch.js":501,"./de.js":499,"./dv":502,"./dv.js":502,"./el":503,"./el.js":503,"./en-au":504,"./en-au.js":504,"./en-ca":505,"./en-ca.js":505,"./en-gb":506,"./en-gb.js":506,"./en-ie":507,"./en-ie.js":507,"./en-il":508,"./en-il.js":508,"./en-nz":509,"./en-nz.js":509,"./eo":510,"./eo.js":510,"./es":511,"./es-do":512,"./es-do.js":512,"./es-us":513,"./es-us.js":513,"./es.js":511,"./et":514,"./et.js":514,"./eu":515,"./eu.js":515,"./fa":516,"./fa.js":516,"./fi":517,"./fi.js":517,"./fo":518,"./fo.js":518,"./fr":519,"./fr-ca":520,"./fr-ca.js":520,"./fr-ch":521,"./fr-ch.js":521,"./fr.js":519,"./fy":522,"./fy.js":522,"./gd":523,"./gd.js":523,"./gl":524,"./gl.js":524,"./gom-latn":525,"./gom-latn.js":525,"./gu":526,"./gu.js":526,"./he":527,"./he.js":527,"./hi":528,"./hi.js":528,"./hr":529,"./hr.js":529,"./hu":530,"./hu.js":530,"./hy-am":531,"./hy-am.js":531,"./id":532,"./id.js":532,"./is":533,"./is.js":533,"./it":534,"./it.js":534,"./ja":535,"./ja.js":535,"./jv":536,"./jv.js":536,"./ka":537,"./ka.js":537,"./kk":538,"./kk.js":538,"./km":539,"./km.js":539,"./kn":540,"./kn.js":540,"./ko":541,"./ko.js":541,"./ky":542,"./ky.js":542,"./lb":543,"./lb.js":543,"./lo":544,"./lo.js":544,"./lt":545,"./lt.js":545,"./lv":546,"./lv.js":546,"./me":547,"./me.js":547,"./mi":548,"./mi.js":548,"./mk":549,"./mk.js":549,"./ml":550,"./ml.js":550,"./mn":551,"./mn.js":551,"./mr":552,"./mr.js":552,"./ms":553,"./ms-my":554,"./ms-my.js":554,"./ms.js":553,"./mt":555,"./mt.js":555,"./my":556,"./my.js":556,"./nb":557,"./nb.js":557,"./ne":558,"./ne.js":558,"./nl":559,"./nl-be":560,"./nl-be.js":560,"./nl.js":559,"./nn":561,"./nn.js":561,"./pa-in":562,"./pa-in.js":562,"./pl":563,"./pl.js":563,"./pt":564,"./pt-br":565,"./pt-br.js":565,"./pt.js":564,"./ro":566,"./ro.js":566,"./ru":567,"./ru.js":567,"./sd":568,"./sd.js":568,"./se":569,"./se.js":569,"./si":570,"./si.js":570,"./sk":571,"./sk.js":571,"./sl":572,"./sl.js":572,"./sq":573,"./sq.js":573,"./sr":574,"./sr-cyrl":575,"./sr-cyrl.js":575,"./sr.js":574,"./ss":576,"./ss.js":576,"./sv":577,"./sv.js":577,"./sw":578,"./sw.js":578,"./ta":579,"./ta.js":579,"./te":580,"./te.js":580,"./tet":581,"./tet.js":581,"./tg":582,"./tg.js":582,"./th":583,"./th.js":583,"./tl-ph":584,"./tl-ph.js":584,"./tlh":585,"./tlh.js":585,"./tr":586,"./tr.js":586,"./tzl":587,"./tzl.js":587,"./tzm":588,"./tzm-latn":589,"./tzm-latn.js":589,"./tzm.js":588,"./ug-cn":590,"./ug-cn.js":590,"./uk":591,"./uk.js":591,"./ur":592,"./ur.js":592,"./uz":593,"./uz-latn":594,"./uz-latn.js":594,"./uz.js":593,"./vi":595,"./vi.js":595,"./x-pseudo":596,"./x-pseudo.js":596,"./yo":597,"./yo.js":597,"./zh-cn":598,"./zh-cn.js":598,"./zh-hk":599,"./zh-hk.js":599,"./zh-tw":600,"./zh-tw.js":600};l.keys=function(){return Object.keys(o)},l.resolve=i,e.exports=l,l.id=915}},[622]);