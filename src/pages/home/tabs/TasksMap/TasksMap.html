<mcm-header></mcm-header>
<ion-content class="has-header map">
    <div id="tasks-map" class="map-view"></div>

    <!--TODO RANKING TABLE FOR FUTUTRE GAMIFICATION INTEGRATION-->
    <!--<div *ngIf="currentScore && currentScore > 0" id="ranking" class="detail-box top">-->
    <!--<div class="text-container">-->
    <!--<div class="ranking-row above">-->
    <!--<ion-row class="ranking dotted-border-bottom">-->
    <!--<ion-col><p>Teamname</p></ion-col>-->
    <!--<ion-col col-auto><p text-right>150 MP</p></ion-col>-->
    <!--</ion-row>-->
    <!--</div>-->
    <!--<div class="ranking-row">-->
    <!--<ion-row class="ranking current dotted-border-bottom">-->
    <!--<ion-col><p>{{user.name}}</p></ion-col>-->
    <!--<ion-col><p text-right>{{currentScore}} MP</p></ion-col>-->
    <!--</ion-row>-->
    <!--</div>-->
    <!--<div class="ranking-row below">-->
    <!--<ion-row class="ranking">-->
    <!--<ion-col><p>Teamname</p></ion-col>-->
    <!--<ion-col><p text-right>70 MP</p></ion-col>-->
    <!--</ion-row>-->
    <!--</div>-->
    <!--</div>-->
    <!--</div>-->


    <div *ngIf="!gamificationIsDisabled && currentScore && currentScore > 0" id="ranking" class="detail-box ranking">
        <ion-grid no-padding class="ranking">
            <ion-row class="current">
                <ion-col>
                    <ion-label>{{user.name}}</ion-label>
                </ion-col>
                <ion-col>
                    <ion-label>{{currentScore}} MP</ion-label>
                </ion-col>
            </ion-row>
        </ion-grid>
    </div>

    <div id="details" class="detail-box" [ngClass]="{'open': state.selectedTask}">

        <!--FAB in session mode-->
        <div class="fab-container">
            <ion-fab right bottom>
                <button ion-fab color="primary"><ion-icon name="more"></ion-icon></button>
                <ion-fab-list side="top">
                    <!--TODO Transfer functionality of triggering SessionFinished modal when session time is over-->
                    <button color="danger" ion-fab (click)="sessionFinished()">
                        <ion-icon name="log-out"></ion-icon>
                    </button>
                    <button ion-fab (click)="goToMyPage()">
                        <ion-icon name="chatbubbles"></ion-icon>
                    </button>
                </ion-fab-list>
            </ion-fab>
        </div>

        <!--FAB in normal mode-->
        <!--<div class="fab-container">-->
            <!--<ion-fab right bottom>-->
                <!--<button ion-fab color="primary"><ion-icon name="more"></ion-icon></button>-->
                <!--<ion-fab-list side="top">-->
                    <!--<button color="danger" ion-fab (click)="resetTasks()">-->
                        <!--<ion-icon name="icon-restart"></ion-icon>-->
                    <!--</button>-->
                    <!--<button [hidden]="!state.isShowingAllTasks" ion-fab (click)="selectStartPoint()">-->
                        <!--<ion-icon name="icon-starting-point"></ion-icon>-->
                    <!--</button>-->
                    <!--<button color="danger" [hidden]="state.isShowingAllTasks" ion-fab (click)="showAllTasks()">-->
                        <!--<ion-icon name="icon-visibility"></ion-icon>-->
                    <!--</button>-->
                <!--</ion-fab-list>-->
            <!--</ion-fab>-->
        <!--</div>-->
        <div tappable class="image-container" *ngIf="state.selectedTask" (click)="gototask(state.selectedTask.id, state.selectedTask.title)" [ngStyle]="{'background-image' : 'url('+ state.selectedTask.getSingleQuotedImageURL() +')'}"></div>
        <div class="text-container" *ngIf="state.selectedTask">
            <div class="segmented-box">
                <div class="title segement">
                    <span tappable (click)="gototask(state.selectedTask.id, state.selectedTask.title)">#{{state.selectedTask.position}}</span>
                    <h2 tappable (click)="gototask(state.selectedTask.id, state.selectedTask.title)">{{state.selectedTask.title}}</h2>
                </div>
            </div>
            <div class="segmented-box bottom">
                <!--TODO FUTUTRE GAMIFICATION INTEGRATION-->
                <!--<span class="segement">??? {{ "a_g_max_points" | translate }}</span>-->
                <div class="segement buttons">
                    <div class="text-right">
                        <button ion-button small round (click)="gototask(state.selectedTask.id, state.selectedTask.title)">{{ 'a_alert_show_task' | translate }}</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</ion-content>