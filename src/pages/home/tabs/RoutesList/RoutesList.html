<ion-header>
    <ion-toolbar>
        <ion-searchbar type="text" [(ngModel)]="routesListSearch" placeholder="{{ 'a_search_trails' | translate }}" debounce="500"></ion-searchbar>
        <ion-buttons end>
            <button class="settings-button" ion-button icon-only (click)="addRouteByCode()">
                <img class="header-icon" src="assets/icons/add-scan.svg"/>
            </button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<ion-content #container class="routes-list">
    <ion-refresher (ionRefresh)="doRefresh($event)">
        <ion-refresher-content refreshingText="{{'a_toast_update_start' | translate}}"></ion-refresher-content>
    </ion-refresher>

    <!--Complete Routes List-->
    <ion-list no-margin no-padding lazy-load-images image-size="s" *ngIf="showAllRoutes">
        <route-teaser *ngFor="let item of getRoutesList() | search:'title,city,code':routesListSearch" [id]="'route-item-' + item.id"
                      (click)="showRouteDetail(item)" [route]="item" [isOnline]="helper.isOnline"
                      (downloadRoute)="reactOnDownloadedRoute($event)" (removeRoute)="reactOnRemovedRoute()"></route-teaser>
        <div tappable class="detail-box" *ngIf="getSearchResults() == 0">
            <h2 class="item-text-wrap" text-center>{{ "p_review_no_elements" | translate }}</h2>
        </div>
    </ion-list>

    <!--Downloaded Routes List-->
    <ion-list no-margin no-padding lazy-load-images image-size="s" *ngIf="!showAllRoutes" >
        <route-teaser class=downloaded *ngFor="let item of downloadedItems | search:'title,city,code':routesListSearch" [id]="'route-item-' + item.id"
                      (click)="showRouteDetail(item)" [route]="item" [isOnline]="helper.isOnline"
                      (removeRoute)="reactOnRemovedRoute()"></route-teaser>
        <div tappable class="detail-box" *ngIf="getSearchResults() == 0">
            <h2 class="item-text-wrap" text-center>{{ "p_review_no_elements" | translate }}</h2>
        </div>
        <div *ngIf="downloadedItems.length == 0">Currently you have no downloaded trails</div>
    </ion-list>

    <ion-infinite-scroll  *ngIf="showAllRoutes" (ionInfinite)="doInfinite($event)" threshold="35%">
        <ion-infinite-scroll-content></ion-infinite-scroll-content>
    </ion-infinite-scroll>

    <ion-fab right bottom>
        <button ion-fab color="primary" (click)="switchToMap()">
            <img src="assets/icons/map.svg"/>
        </button>
    </ion-fab>

</ion-content>
