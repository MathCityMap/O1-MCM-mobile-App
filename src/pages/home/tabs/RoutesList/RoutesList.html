<ion-content class="routes-list has-header">
    <ion-refresher (ionRefresh)="doRefresh($event)">
        <ion-refresher-content refreshingText="{{'a_toast_update_start' | translate}}"></ion-refresher-content>
    </ion-refresher>

    <ion-fab right bottom>
        <button ion-fab color="primary" (click)="addRouteByCode()"><ion-icon name="icon-add-privateroute"></ion-icon></button>
    </ion-fab>

  <ion-list>
    <div class="detail-box" *ngFor="let item of items">
        <div class="image-container" (click)="modalsService.showRoute(item, navCtrl)" [ngStyle]="{'background-image' : 'url(\\''+ item.getThumbURL() +'\\')'}" ></div>
        <div class="text-container">
          <p (click)="modalsService.showRoute(item, navCtrl)">{{item.city}}, {{item.countryCode}}</p>
          <h2 (click)="modalsService.showRoute(item, navCtrl)">{{item.title}}</h2>
          <div class="segmented-box dotted-border-top">
            <div class="segement dotted-border-right distance">
                <ion-label>{{ "a_t_distance" | translate }}</ion-label>
                <span>{{item.distance | distance: 'm'}}</span>
            </div>
            <div class="segement dotted-border-right grade">
                <ion-label [ngClass]="{'appear-disabled' : !item.grade}">{{ "a_r_level" | translate }}</ion-label>
                <span *ngIf="item.grade">{{item.grade}}+</span>
                <span *ngIf="!item.grade">{{ "no_data" | translate }}</span>
            </div>
            <div class="segement buttons">
                <div class="button-container text-right">
                    <button ion-button icon-only clear class="dot" (click)="modalsService.presentRouteInfoModal(item, navCtrl)">
                        <img class="primary round" src="./assets/icons/icon_route-info.svg"/>
                    </button>

                    <button ion-button icon-only clear class="dot" *ngIf="!item.downloaded" (click)="modalsService.doDownload(item)">
                        <img class="primary round" src="./assets/icons/icon_route-download.svg"/>
                    </button>

                    <button ion-button icon-only clear class="dot" *ngIf="!!item.downloaded" (click)="removeRoute(item)">
                        <img class="danger round" src="./assets/icons/icon_delete.svg"/>
                    </button>
                </div>

            </div>

          </div>
        </div>

      </div>
  </ion-list>
</ion-content>
