<mcm-header></mcm-header>
<ion-content class="has-header pattern-bg">
    <div class="card first" *ngIf="route">
    <p>{{ route.city }}, {{ route.countryCode }}</p>
    <h1>{{ route.title }}</h1>

    </div>

    <div class="image-box">
        <ion-grid>
            <ion-row align-items-center *ngIf="route">
                <ion-col col-4 class="button-container">
                    <button ion-button icon-only clear *ngIf="!route.downloaded" (click)="doDownload(route)">
                    <img class="primary round" src="./assets/icons/icon_download-large.svg"/>
                    </button>
                    <button ion-button icon-only clear *ngIf="route.downloaded" (click)="removeRoute(route)">
                    <img class="danger round" src="./assets/icons/icon_delete-large.svg"/>
                    </button>
                </ion-col>
                <ion-col lazy-load-images>
                    <img src="./assets/images/img_default_image.gif" [attr.data-async-src]="route.getImageURL()" class="round bordered lazy" />
                    <!-- TODO: show default image when no image found -->
                    <img *ngIf="false" src="./assets/images/img_default_image.gif" class="round bordered" />
                </ion-col>
                <ion-col col-4 class="button-container">
                    <button ion-button icon-only clear [disabled]="!route.downloaded" (click)="showRoute(route)">
                    <img class="primary round" src="./assets/icons/icon_play-large.svg"/>
                    </button>
                </ion-col>
            </ion-row>
        </ion-grid>
    </div>

    <div class="card text-center basic-info">
        <ion-grid no-padding>
            <ion-row align-items-center>
                <ion-col>
                    <ion-label>{{ "a_t_grade" | translate }}</ion-label>
                    <!-- <ion-label>{{ "distance" | translate }}</ion-label> -->
                    <span *ngIf="route">{{ route.grade }}</span>
                </ion-col>
                <ion-col></ion-col>
                <ion-col>
                    <ion-label>{{ "p_tb_tasks" | translate }}</ion-label>
                    <!-- <ion-label>{{ "tasks" | translate }}</ion-label> -->
                    <span>{{ totalTasks }}</span>
                </ion-col>
            </ion-row>

            <ion-row align-items-stretch>
                <ion-col class="dotted-border-right">
                    <ion-label>{{ "a_t_distance" | translate }}</ion-label>
                    <!-- <ion-label>{{ "distance" | translate }}</ion-label> -->
                    <span *ngIf="route"> {{route.getDistance() | distance: 'm'}} </span>
                </ion-col>
                <ion-col>
                    <ion-label>{{ "a_r_length" | translate }}</ion-label>
                    <!-- <ion-label>{{ "distance" | translate }}</ion-label> -->
                    <span *ngIf="route">{{ route.length }}</span>
                </ion-col>
                <ion-col class="dotted-border-left">
                    <ion-label>{{ "p_r_duration" | translate }}</ion-label>
                    <!-- <ion-label>{{ "distance" | translate }}</ion-label> -->
                    <span *ngIf="route">{{ route.duration }}</span>
                </ion-col>
            </ion-row>
        </ion-grid>
    </div>

    <div class="card">
        <ion-label>{{'current_progress' | translate}}</ion-label>
        <mcm-progress-bar [total]="totalTasks" [currentProgress]="currentProgress" ></mcm-progress-bar>
    </div>

    <div class="card">
        <ion-label>{{ 'p_r_about' | translate }}</ion-label>
        <p *ngIf="route">{{ route.description }}</p>

        <ion-label>{{ 'a_action_settings' | translate }}</ion-label>
        <p *ngIf="route">
            <ion-row>{{ 'p_session_sorting_score' | translate }}: {{route.getSettingStringValue("gamification", translateService)}}</ion-row>
            <ion-row>{{ 't_samplesolution' | translate }}: {{route.getSettingStringValue("sampleSolution", translateService)}}</ion-row>
            <ion-row>{{ 'a_hints' | translate }}: {{route.getSettingStringValue("hints", translateService)}}</ion-row>
            <ion-row>{{ 'p_r_validation' | translate }}: {{route.getSettingStringValue("answerValidation", translateService)}}</ion-row>
        </p>

        <ion-label>{{ 'a_r_equip' | translate }}</ion-label>
        <p *ngIf="route">{{route.getAssistiveEquipment(translateService)}}</p>

        <ion-label>{{ 'a_r_tags' | translate }}</ion-label>
        <p *ngIf="route">{{ route.tags }}</p>
    </div>

</ion-content>
